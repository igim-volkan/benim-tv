(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function UT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zh={exports:{}},wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function SI(){if(m_)return wl;m_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,s,l){var u=null;if(l!==void 0&&(u=""+l),s.key!==void 0&&(u=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:t,type:o,key:u,ref:s!==void 0?s:null,props:l}}return wl.Fragment=e,wl.jsx=n,wl.jsxs=n,wl}var g_;function AI(){return g_||(g_=1,zh.exports=SI()),zh.exports}var w=AI(),Gh={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function CI(){if(y_)return Re;y_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function I(F){return F===null||typeof F!="object"?null:(F=T&&F[T]||F["@@iterator"],typeof F=="function"?F:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,P={};function G(F,ne,ue){this.props=F,this.context=ne,this.refs=P,this.updater=ue||V}G.prototype.isReactComponent={},G.prototype.setState=function(F,ne){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ne,"setState")},G.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Z(){}Z.prototype=G.prototype;function W(F,ne,ue){this.props=F,this.context=ne,this.refs=P,this.updater=ue||V}var se=W.prototype=new Z;se.constructor=W,O(se,G.prototype),se.isPureReactComponent=!0;var ee=Array.isArray;function ce(){}var N={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function x(F,ne,ue){var he=ue.ref;return{$$typeof:t,type:F,key:ne,ref:he!==void 0?he:null,props:ue}}function L(F,ne){return x(F.type,ne,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function q(F){var ne={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ue){return ne[ue]})}var D=/\/+/g;function Pe(F,ne){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):ne.toString(36)}function rt(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(ce,ce):(F.status="pending",F.then(function(ne){F.status==="pending"&&(F.status="fulfilled",F.value=ne)},function(ne){F.status==="pending"&&(F.status="rejected",F.reason=ne)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function J(F,ne,ue,he,Ae){var we=typeof F;(we==="undefined"||we==="boolean")&&(F=null);var ke=!1;if(F===null)ke=!0;else switch(we){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(F.$$typeof){case t:case e:ke=!0;break;case _:return ke=F._init,J(ke(F._payload),ne,ue,he,Ae)}}if(ke)return Ae=Ae(F),ke=he===""?"."+Pe(F,0):he,ee(Ae)?(ue="",ke!=null&&(ue=ke.replace(D,"$&/")+"/"),J(Ae,ne,ue,"",function(gi){return gi})):Ae!=null&&(k(Ae)&&(Ae=L(Ae,ue+(Ae.key==null||F&&F.key===Ae.key?"":(""+Ae.key).replace(D,"$&/")+"/")+ke)),ne.push(Ae)),1;ke=0;var gt=he===""?".":he+":";if(ee(F))for(var at=0;at<F.length;at++)he=F[at],we=gt+Pe(he,at),ke+=J(he,ne,ue,we,Ae);else if(at=I(F),typeof at=="function")for(F=at.call(F),at=0;!(he=F.next()).done;)he=he.value,we=gt+Pe(he,at++),ke+=J(he,ne,ue,we,Ae);else if(we==="object"){if(typeof F.then=="function")return J(rt(F),ne,ue,he,Ae);throw ne=String(F),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ae(F,ne,ue){if(F==null)return F;var he=[],Ae=0;return J(F,he,"","",function(we){return ne.call(ue,we,Ae++)}),he}function ge(F){if(F._status===-1){var ne=F._result;ne=ne(),ne.then(function(ue){(F._status===0||F._status===-1)&&(F._status=1,F._result=ue)},function(ue){(F._status===0||F._status===-1)&&(F._status=2,F._result=ue)}),F._status===-1&&(F._status=0,F._result=ne)}if(F._status===1)return F._result.default;throw F._result}var Ve=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},$e={map:ae,forEach:function(F,ne,ue){ae(F,function(){ne.apply(this,arguments)},ue)},count:function(F){var ne=0;return ae(F,function(){ne++}),ne},toArray:function(F){return ae(F,function(ne){return ne})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Re.Activity=E,Re.Children=$e,Re.Component=G,Re.Fragment=n,Re.Profiler=s,Re.PureComponent=W,Re.StrictMode=o,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Re.__COMPILER_RUNTIME={__proto__:null,c:function(F){return N.H.useMemoCache(F)}},Re.cache=function(F){return function(){return F.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(F,ne,ue){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var he=O({},F.props),Ae=F.key;if(ne!=null)for(we in ne.key!==void 0&&(Ae=""+ne.key),ne)!M.call(ne,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ne.ref===void 0||(he[we]=ne[we]);var we=arguments.length-2;if(we===1)he.children=ue;else if(1<we){for(var ke=Array(we),gt=0;gt<we;gt++)ke[gt]=arguments[gt+2];he.children=ke}return x(F.type,Ae,he)},Re.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},Re.createElement=function(F,ne,ue){var he,Ae={},we=null;if(ne!=null)for(he in ne.key!==void 0&&(we=""+ne.key),ne)M.call(ne,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ae[he]=ne[he]);var ke=arguments.length-2;if(ke===1)Ae.children=ue;else if(1<ke){for(var gt=Array(ke),at=0;at<ke;at++)gt[at]=arguments[at+2];Ae.children=gt}if(F&&F.defaultProps)for(he in ke=F.defaultProps,ke)Ae[he]===void 0&&(Ae[he]=ke[he]);return x(F,we,Ae)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(F){return{$$typeof:d,render:F}},Re.isValidElement=k,Re.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:ge}},Re.memo=function(F,ne){return{$$typeof:p,type:F,compare:ne===void 0?null:ne}},Re.startTransition=function(F){var ne=N.T,ue={};N.T=ue;try{var he=F(),Ae=N.S;Ae!==null&&Ae(ue,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ce,Ve)}catch(we){Ve(we)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),N.T=ne}},Re.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Re.use=function(F){return N.H.use(F)},Re.useActionState=function(F,ne,ue){return N.H.useActionState(F,ne,ue)},Re.useCallback=function(F,ne){return N.H.useCallback(F,ne)},Re.useContext=function(F){return N.H.useContext(F)},Re.useDebugValue=function(){},Re.useDeferredValue=function(F,ne){return N.H.useDeferredValue(F,ne)},Re.useEffect=function(F,ne){return N.H.useEffect(F,ne)},Re.useEffectEvent=function(F){return N.H.useEffectEvent(F)},Re.useId=function(){return N.H.useId()},Re.useImperativeHandle=function(F,ne,ue){return N.H.useImperativeHandle(F,ne,ue)},Re.useInsertionEffect=function(F,ne){return N.H.useInsertionEffect(F,ne)},Re.useLayoutEffect=function(F,ne){return N.H.useLayoutEffect(F,ne)},Re.useMemo=function(F,ne){return N.H.useMemo(F,ne)},Re.useOptimistic=function(F,ne){return N.H.useOptimistic(F,ne)},Re.useReducer=function(F,ne,ue){return N.H.useReducer(F,ne,ue)},Re.useRef=function(F){return N.H.useRef(F)},Re.useState=function(F){return N.H.useState(F)},Re.useSyncExternalStore=function(F,ne,ue){return N.H.useSyncExternalStore(F,ne,ue)},Re.useTransition=function(){return N.H.useTransition()},Re.version="19.2.3",Re}var v_;function Kp(){return v_||(v_=1,Gh.exports=CI()),Gh.exports}var ve=Kp();const LT=UT(ve);var Hh={exports:{}},Il={},Yh={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function wI(){return __||(__=1,(function(t){function e(J,ae){var ge=J.length;J.push(ae);e:for(;0<ge;){var Ve=ge-1>>>1,$e=J[Ve];if(0<s($e,ae))J[Ve]=ae,J[ge]=$e,ge=Ve;else break e}}function n(J){return J.length===0?null:J[0]}function o(J){if(J.length===0)return null;var ae=J[0],ge=J.pop();if(ge!==ae){J[0]=ge;e:for(var Ve=0,$e=J.length,F=$e>>>1;Ve<F;){var ne=2*(Ve+1)-1,ue=J[ne],he=ne+1,Ae=J[he];if(0>s(ue,ge))he<$e&&0>s(Ae,ue)?(J[Ve]=Ae,J[he]=ge,Ve=he):(J[Ve]=ue,J[ne]=ge,Ve=ne);else if(he<$e&&0>s(Ae,ge))J[Ve]=Ae,J[he]=ge,Ve=he;else break e}}return ae}function s(J,ae){var ge=J.sortIndex-ae.sortIndex;return ge!==0?ge:J.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var g=[],p=[],_=1,E=null,T=3,I=!1,V=!1,O=!1,P=!1,G=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function se(J){for(var ae=n(p);ae!==null;){if(ae.callback===null)o(p);else if(ae.startTime<=J)o(p),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=n(p)}}function ee(J){if(O=!1,se(J),!V)if(n(g)!==null)V=!0,ce||(ce=!0,q());else{var ae=n(p);ae!==null&&rt(ee,ae.startTime-J)}}var ce=!1,N=-1,M=5,x=-1;function L(){return P?!0:!(t.unstable_now()-x<M)}function k(){if(P=!1,ce){var J=t.unstable_now();x=J;var ae=!0;try{e:{V=!1,O&&(O=!1,Z(N),N=-1),I=!0;var ge=T;try{t:{for(se(J),E=n(g);E!==null&&!(E.expirationTime>J&&L());){var Ve=E.callback;if(typeof Ve=="function"){E.callback=null,T=E.priorityLevel;var $e=Ve(E.expirationTime<=J);if(J=t.unstable_now(),typeof $e=="function"){E.callback=$e,se(J),ae=!0;break t}E===n(g)&&o(g),se(J)}else o(g);E=n(g)}if(E!==null)ae=!0;else{var F=n(p);F!==null&&rt(ee,F.startTime-J),ae=!1}}break e}finally{E=null,T=ge,I=!1}ae=void 0}}finally{ae?q():ce=!1}}}var q;if(typeof W=="function")q=function(){W(k)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Pe=D.port2;D.port1.onmessage=k,q=function(){Pe.postMessage(null)}}else q=function(){G(k,0)};function rt(J,ae){N=G(function(){J(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(J){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var ge=T;T=ae;try{return J()}finally{T=ge}},t.unstable_requestPaint=function(){P=!0},t.unstable_runWithPriority=function(J,ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ge=T;T=J;try{return ae()}finally{T=ge}},t.unstable_scheduleCallback=function(J,ae,ge){var Ve=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ve+ge:Ve):ge=Ve,J){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ge+$e,J={id:_++,callback:ae,priorityLevel:J,startTime:ge,expirationTime:$e,sortIndex:-1},ge>Ve?(J.sortIndex=ge,e(p,J),n(g)===null&&J===n(p)&&(O?(Z(N),N=-1):O=!0,rt(ee,ge-Ve))):(J.sortIndex=$e,e(g,J),V||I||(V=!0,ce||(ce=!0,q()))),J},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(J){var ae=T;return function(){var ge=T;T=ae;try{return J.apply(this,arguments)}finally{T=ge}}}})(Kh)),Kh}var E_;function II(){return E_||(E_=1,Yh.exports=wI()),Yh.exports}var Jh={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function bI(){if(T_)return tn;T_=1;var t=Kp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(g,p,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:g,containerInfo:p,implementation:_}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,tn.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,_)},tn.flushSync=function(g){var p=u.T,_=o.p;try{if(u.T=null,o.p=2,g)return g()}finally{u.T=p,o.p=_,o.d.f()}},tn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(g,p))},tn.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},tn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,E=d(_,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?o.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:I}):_==="script"&&o.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);o.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(g)},tn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,E=d(_,p.crossOrigin);o.d.L(g,_,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=d(p.as,p.crossOrigin);o.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(g)},tn.requestFormReset=function(g){o.d.r(g)},tn.unstable_batchedUpdates=function(g,p){return g(p)},tn.useFormState=function(g,p,_){return u.H.useFormState(g,p,_)},tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},tn.version="19.2.3",tn}var S_;function RI(){if(S_)return Jh.exports;S_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jh.exports=bI(),Jh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function xI(){if(A_)return Il;A_=1;var t=II(),e=Kp(),n=RI();function o(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(o(188))}function p(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(o(188));return r!==i?null:i}for(var a=i,c=r;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),i;if(v===c)return g(y),r;v=v.sibling}throw Error(o(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,b=y.child;b;){if(b===a){A=!0,a=y,c=v;break}if(b===c){A=!0,c=y,a=v;break}b=b.sibling}if(!A){for(b=v.child;b;){if(b===a){A=!0,a=v,c=y;break}if(b===c){A=!0,c=v,a=y;break}b=b.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:r}function _(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=_(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),W=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function Pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case G:return"Profiler";case P:return"StrictMode";case ee:return"Suspense";case ce:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case V:return"Portal";case W:return i.displayName||"Context";case Z:return(i._context.displayName||"Context")+".Consumer";case se:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return r=i.displayName||null,r!==null?r:Pe(i.type)||"Memo";case M:r=i._payload,i=i._init;try{return Pe(i(r))}catch{}}return null}var rt=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Ve=[],$e=-1;function F(i){return{current:i}}function ne(i){0>$e||(i.current=Ve[$e],Ve[$e]=null,$e--)}function ue(i,r){$e++,Ve[$e]=i.current,i.current=r}var he=F(null),Ae=F(null),we=F(null),ke=F(null);function gt(i,r){switch(ue(we,r),ue(Ae,i),ue(he,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Ov(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Ov(r),i=Bv(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(he),ue(he,i)}function at(){ne(he),ne(Ae),ne(we)}function gi(i){i.memoizedState!==null&&ue(ke,i);var r=he.current,a=Bv(r,i.type);r!==a&&(ue(Ae,i),ue(he,a))}function Yi(i){Ae.current===i&&(ne(he),ne(Ae)),ke.current===i&&(ne(ke),Tl._currentValue=ge)}var Ki,Eo;function Sn(i){if(Ki===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ki=r&&r[1]||"",Eo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ki+i+Eo}var To=!1;function yi(i,r){if(!i||To)return"";To=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var $=X}Reflect.construct(i,[],ie)}else{try{ie.call()}catch(X){$=X}i.call(ie.prototype)}}else{try{throw Error()}catch(X){$=X}(ie=i())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],b=v[1];if(A&&b){var U=A.split(`
`),K=b.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===K.length)for(c=U.length-1,y=K.length-1;1<=c&&0<=y&&U[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==K[y]){var j=`
`+U[c].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=c&&0<=y);break}}}finally{To=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Sn(a):""}function _e(i,r){switch(i.tag){case 26:case 27:case 5:return Sn(i.type);case 16:return Sn("Lazy");case 13:return i.child!==r&&r!==null?Sn("Suspense Fallback"):Sn("Suspense");case 19:return Sn("SuspenseList");case 0:case 15:return yi(i.type,!1);case 11:return yi(i.type.render,!1);case 1:return yi(i.type,!0);case 31:return Sn("Activity");default:return""}}function kn(i){try{var r="",a=null;do r+=_e(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ut=Object.prototype.hasOwnProperty,Ut=t.unstable_scheduleCallback,So=t.unstable_cancelCallback,Hf=t.unstable_shouldYield,ou=t.unstable_requestPaint,an=t.unstable_now,_r=t.unstable_getCurrentPriorityLevel,Ca=t.unstable_ImmediatePriority,wa=t.unstable_UserBlockingPriority,Ao=t.unstable_NormalPriority,Yf=t.unstable_LowPriority,ru=t.unstable_IdlePriority,su=t.log,au=t.unstable_setDisableYieldValue,Wn=null,Kt=null;function Un(i){if(typeof su=="function"&&au(i),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Wn,i)}catch{}}var _t=Math.clz32?Math.clz32:uu,lu=Math.log,ls=Math.LN2;function uu(i){return i>>>=0,i===0?32:31-(lu(i)/ls|0)|0}var vi=256,Er=262144,Ct=4194304;function _i(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ei(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,v=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var b=c&134217727;return b!==0?(c=b&~v,c!==0?y=_i(c):(A&=b,A!==0?y=_i(A):a||(a=b&~i,a!==0&&(y=_i(a))))):(b=c&~v,b!==0?y=_i(b):A!==0?y=_i(A):a||(a=c&~i,a!==0&&(y=_i(a)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,a=r&-r,v>=a||v===32&&(a&4194048)!==0)?r:y}function jn(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Kf(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cu(){var i=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),i}function Ti(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Tr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Jf(i,r,a,c,y,v){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var b=i.entanglements,U=i.expirationTimes,K=i.hiddenUpdates;for(a=A&~a;0<a;){var j=31-_t(a),ie=1<<j;b[j]=0,U[j]=-1;var $=K[j];if($!==null)for(K[j]=null,j=0;j<$.length;j++){var X=$[j];X!==null&&(X.lane&=-536870913)}a&=~ie}c!==0&&Sr(i,c,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~r))}function Sr(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-_t(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function Ia(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-_t(a),y=1<<c;y&r|i[c]&r&&(i[c]|=r),a&=~y}}function ba(i,r){var a=r&-r;return a=(a&42)!==0?1:Ar(a),(a&(i.suspendedLanes|r))!==0?0:a}function Ar(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ji(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function fu(){var i=ae.p;return i!==0?i:(i=window.event,i===void 0?32:l_(i.type))}function ei(i,r){var a=ae.p;try{return ae.p=i,r()}finally{ae.p=a}}var ti=Math.random().toString(36).slice(2),wt="__reactFiber$"+ti,qt="__reactProps$"+ti,Si="__reactContainer$"+ti,us="__reactEvents$"+ti,$f="__reactListeners$"+ti,du="__reactHandles$"+ti,hu="__reactResources$"+ti,Ai="__reactMarker$"+ti;function cs(i){delete i[wt],delete i[qt],delete i[us],delete i[$f],delete i[du]}function Ci(i){var r=i[wt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[Si]||a[wt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=Kv(i);i!==null;){if(a=i[wt])return a;i=Kv(i)}return r}i=a,a=i.parentNode}return null}function Ln(i){if(i=i[wt]||i[Si]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function An(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(o(33))}function wi(i){var r=i[hu];return r||(r=i[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function It(i){i[Ai]=!0}var Ra=new Set,xa={};function Ii(i,r){bi(i,r),bi(i+"Capture",r)}function bi(i,r){for(xa[i]=r,i=0;i<r.length;i++)Ra.add(r[i])}var Na=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ma={},Da={};function pu(i){return ut.call(Da,i)?!0:ut.call(Ma,i)?!1:Na.test(i)?Da[i]=!0:(Ma[i]=!0,!1)}function fs(i,r,a){if(pu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Cn(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function bt(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function zt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Co(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Va(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function We(i){if(!i._valueTracker){var r=Co(i)?"checked":"value";i._valueTracker=Va(i,r,""+i[r])}}function Cr(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=Co(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function Ri(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var wr=/[\n"\\]/g;function hn(i){return i.replace(wr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ds(i,r,a,c,y,v,A,b){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),r!=null?A==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+zt(r)):i.value!==""+zt(r)&&(i.value=""+zt(r)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),r!=null?Pa(i,A,zt(r)):a!=null?Pa(i,A,zt(a)):c!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+zt(b):i.removeAttribute("name")}function mu(i,r,a,c,y,v,A,b){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){We(i);return}a=a!=null?""+zt(a):"",r=r!=null?""+zt(r):a,b||r===i.value||(i.value=r),i.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=b?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),We(i)}function Pa(i,r,a){r==="number"&&Ri(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function wo(i,r,a,c){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+zt(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function gu(i,r,a){if(r!=null&&(r=""+zt(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+zt(a):""}function Io(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(o(92));if(rt(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=zt(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),We(i)}function pn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ka(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||yu.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function Ua(i,r,a){if(r!=null&&typeof r!="object")throw Error(o(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&ka(i,y,c)}else for(var v in r)r.hasOwnProperty(v)&&ka(i,v,r[v])}function hs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ps(i){return bo.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ni(){}var La=null;function On(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ro=null,xi=null;function Ir(i){var r=Ln(i);if(r&&(i=r.stateNode)){var a=i[qt]||null;e:switch(i=r.stateNode,r.type){case"input":if(ds(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var y=c[qt]||null;if(!y)throw Error(o(90));ds(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&Cr(c)}break e;case"textarea":gu(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&wo(i,!!a.multiple,r,!1)}}}var ms=!1;function xo(i,r,a){if(ms)return i(r,a);ms=!0;try{var c=i(r);return c}finally{if(ms=!1,(Ro!==null||xi!==null)&&(fc(),Ro&&(r=Ro,i=xi,xi=Ro=null,Ir(r),i)))for(r=0;r<i.length;r++)Ir(i[r])}}function ii(i,r){var a=i.stateNode;if(a===null)return null;var c=a[qt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,r,typeof a));return a}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),br=!1;if(Bn)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){br=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{br=!1}var Ni=null,Oa=null,Rr=null;function Ba(){if(Rr)return Rr;var i,r=Oa,a=r.length,c,y="value"in Ni?Ni.value:Ni.textContent,v=y.length;for(i=0;i<a&&r[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&r[a-c]===y[v-c];c++);return Rr=y.slice(i,1<c?1-c:void 0)}function xr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function $i(){return!0}function oi(){return!1}function Jt(i){function r(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(a=i[b],this[b]=a?a(v):v[b]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?$i:oi,this.isPropagationStopped=oi,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),r}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=Jt(Qi),No=E({},Qi,{view:0,detail:0}),Fa=Jt(No),Mo,gs,Di,ys=E({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Do,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Di&&(Di&&i.type==="mousemove"?(Mo=i.screenX-Di.screenX,gs=i.screenY-Di.screenY):gs=Mo=0,Di=i),Mo)},movementY:function(i){return"movementY"in i?i.movementY:gs}}),qa=Jt(ys),Nr=E({},ys,{dataTransfer:0}),_u=Jt(Nr),Eu=E({},No,{relatedTarget:0}),Mr=Jt(Eu),za=E({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Tu=Jt(za),vs=E({},Qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Su=Jt(vs),Au=E({},Qi,{data:0}),Vi=Jt(Au),Cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Iu[i])?!!r[i]:!1}function Do(){return bu}var ln=E({},No,{key:function(i){if(i.key){var r=Cu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=xr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?wu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Do,charCode:function(i){return i.type==="keypress"?xr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ru=Jt(ln),xu=E({},ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xi=Jt(xu),m=E({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Do}),S=Jt(m),C=E({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Jt(C),H=E({},ys,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Jt(H),le=E({},Qi,{newState:0,oldState:0}),Ne=Jt(le),Et=[9,13,27,32],Qe=Bn&&"CompositionEvent"in window,ht=null;Bn&&"documentMode"in document&&(ht=document.documentMode);var Fn=Bn&&"TextEvent"in window&&!ht,Pi=Bn&&(!Qe||ht&&8<ht&&11>=ht),ri=" ",si=!1;function Dr(i,r){switch(i){case"keyup":return Et.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _s(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Es=!1;function KC(i,r){switch(i){case"compositionend":return _s(r);case"keypress":return r.which!==32?null:(si=!0,ri);case"textInput":return i=r.data,i===ri&&si?null:i;default:return null}}function JC(i,r){if(Es)return i==="compositionend"||!Qe&&Dr(i,r)?(i=Ba(),Rr=Oa=Ni=null,Es=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pi&&r.locale!=="ko"?null:r.data;default:return null}}var $C={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qm(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!$C[i.type]:r==="textarea"}function Xm(i,r,a,c){Ro?xi?xi.push(c):xi=[c]:Ro=c,r=vc(r,"onChange"),0<r.length&&(a=new Mi("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var Ga=null,Ha=null;function QC(i){Dv(i,0)}function Nu(i){var r=An(i);if(Cr(r))return i}function Zm(i,r){if(i==="change")return r}var Wm=!1;if(Bn){var Qf;if(Bn){var Xf="oninput"in document;if(!Xf){var jm=document.createElement("div");jm.setAttribute("oninput","return;"),Xf=typeof jm.oninput=="function"}Qf=Xf}else Qf=!1;Wm=Qf&&(!document.documentMode||9<document.documentMode)}function eg(){Ga&&(Ga.detachEvent("onpropertychange",tg),Ha=Ga=null)}function tg(i){if(i.propertyName==="value"&&Nu(Ha)){var r=[];Xm(r,Ha,i,On(i)),xo(QC,r)}}function XC(i,r,a){i==="focusin"?(eg(),Ga=r,Ha=a,Ga.attachEvent("onpropertychange",tg)):i==="focusout"&&eg()}function ZC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Nu(Ha)}function WC(i,r){if(i==="click")return Nu(r)}function jC(i,r){if(i==="input"||i==="change")return Nu(r)}function ew(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var wn=typeof Object.is=="function"?Object.is:ew;function Ya(i,r){if(wn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!ut.call(r,y)||!wn(i[y],r[y]))return!1}return!0}function ng(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ig(i,r){var a=ng(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ng(a)}}function og(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?og(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function rg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Ri(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Ri(i.document)}return r}function Zf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var tw=Bn&&"documentMode"in document&&11>=document.documentMode,Ts=null,Wf=null,Ka=null,jf=!1;function sg(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jf||Ts==null||Ts!==Ri(c)||(c=Ts,"selectionStart"in c&&Zf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ka&&Ya(Ka,c)||(Ka=c,c=vc(Wf,"onSelect"),0<c.length&&(r=new Mi("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=Ts)))}function Vr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Ss={animationend:Vr("Animation","AnimationEnd"),animationiteration:Vr("Animation","AnimationIteration"),animationstart:Vr("Animation","AnimationStart"),transitionrun:Vr("Transition","TransitionRun"),transitionstart:Vr("Transition","TransitionStart"),transitioncancel:Vr("Transition","TransitionCancel"),transitionend:Vr("Transition","TransitionEnd")},ed={},ag={};Bn&&(ag=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function Pr(i){if(ed[i])return ed[i];if(!Ss[i])return i;var r=Ss[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in ag)return ed[i]=r[a];return i}var lg=Pr("animationend"),ug=Pr("animationiteration"),cg=Pr("animationstart"),nw=Pr("transitionrun"),iw=Pr("transitionstart"),ow=Pr("transitioncancel"),fg=Pr("transitionend"),dg=new Map,td="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");td.push("scrollEnd");function ai(i,r){dg.set(i,r),Ii(r,[i])}var Mu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},qn=[],As=0,nd=0;function Du(){for(var i=As,r=nd=As=0;r<i;){var a=qn[r];qn[r++]=null;var c=qn[r];qn[r++]=null;var y=qn[r];qn[r++]=null;var v=qn[r];if(qn[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&hg(a,y,v)}}function Vu(i,r,a,c){qn[As++]=i,qn[As++]=r,qn[As++]=a,qn[As++]=c,nd|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function id(i,r,a,c){return Vu(i,r,a,c),Pu(i)}function kr(i,r){return Vu(i,null,null,r),Pu(i)}function hg(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&r!==null&&(y=31-_t(a),i=v.hiddenUpdates,c=i[y],c===null?i[y]=[r]:c.push(r),r.lane=a|536870912),v):null}function Pu(i){if(50<pl)throw pl=0,dh=null,Error(o(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Cs={};function rw(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(i,r,a,c){return new rw(i,r,a,c)}function od(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zi(i,r){var a=i.alternate;return a===null?(a=In(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function pg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ku(i,r,a,c,y,v){var A=0;if(c=i,typeof i=="function")od(i)&&(A=1);else if(typeof i=="string")A=cI(i,a,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=In(31,a,r,y),i.elementType=x,i.lanes=v,i;case O:return Ur(a.children,y,v,r);case P:A=8,y|=24;break;case G:return i=In(12,a,r,y|2),i.elementType=G,i.lanes=v,i;case ee:return i=In(13,a,r,y),i.elementType=ee,i.lanes=v,i;case ce:return i=In(19,a,r,y),i.elementType=ce,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case W:A=10;break e;case Z:A=9;break e;case se:A=11;break e;case N:A=14;break e;case M:A=16,c=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),c=null}return r=In(A,a,r,y),r.elementType=i,r.type=c,r.lanes=v,r}function Ur(i,r,a,c){return i=In(7,i,c,r),i.lanes=a,i}function rd(i,r,a){return i=In(6,i,null,r),i.lanes=a,i}function mg(i){var r=In(18,null,null,0);return r.stateNode=i,r}function sd(i,r,a){return r=In(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var gg=new WeakMap;function zn(i,r){if(typeof i=="object"&&i!==null){var a=gg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:kn(r)},gg.set(i,r),r)}return{value:i,source:r,stack:kn(r)}}var ws=[],Is=0,Uu=null,Ja=0,Gn=[],Hn=0,Vo=null,ki=1,Ui="";function Wi(i,r){ws[Is++]=Ja,ws[Is++]=Uu,Uu=i,Ja=r}function yg(i,r,a){Gn[Hn++]=ki,Gn[Hn++]=Ui,Gn[Hn++]=Vo,Vo=i;var c=ki;i=Ui;var y=32-_t(c)-1;c&=~(1<<y),a+=1;var v=32-_t(r)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,ki=1<<32-_t(r)+y|a<<y|c,Ui=v+i}else ki=1<<v|a<<y|c,Ui=i}function ad(i){i.return!==null&&(Wi(i,1),yg(i,1,0))}function ld(i){for(;i===Uu;)Uu=ws[--Is],ws[Is]=null,Ja=ws[--Is],ws[Is]=null;for(;i===Vo;)Vo=Gn[--Hn],Gn[Hn]=null,Ui=Gn[--Hn],Gn[Hn]=null,ki=Gn[--Hn],Gn[Hn]=null}function vg(i,r){Gn[Hn++]=ki,Gn[Hn++]=Ui,Gn[Hn++]=Vo,ki=r.id,Ui=r.overflow,Vo=i}var $t=null,ct=null,ze=!1,Po=null,Yn=!1,ud=Error(o(519));function ko(i){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $a(zn(r,i)),ud}function _g(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[wt]=i,r[qt]=c,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<gl.length;a++)Le(gl[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),mu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Io(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||Uv(r.textContent,a)?(c.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),c.onScroll!=null&&Le("scroll",r),c.onScrollEnd!=null&&Le("scrollend",r),c.onClick!=null&&(r.onclick=ni),r=!0):r=!1,r||ko(i,!0)}function Eg(i){for($t=i.return;$t;)switch($t.tag){case 5:case 31:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:$t=$t.return}}function bs(i){if(i!==$t)return!1;if(!ze)return Eg(i),ze=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||bh(i.type,i.memoizedProps)),a=!a),a&&ct&&ko(i),Eg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));ct=Yv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));ct=Yv(i)}else r===27?(r=ct,Qo(i.type)?(i=Dh,Dh=null,ct=i):ct=r):ct=$t?Jn(i.stateNode.nextSibling):null;return!0}function Lr(){ct=$t=null,ze=!1}function cd(){var i=Po;return i!==null&&(vn===null?vn=i:vn.push.apply(vn,i),Po=null),i}function $a(i){Po===null?Po=[i]:Po.push(i)}var fd=F(null),Or=null,ji=null;function Uo(i,r,a){ue(fd,r._currentValue),r._currentValue=a}function eo(i){i._currentValue=fd.current,ne(fd)}function dd(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function hd(i,r,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var b=v;v=y;for(var U=0;U<r.length;U++)if(b.context===r[U]){v.lanes|=a,b=v.alternate,b!==null&&(b.lanes|=a),dd(v.return,a,i),c||(A=null);break e}v=b.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(o(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),dd(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Rs(i,r,a,c){i=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var b=y.type;wn(y.pendingProps.value,A.value)||(i!==null?i.push(b):i=[b])}}else if(y===ke.current){if(A=y.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Tl):i=[Tl])}y=y.return}i!==null&&hd(r,i,a,c),r.flags|=262144}function Lu(i){for(i=i.firstContext;i!==null;){if(!wn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Br(i){Or=i,ji=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qt(i){return Tg(Or,i)}function Ou(i,r){return Or===null&&Br(i),Tg(i,r)}function Tg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ji===null){if(i===null)throw Error(o(308));ji=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ji=ji.next=r;return a}var sw=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},aw=t.unstable_scheduleCallback,lw=t.unstable_NormalPriority,Rt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pd(){return{controller:new sw,data:new Map,refCount:0}}function Qa(i){i.refCount--,i.refCount===0&&aw(lw,function(){i.controller.abort()})}var Xa=null,md=0,xs=0,Ns=null;function uw(i,r){if(Xa===null){var a=Xa=[];md=0,xs=vh(),Ns={status:"pending",value:void 0,then:function(c){a.push(c)}}}return md++,r.then(Sg,Sg),r}function Sg(){if(--md===0&&Xa!==null){Ns!==null&&(Ns.status="fulfilled");var i=Xa;Xa=null,xs=0,Ns=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function cw(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Ag=J.S;J.S=function(i,r){sv=an(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&uw(i,r),Ag!==null&&Ag(i,r)};var Fr=F(null);function gd(){var i=Fr.current;return i!==null?i:st.pooledCache}function Bu(i,r){r===null?ue(Fr,Fr.current):ue(Fr,r.pool)}function Cg(){var i=gd();return i===null?null:{parent:Rt._currentValue,pool:i}}var Ms=Error(o(460)),yd=Error(o(474)),Fu=Error(o(542)),qu={then:function(){}};function wg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ig(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(ni,ni),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Rg(i),i;default:if(typeof r.status=="string")r.then(ni,ni);else{if(i=st,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Rg(i),i}throw zr=r,Ms}}function qr(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zr=a,Ms):a}}var zr=null;function bg(){if(zr===null)throw Error(o(459));var i=zr;return zr=null,i}function Rg(i){if(i===Ms||i===Fu)throw Error(o(483))}var Ds=null,Za=0;function zu(i){var r=Za;return Za+=1,Ds===null&&(Ds=[]),Ig(Ds,i,r)}function Wa(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Gu(i,r){throw r.$$typeof===T?Error(o(525)):(i=Object.prototype.toString.call(r),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function xg(i){function r(z,B){if(i){var Y=z.deletions;Y===null?(z.deletions=[B],z.flags|=16):Y.push(B)}}function a(z,B){if(!i)return null;for(;B!==null;)r(z,B),B=B.sibling;return null}function c(z){for(var B=new Map;z!==null;)z.key!==null?B.set(z.key,z):B.set(z.index,z),z=z.sibling;return B}function y(z,B){return z=Zi(z,B),z.index=0,z.sibling=null,z}function v(z,B,Y){return z.index=Y,i?(Y=z.alternate,Y!==null?(Y=Y.index,Y<B?(z.flags|=67108866,B):Y):(z.flags|=67108866,B)):(z.flags|=1048576,B)}function A(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function b(z,B,Y,te){return B===null||B.tag!==6?(B=rd(Y,z.mode,te),B.return=z,B):(B=y(B,Y),B.return=z,B)}function U(z,B,Y,te){var Ee=Y.type;return Ee===O?j(z,B,Y.props.children,te,Y.key):B!==null&&(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&qr(Ee)===B.type)?(B=y(B,Y.props),Wa(B,Y),B.return=z,B):(B=ku(Y.type,Y.key,Y.props,null,z.mode,te),Wa(B,Y),B.return=z,B)}function K(z,B,Y,te){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=sd(Y,z.mode,te),B.return=z,B):(B=y(B,Y.children||[]),B.return=z,B)}function j(z,B,Y,te,Ee){return B===null||B.tag!==7?(B=Ur(Y,z.mode,te,Ee),B.return=z,B):(B=y(B,Y),B.return=z,B)}function ie(z,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=rd(""+B,z.mode,Y),B.return=z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return Y=ku(B.type,B.key,B.props,null,z.mode,Y),Wa(Y,B),Y.return=z,Y;case V:return B=sd(B,z.mode,Y),B.return=z,B;case M:return B=qr(B),ie(z,B,Y)}if(rt(B)||q(B))return B=Ur(B,z.mode,Y,null),B.return=z,B;if(typeof B.then=="function")return ie(z,zu(B),Y);if(B.$$typeof===W)return ie(z,Ou(z,B),Y);Gu(z,B)}return null}function $(z,B,Y,te){var Ee=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ee!==null?null:b(z,B,""+Y,te);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:return Y.key===Ee?U(z,B,Y,te):null;case V:return Y.key===Ee?K(z,B,Y,te):null;case M:return Y=qr(Y),$(z,B,Y,te)}if(rt(Y)||q(Y))return Ee!==null?null:j(z,B,Y,te,null);if(typeof Y.then=="function")return $(z,B,zu(Y),te);if(Y.$$typeof===W)return $(z,B,Ou(z,Y),te);Gu(z,Y)}return null}function X(z,B,Y,te,Ee){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return z=z.get(Y)||null,b(B,z,""+te,Ee);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case I:return z=z.get(te.key===null?Y:te.key)||null,U(B,z,te,Ee);case V:return z=z.get(te.key===null?Y:te.key)||null,K(B,z,te,Ee);case M:return te=qr(te),X(z,B,Y,te,Ee)}if(rt(te)||q(te))return z=z.get(Y)||null,j(B,z,te,Ee,null);if(typeof te.then=="function")return X(z,B,Y,zu(te),Ee);if(te.$$typeof===W)return X(z,B,Y,Ou(B,te),Ee);Gu(B,te)}return null}function me(z,B,Y,te){for(var Ee=null,Ye=null,ye=B,De=B=0,Be=null;ye!==null&&De<Y.length;De++){ye.index>De?(Be=ye,ye=null):Be=ye.sibling;var Ke=$(z,ye,Y[De],te);if(Ke===null){ye===null&&(ye=Be);break}i&&ye&&Ke.alternate===null&&r(z,ye),B=v(Ke,B,De),Ye===null?Ee=Ke:Ye.sibling=Ke,Ye=Ke,ye=Be}if(De===Y.length)return a(z,ye),ze&&Wi(z,De),Ee;if(ye===null){for(;De<Y.length;De++)ye=ie(z,Y[De],te),ye!==null&&(B=v(ye,B,De),Ye===null?Ee=ye:Ye.sibling=ye,Ye=ye);return ze&&Wi(z,De),Ee}for(ye=c(ye);De<Y.length;De++)Be=X(ye,z,De,Y[De],te),Be!==null&&(i&&Be.alternate!==null&&ye.delete(Be.key===null?De:Be.key),B=v(Be,B,De),Ye===null?Ee=Be:Ye.sibling=Be,Ye=Be);return i&&ye.forEach(function(er){return r(z,er)}),ze&&Wi(z,De),Ee}function Se(z,B,Y,te){if(Y==null)throw Error(o(151));for(var Ee=null,Ye=null,ye=B,De=B=0,Be=null,Ke=Y.next();ye!==null&&!Ke.done;De++,Ke=Y.next()){ye.index>De?(Be=ye,ye=null):Be=ye.sibling;var er=$(z,ye,Ke.value,te);if(er===null){ye===null&&(ye=Be);break}i&&ye&&er.alternate===null&&r(z,ye),B=v(er,B,De),Ye===null?Ee=er:Ye.sibling=er,Ye=er,ye=Be}if(Ke.done)return a(z,ye),ze&&Wi(z,De),Ee;if(ye===null){for(;!Ke.done;De++,Ke=Y.next())Ke=ie(z,Ke.value,te),Ke!==null&&(B=v(Ke,B,De),Ye===null?Ee=Ke:Ye.sibling=Ke,Ye=Ke);return ze&&Wi(z,De),Ee}for(ye=c(ye);!Ke.done;De++,Ke=Y.next())Ke=X(ye,z,De,Ke.value,te),Ke!==null&&(i&&Ke.alternate!==null&&ye.delete(Ke.key===null?De:Ke.key),B=v(Ke,B,De),Ye===null?Ee=Ke:Ye.sibling=Ke,Ye=Ke);return i&&ye.forEach(function(TI){return r(z,TI)}),ze&&Wi(z,De),Ee}function ot(z,B,Y,te){if(typeof Y=="object"&&Y!==null&&Y.type===O&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:e:{for(var Ee=Y.key;B!==null;){if(B.key===Ee){if(Ee=Y.type,Ee===O){if(B.tag===7){a(z,B.sibling),te=y(B,Y.props.children),te.return=z,z=te;break e}}else if(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&qr(Ee)===B.type){a(z,B.sibling),te=y(B,Y.props),Wa(te,Y),te.return=z,z=te;break e}a(z,B);break}else r(z,B);B=B.sibling}Y.type===O?(te=Ur(Y.props.children,z.mode,te,Y.key),te.return=z,z=te):(te=ku(Y.type,Y.key,Y.props,null,z.mode,te),Wa(te,Y),te.return=z,z=te)}return A(z);case V:e:{for(Ee=Y.key;B!==null;){if(B.key===Ee)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){a(z,B.sibling),te=y(B,Y.children||[]),te.return=z,z=te;break e}else{a(z,B);break}else r(z,B);B=B.sibling}te=sd(Y,z.mode,te),te.return=z,z=te}return A(z);case M:return Y=qr(Y),ot(z,B,Y,te)}if(rt(Y))return me(z,B,Y,te);if(q(Y)){if(Ee=q(Y),typeof Ee!="function")throw Error(o(150));return Y=Ee.call(Y),Se(z,B,Y,te)}if(typeof Y.then=="function")return ot(z,B,zu(Y),te);if(Y.$$typeof===W)return ot(z,B,Ou(z,Y),te);Gu(z,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(a(z,B.sibling),te=y(B,Y),te.return=z,z=te):(a(z,B),te=rd(Y,z.mode,te),te.return=z,z=te),A(z)):a(z,B)}return function(z,B,Y,te){try{Za=0;var Ee=ot(z,B,Y,te);return Ds=null,Ee}catch(ye){if(ye===Ms||ye===Fu)throw ye;var Ye=In(29,ye,null,z.mode);return Ye.lanes=te,Ye.return=z,Ye}finally{}}}var Gr=xg(!0),Ng=xg(!1),Lo=!1;function vd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _d(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Oo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Bo(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Pu(i),hg(i,null,a),r}return Vu(i,c,r,a),Pu(i)}function ja(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Ia(i,a)}}function Ed(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=r:v=v.next=r}else y=v=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Td=!1;function el(){if(Td){var i=Ns;if(i!==null)throw i}}function tl(i,r,a,c){Td=!1;var y=i.updateQueue;Lo=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,b=y.shared.pending;if(b!==null){y.shared.pending=null;var U=b,K=U.next;U.next=null,A===null?v=K:A.next=K,A=U;var j=i.alternate;j!==null&&(j=j.updateQueue,b=j.lastBaseUpdate,b!==A&&(b===null?j.firstBaseUpdate=K:b.next=K,j.lastBaseUpdate=U))}if(v!==null){var ie=y.baseState;A=0,j=K=U=null,b=v;do{var $=b.lane&-536870913,X=$!==b.lane;if(X?(Oe&$)===$:(c&$)===$){$!==0&&$===xs&&(Td=!0),j!==null&&(j=j.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var me=i,Se=b;$=r;var ot=a;switch(Se.tag){case 1:if(me=Se.payload,typeof me=="function"){ie=me.call(ot,ie,$);break e}ie=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Se.payload,$=typeof me=="function"?me.call(ot,ie,$):me,$==null)break e;ie=E({},ie,$);break e;case 2:Lo=!0}}$=b.callback,$!==null&&(i.flags|=64,X&&(i.flags|=8192),X=y.callbacks,X===null?y.callbacks=[$]:X.push($))}else X={lane:$,tag:b.tag,payload:b.payload,callback:b.callback,next:null},j===null?(K=j=X,U=ie):j=j.next=X,A|=$;if(b=b.next,b===null){if(b=y.shared.pending,b===null)break;X=b,b=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);j===null&&(U=ie),y.baseState=U,y.firstBaseUpdate=K,y.lastBaseUpdate=j,v===null&&(y.shared.lanes=0),Ho|=A,i.lanes=A,i.memoizedState=ie}}function Mg(i,r){if(typeof i!="function")throw Error(o(191,i));i.call(r)}function Dg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Mg(a[i],r)}var Vs=F(null),Hu=F(0);function Vg(i,r){i=uo,ue(Hu,i),ue(Vs,r),uo=i|r.baseLanes}function Sd(){ue(Hu,uo),ue(Vs,Vs.current)}function Ad(){uo=Hu.current,ne(Vs),ne(Hu)}var bn=F(null),Kn=null;function Fo(i){var r=i.alternate;ue(Tt,Tt.current&1),ue(bn,i),Kn===null&&(r===null||Vs.current!==null||r.memoizedState!==null)&&(Kn=i)}function Cd(i){ue(Tt,Tt.current),ue(bn,i),Kn===null&&(Kn=i)}function Pg(i){i.tag===22?(ue(Tt,Tt.current),ue(bn,i),Kn===null&&(Kn=i)):qo()}function qo(){ue(Tt,Tt.current),ue(bn,bn.current)}function Rn(i){ne(bn),Kn===i&&(Kn=null),ne(Tt)}var Tt=F(0);function Yu(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Nh(a)||Mh(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var to=0,Me=null,nt=null,xt=null,Ku=!1,Ps=!1,Hr=!1,Ju=0,nl=0,ks=null,fw=0;function yt(){throw Error(o(321))}function wd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!wn(i[a],r[a]))return!1;return!0}function Id(i,r,a,c,y,v){return to=v,Me=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=i===null||i.memoizedState===null?yy:qd,Hr=!1,v=a(c,y),Hr=!1,Ps&&(v=Ug(r,a,c,y)),kg(i),v}function kg(i){J.H=rl;var r=nt!==null&&nt.next!==null;if(to=0,xt=nt=Me=null,Ku=!1,nl=0,ks=null,r)throw Error(o(300));i===null||Nt||(i=i.dependencies,i!==null&&Lu(i)&&(Nt=!0))}function Ug(i,r,a,c){Me=i;var y=0;do{if(Ps&&(ks=null),nl=0,Ps=!1,25<=y)throw Error(o(301));if(y+=1,xt=nt=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}J.H=vy,v=r(a,c)}while(Ps);return v}function dw(){var i=J.H,r=i.useState()[0];return r=typeof r.then=="function"?il(r):r,i=i.useState()[0],(nt!==null?nt.memoizedState:null)!==i&&(Me.flags|=1024),r}function bd(){var i=Ju!==0;return Ju=0,i}function Rd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function xd(i){if(Ku){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ku=!1}to=0,xt=nt=Me=null,Ps=!1,nl=Ju=0,ks=null}function un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Me.memoizedState=xt=i:xt=xt.next=i,xt}function St(){if(nt===null){var i=Me.alternate;i=i!==null?i.memoizedState:null}else i=nt.next;var r=xt===null?Me.memoizedState:xt.next;if(r!==null)xt=r,nt=i;else{if(i===null)throw Me.alternate===null?Error(o(467)):Error(o(310));nt=i,i={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},xt===null?Me.memoizedState=xt=i:xt=xt.next=i}return xt}function $u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function il(i){var r=nl;return nl+=1,ks===null&&(ks=[]),i=Ig(ks,i,r),r=Me,(xt===null?r.memoizedState:xt.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?yy:qd),i}function Qu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return il(i);if(i.$$typeof===W)return Qt(i)}throw Error(o(438,String(i)))}function Nd(i){var r=null,a=Me.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Me.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=$u(),Me.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=L;return r.index++,a}function no(i,r){return typeof r=="function"?r(i):r}function Xu(i){var r=St();return Md(r,nt,i)}function Md(i,r,a){var c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var y=i.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}r.baseQueue=y=v,c.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{r=y.next;var b=A=null,U=null,K=r,j=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(Oe&ie)===ie:(to&ie)===ie){var $=K.revertLane;if($===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===xs&&(j=!0);else if((to&$)===$){K=K.next,$===xs&&(j=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},U===null?(b=U=ie,A=v):U=U.next=ie,Me.lanes|=$,Ho|=$;ie=K.action,Hr&&a(v,ie),v=K.hasEagerState?K.eagerState:a(v,ie)}else $={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},U===null?(b=U=$,A=v):U=U.next=$,Me.lanes|=ie,Ho|=ie;K=K.next}while(K!==null&&K!==r);if(U===null?A=v:U.next=b,!wn(v,i.memoizedState)&&(Nt=!0,j&&(a=Ns,a!==null)))throw a;i.memoizedState=v,i.baseState=A,i.baseQueue=U,c.lastRenderedState=v}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Dd(i){var r=St(),a=r.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,v=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=i(v,A.action),A=A.next;while(A!==y);wn(v,r.memoizedState)||(Nt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),a.lastRenderedState=v}return[v,c]}function Lg(i,r,a){var c=Me,y=St(),v=ze;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=r();var A=!wn((nt||y).memoizedState,a);if(A&&(y.memoizedState=a,Nt=!0),y=y.queue,kd(Fg.bind(null,c,y,i),[i]),y.getSnapshot!==r||A||xt!==null&&xt.memoizedState.tag&1){if(c.flags|=2048,Us(9,{destroy:void 0},Bg.bind(null,c,y,a,r),null),st===null)throw Error(o(349));v||(to&127)!==0||Og(c,r,a)}return a}function Og(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Me.updateQueue,r===null?(r=$u(),Me.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Bg(i,r,a,c){r.value=a,r.getSnapshot=c,qg(r)&&zg(i)}function Fg(i,r,a){return a(function(){qg(r)&&zg(i)})}function qg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!wn(i,a)}catch{return!0}}function zg(i){var r=kr(i,2);r!==null&&_n(r,i,2)}function Vd(i){var r=un();if(typeof i=="function"){var a=i;if(i=a(),Hr){Un(!0);try{a()}finally{Un(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:i},r}function Gg(i,r,a,c){return i.baseState=a,Md(i,nt,typeof c=="function"?c:no)}function hw(i,r,a,c,y){if(ju(i))throw Error(o(485));if(i=r.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};J.T!==null?a(!0):v.isTransition=!1,c(v),a=r.pending,a===null?(v.next=r.pending=v,Hg(r,v)):(v.next=a.next,r.pending=a.next=v)}}function Hg(i,r){var a=r.action,c=r.payload,y=i.state;if(r.isTransition){var v=J.T,A={};J.T=A;try{var b=a(y,c),U=J.S;U!==null&&U(A,b),Yg(i,r,b)}catch(K){Pd(i,r,K)}finally{v!==null&&A.types!==null&&(v.types=A.types),J.T=v}}else try{v=a(y,c),Yg(i,r,v)}catch(K){Pd(i,r,K)}}function Yg(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Kg(i,r,c)},function(c){return Pd(i,r,c)}):Kg(i,r,a)}function Kg(i,r,a){r.status="fulfilled",r.value=a,Jg(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Hg(i,a)))}function Pd(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,Jg(r),r=r.next;while(r!==c)}i.action=null}function Jg(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function $g(i,r){return r}function Qg(i,r){if(ze){var a=st.formState;if(a!==null){e:{var c=Me;if(ze){if(ct){t:{for(var y=ct,v=Yn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Jn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ct=Jn(y.nextSibling),c=y.data==="F!";break e}}ko(c)}c=!1}c&&(r=a[0])}}return a=un(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$g,lastRenderedState:r},a.queue=c,a=py.bind(null,Me,c),c.dispatch=a,c=Vd(!1),v=Fd.bind(null,Me,!1,c.queue),c=un(),y={state:r,dispatch:null,action:i,pending:null},c.queue=y,a=hw.bind(null,Me,y,v,a),y.dispatch=a,c.memoizedState=i,[r,a,!1]}function Xg(i){var r=St();return Zg(r,nt,i)}function Zg(i,r,a){if(r=Md(i,r,$g)[0],i=Xu(no)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=il(r)}catch(A){throw A===Ms?Fu:A}else c=r;r=St();var y=r.queue,v=y.dispatch;return a!==r.memoizedState&&(Me.flags|=2048,Us(9,{destroy:void 0},pw.bind(null,y,a),null)),[c,v,i]}function pw(i,r){i.action=r}function Wg(i){var r=St(),a=nt;if(a!==null)return Zg(r,a,i);St(),r=r.memoizedState,a=St();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function Us(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=Me.updateQueue,r===null&&(r=$u(),Me.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function jg(){return St().memoizedState}function Zu(i,r,a,c){var y=un();Me.flags|=i,y.memoizedState=Us(1|r,{destroy:void 0},a,c===void 0?null:c)}function Wu(i,r,a,c){var y=St();c=c===void 0?null:c;var v=y.memoizedState.inst;nt!==null&&c!==null&&wd(c,nt.memoizedState.deps)?y.memoizedState=Us(r,v,a,c):(Me.flags|=i,y.memoizedState=Us(1|r,v,a,c))}function ey(i,r){Zu(8390656,8,i,r)}function kd(i,r){Wu(2048,8,i,r)}function mw(i){Me.flags|=4;var r=Me.updateQueue;if(r===null)r=$u(),Me.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function ty(i){var r=St().memoizedState;return mw({ref:r,nextImpl:i}),function(){if((Xe&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function ny(i,r){return Wu(4,2,i,r)}function iy(i,r){return Wu(4,4,i,r)}function oy(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function ry(i,r,a){a=a!=null?a.concat([i]):null,Wu(4,4,oy.bind(null,r,i),a)}function Ud(){}function sy(i,r){var a=St();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&wd(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function ay(i,r){var a=St();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&wd(r,c[1]))return c[0];if(c=i(),Hr){Un(!0);try{i()}finally{Un(!1)}}return a.memoizedState=[c,r],c}function Ld(i,r,a){return a===void 0||(to&1073741824)!==0&&(Oe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=lv(),Me.lanes|=i,Ho|=i,a)}function ly(i,r,a,c){return wn(a,r)?a:Vs.current!==null?(i=Ld(i,a,c),wn(i,r)||(Nt=!0),i):(to&42)===0||(to&1073741824)!==0&&(Oe&261930)===0?(Nt=!0,i.memoizedState=a):(i=lv(),Me.lanes|=i,Ho|=i,r)}function uy(i,r,a,c,y){var v=ae.p;ae.p=v!==0&&8>v?v:8;var A=J.T,b={};J.T=b,Fd(i,!1,r,a);try{var U=y(),K=J.S;if(K!==null&&K(b,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var j=cw(U,c);ol(i,r,j,Mn(i))}else ol(i,r,c,Mn(i))}catch(ie){ol(i,r,{then:function(){},status:"rejected",reason:ie},Mn())}finally{ae.p=v,A!==null&&b.types!==null&&(A.types=b.types),J.T=A}}function gw(){}function Od(i,r,a,c){if(i.tag!==5)throw Error(o(476));var y=cy(i).queue;uy(i,y,r,ge,a===null?gw:function(){return fy(i),a(c)})}function cy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:ge},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function fy(i){var r=cy(i);r.next===null&&(r=i.alternate.memoizedState),ol(i,r.next.queue,{},Mn())}function Bd(){return Qt(Tl)}function dy(){return St().memoizedState}function hy(){return St().memoizedState}function yw(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Mn();i=Oo(a);var c=Bo(r,i,a);c!==null&&(_n(c,r,a),ja(c,r,a)),r={cache:pd()},i.payload=r;return}r=r.return}}function vw(i,r,a){var c=Mn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ju(i)?my(r,a):(a=id(i,r,a,c),a!==null&&(_n(a,i,c),gy(a,r,c)))}function py(i,r,a){var c=Mn();ol(i,r,a,c)}function ol(i,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ju(i))my(r,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,b=v(A,a);if(y.hasEagerState=!0,y.eagerState=b,wn(b,A))return Vu(i,r,y,0),st===null&&Du(),!1}catch{}finally{}if(a=id(i,r,y,c),a!==null)return _n(a,i,c),gy(a,r,c),!0}return!1}function Fd(i,r,a,c){if(c={lane:2,revertLane:vh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ju(i)){if(r)throw Error(o(479))}else r=id(i,a,c,2),r!==null&&_n(r,i,2)}function ju(i){var r=i.alternate;return i===Me||r!==null&&r===Me}function my(i,r){Ps=Ku=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function gy(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Ia(i,a)}}var rl={readContext:Qt,use:Qu,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};rl.useEffectEvent=yt;var yy={readContext:Qt,use:Qu,useCallback:function(i,r){return un().memoizedState=[i,r===void 0?null:r],i},useContext:Qt,useEffect:ey,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,Zu(4194308,4,oy.bind(null,r,i),a)},useLayoutEffect:function(i,r){return Zu(4194308,4,i,r)},useInsertionEffect:function(i,r){Zu(4,2,i,r)},useMemo:function(i,r){var a=un();r=r===void 0?null:r;var c=i();if(Hr){Un(!0);try{i()}finally{Un(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=un();if(a!==void 0){var y=a(r);if(Hr){Un(!0);try{a(r)}finally{Un(!1)}}}else y=r;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=vw.bind(null,Me,i),[c.memoizedState,i]},useRef:function(i){var r=un();return i={current:i},r.memoizedState=i},useState:function(i){i=Vd(i);var r=i.queue,a=py.bind(null,Me,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:Ud,useDeferredValue:function(i,r){var a=un();return Ld(a,i,r)},useTransition:function(){var i=Vd(!1);return i=uy.bind(null,Me,i.queue,!0,!1),un().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=Me,y=un();if(ze){if(a===void 0)throw Error(o(407));a=a()}else{if(a=r(),st===null)throw Error(o(349));(Oe&127)!==0||Og(c,r,a)}y.memoizedState=a;var v={value:a,getSnapshot:r};return y.queue=v,ey(Fg.bind(null,c,v,i),[i]),c.flags|=2048,Us(9,{destroy:void 0},Bg.bind(null,c,v,a,r),null),a},useId:function(){var i=un(),r=st.identifierPrefix;if(ze){var a=Ui,c=ki;a=(c&~(1<<32-_t(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Ju++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=fw++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Bd,useFormState:Qg,useActionState:Qg,useOptimistic:function(i){var r=un();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Fd.bind(null,Me,!0,a),a.dispatch=r,[i,r]},useMemoCache:Nd,useCacheRefresh:function(){return un().memoizedState=yw.bind(null,Me)},useEffectEvent:function(i){var r=un(),a={impl:i};return r.memoizedState=a,function(){if((Xe&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},qd={readContext:Qt,use:Qu,useCallback:sy,useContext:Qt,useEffect:kd,useImperativeHandle:ry,useInsertionEffect:ny,useLayoutEffect:iy,useMemo:ay,useReducer:Xu,useRef:jg,useState:function(){return Xu(no)},useDebugValue:Ud,useDeferredValue:function(i,r){var a=St();return ly(a,nt.memoizedState,i,r)},useTransition:function(){var i=Xu(no)[0],r=St().memoizedState;return[typeof i=="boolean"?i:il(i),r]},useSyncExternalStore:Lg,useId:dy,useHostTransitionStatus:Bd,useFormState:Xg,useActionState:Xg,useOptimistic:function(i,r){var a=St();return Gg(a,nt,i,r)},useMemoCache:Nd,useCacheRefresh:hy};qd.useEffectEvent=ty;var vy={readContext:Qt,use:Qu,useCallback:sy,useContext:Qt,useEffect:kd,useImperativeHandle:ry,useInsertionEffect:ny,useLayoutEffect:iy,useMemo:ay,useReducer:Dd,useRef:jg,useState:function(){return Dd(no)},useDebugValue:Ud,useDeferredValue:function(i,r){var a=St();return nt===null?Ld(a,i,r):ly(a,nt.memoizedState,i,r)},useTransition:function(){var i=Dd(no)[0],r=St().memoizedState;return[typeof i=="boolean"?i:il(i),r]},useSyncExternalStore:Lg,useId:dy,useHostTransitionStatus:Bd,useFormState:Wg,useActionState:Wg,useOptimistic:function(i,r){var a=St();return nt!==null?Gg(a,nt,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Nd,useCacheRefresh:hy};vy.useEffectEvent=ty;function zd(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Gd={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=Mn(),y=Oo(c);y.payload=r,a!=null&&(y.callback=a),r=Bo(i,y,c),r!==null&&(_n(r,i,c),ja(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=Mn(),y=Oo(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Bo(i,y,c),r!==null&&(_n(r,i,c),ja(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Mn(),c=Oo(a);c.tag=2,r!=null&&(c.callback=r),r=Bo(i,c,a),r!==null&&(_n(r,i,a),ja(r,i,a))}};function _y(i,r,a,c,y,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,A):r.prototype&&r.prototype.isPureReactComponent?!Ya(a,c)||!Ya(y,v):!0}function Ey(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&Gd.enqueueReplaceState(r,r.state,null)}function Yr(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Ty(i){Mu(i)}function Sy(i){console.error(i)}function Ay(i){Mu(i)}function ec(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Cy(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Hd(i,r,a){return a=Oo(a),a.tag=3,a.payload={element:null},a.callback=function(){ec(i,r)},a}function wy(i){return i=Oo(i),i.tag=3,i}function Iy(i,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;i.payload=function(){return y(v)},i.callback=function(){Cy(r,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Cy(r,a,c),typeof y!="function"&&(Yo===null?Yo=new Set([this]):Yo.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function _w(i,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Rs(r,a,y,!0),a=bn.current,a!==null){switch(a.tag){case 31:case 13:return Kn===null?dc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===qu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),mh(i,c,y)),!1;case 22:return a.flags|=65536,c===qu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),mh(i,c,y)),!1}throw Error(o(435,a.tag))}return mh(i,c,y),dc(),!1}if(ze)return r=bn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==ud&&(i=Error(o(422),{cause:c}),$a(zn(i,a)))):(c!==ud&&(r=Error(o(423),{cause:c}),$a(zn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=zn(c,a),y=Hd(i.stateNode,c,y),Ed(i,y),vt!==4&&(vt=2)),!1;var v=Error(o(520),{cause:c});if(v=zn(v,a),hl===null?hl=[v]:hl.push(v),vt!==4&&(vt=2),r===null)return!0;c=zn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Hd(a.stateNode,c,i),Ed(a,i),!1;case 1:if(r=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Yo===null||!Yo.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=wy(y),Iy(y,i,a,c),Ed(a,y),!1}a=a.return}while(a!==null);return!1}var Yd=Error(o(461)),Nt=!1;function Xt(i,r,a,c){r.child=i===null?Ng(r,null,a,c):Gr(r,i.child,a,c)}function by(i,r,a,c,y){a=a.render;var v=r.ref;if("ref"in c){var A={};for(var b in c)b!=="ref"&&(A[b]=c[b])}else A=c;return Br(r),c=Id(i,r,a,A,v,y),b=bd(),i!==null&&!Nt?(Rd(i,r,y),io(i,r,y)):(ze&&b&&ad(r),r.flags|=1,Xt(i,r,c,y),r.child)}function Ry(i,r,a,c,y){if(i===null){var v=a.type;return typeof v=="function"&&!od(v)&&v.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=v,xy(i,r,v,c,y)):(i=ku(a.type,null,c,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!jd(i,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Ya,a(A,c)&&i.ref===r.ref)return io(i,r,y)}return r.flags|=1,i=Zi(v,c),i.ref=r.ref,i.return=r,r.child=i}function xy(i,r,a,c,y){if(i!==null){var v=i.memoizedProps;if(Ya(v,c)&&i.ref===r.ref)if(Nt=!1,r.pendingProps=c=v,jd(i,y))(i.flags&131072)!==0&&(Nt=!0);else return r.lanes=i.lanes,io(i,r,y)}return Kd(i,r,a,c,y)}function Ny(i,r,a,c){var y=c.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=r.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,r.child=null;return My(i,r,v,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bu(r,v!==null?v.cachePool:null),v!==null?Vg(r,v):Sd(),Pg(r);else return c=r.lanes=536870912,My(i,r,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(Bu(r,v.cachePool),Vg(r,v),qo(),r.memoizedState=null):(i!==null&&Bu(r,null),Sd(),qo());return Xt(i,r,y,a),r.child}function sl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function My(i,r,a,c,y){var v=gd();return v=v===null?null:{parent:Rt._currentValue,pool:v},r.memoizedState={baseLanes:a,cachePool:v},i!==null&&Bu(r,null),Sd(),Pg(r),i!==null&&Rs(i,r,c,!0),r.childLanes=y,null}function tc(i,r){return r=ic({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Dy(i,r,a){return Gr(r,i.child,null,a),i=tc(r,r.pendingProps),i.flags|=2,Rn(r),r.memoizedState=null,i}function Ew(i,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(ze){if(c.mode==="hidden")return i=tc(r,c),r.lanes=536870912,sl(null,i);if(Cd(r),(i=ct)?(i=Hv(i,Yn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Vo!==null?{id:ki,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=mg(i),a.return=r,r.child=a,$t=r,ct=null)):i=null,i===null)throw ko(r);return r.lanes=536870912,null}return tc(r,c)}var v=i.memoizedState;if(v!==null){var A=v.dehydrated;if(Cd(r),y)if(r.flags&256)r.flags&=-257,r=Dy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(o(558));else if(Nt||Rs(i,r,a,!1),y=(a&i.childLanes)!==0,Nt||y){if(c=st,c!==null&&(A=ba(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,kr(i,A),_n(c,i,A),Yd;dc(),r=Dy(i,r,a)}else i=v.treeContext,ct=Jn(A.nextSibling),$t=r,ze=!0,Po=null,Yn=!1,i!==null&&vg(r,i),r=tc(r,c),r.flags|=4096;return r}return i=Zi(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function nc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function Kd(i,r,a,c,y){return Br(r),a=Id(i,r,a,c,void 0,y),c=bd(),i!==null&&!Nt?(Rd(i,r,y),io(i,r,y)):(ze&&c&&ad(r),r.flags|=1,Xt(i,r,a,y),r.child)}function Vy(i,r,a,c,y,v){return Br(r),r.updateQueue=null,a=Ug(r,c,a,y),kg(i),c=bd(),i!==null&&!Nt?(Rd(i,r,v),io(i,r,v)):(ze&&c&&ad(r),r.flags|=1,Xt(i,r,a,v),r.child)}function Py(i,r,a,c,y){if(Br(r),r.stateNode===null){var v=Cs,A=a.contextType;typeof A=="object"&&A!==null&&(v=Qt(A)),v=new a(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Gd,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},vd(r),A=a.contextType,v.context=typeof A=="object"&&A!==null?Qt(A):Cs,v.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(zd(r,a,A,c),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Gd.enqueueReplaceState(v,v.state,null),tl(r,c,v,y),el(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){v=r.stateNode;var b=r.memoizedProps,U=Yr(a,b);v.props=U;var K=v.context,j=a.contextType;A=Cs,typeof j=="object"&&j!==null&&(A=Qt(j));var ie=a.getDerivedStateFromProps;j=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b||K!==A)&&Ey(r,v,c,A),Lo=!1;var $=r.memoizedState;v.state=$,tl(r,c,v,y),el(),K=r.memoizedState,b||$!==K||Lo?(typeof ie=="function"&&(zd(r,a,ie,c),K=r.memoizedState),(U=Lo||_y(r,a,U,c,$,K,A))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),v.props=c,v.state=K,v.context=A,c=U):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,_d(i,r),A=r.memoizedProps,j=Yr(a,A),v.props=j,ie=r.pendingProps,$=v.context,K=a.contextType,U=Cs,typeof K=="object"&&K!==null&&(U=Qt(K)),b=a.getDerivedStateFromProps,(K=typeof b=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ie||$!==U)&&Ey(r,v,c,U),Lo=!1,$=r.memoizedState,v.state=$,tl(r,c,v,y),el();var X=r.memoizedState;A!==ie||$!==X||Lo||i!==null&&i.dependencies!==null&&Lu(i.dependencies)?(typeof b=="function"&&(zd(r,a,b,c),X=r.memoizedState),(j=Lo||_y(r,a,j,c,$,X,U)||i!==null&&i.dependencies!==null&&Lu(i.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,X,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,X,U)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=X),v.props=c,v.state=X,v.context=U,c=j):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(r.flags|=1024),c=!1)}return v=c,nc(i,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&c?(r.child=Gr(r,i.child,null,y),r.child=Gr(r,null,a,y)):Xt(i,r,a,y),r.memoizedState=v.state,i=r.child):i=io(i,r,y),i}function ky(i,r,a,c){return Lr(),r.flags|=256,Xt(i,r,a,c),r.child}var Jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $d(i){return{baseLanes:i,cachePool:Cg()}}function Qd(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Nn),i}function Uy(i,r,a){var c=r.pendingProps,y=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,i===null){if(ze){if(y?Fo(r):qo(),(i=ct)?(i=Hv(i,Yn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Vo!==null?{id:ki,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=mg(i),a.return=r,r.child=a,$t=r,ct=null)):i=null,i===null)throw ko(r);return Mh(i)?r.lanes=32:r.lanes=536870912,null}var b=c.children;return c=c.fallback,y?(qo(),y=r.mode,b=ic({mode:"hidden",children:b},y),c=Ur(c,y,a,null),b.return=r,c.return=r,b.sibling=c,r.child=b,c=r.child,c.memoizedState=$d(a),c.childLanes=Qd(i,A,a),r.memoizedState=Jd,sl(null,c)):(Fo(r),Xd(r,b))}var U=i.memoizedState;if(U!==null&&(b=U.dehydrated,b!==null)){if(v)r.flags&256?(Fo(r),r.flags&=-257,r=Zd(i,r,a)):r.memoizedState!==null?(qo(),r.child=i.child,r.flags|=128,r=null):(qo(),b=c.fallback,y=r.mode,c=ic({mode:"visible",children:c.children},y),b=Ur(b,y,a,null),b.flags|=2,c.return=r,b.return=r,c.sibling=b,r.child=c,Gr(r,i.child,null,a),c=r.child,c.memoizedState=$d(a),c.childLanes=Qd(i,A,a),r.memoizedState=Jd,r=sl(null,c));else if(Fo(r),Mh(b)){if(A=b.nextSibling&&b.nextSibling.dataset,A)var K=A.dgst;A=K,c=Error(o(419)),c.stack="",c.digest=A,$a({value:c,source:null,stack:null}),r=Zd(i,r,a)}else if(Nt||Rs(i,r,a,!1),A=(a&i.childLanes)!==0,Nt||A){if(A=st,A!==null&&(c=ba(A,a),c!==0&&c!==U.retryLane))throw U.retryLane=c,kr(i,c),_n(A,i,c),Yd;Nh(b)||dc(),r=Zd(i,r,a)}else Nh(b)?(r.flags|=192,r.child=i.child,r=null):(i=U.treeContext,ct=Jn(b.nextSibling),$t=r,ze=!0,Po=null,Yn=!1,i!==null&&vg(r,i),r=Xd(r,c.children),r.flags|=4096);return r}return y?(qo(),b=c.fallback,y=r.mode,U=i.child,K=U.sibling,c=Zi(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,K!==null?b=Zi(K,b):(b=Ur(b,y,a,null),b.flags|=2),b.return=r,c.return=r,c.sibling=b,r.child=c,sl(null,c),c=r.child,b=i.child.memoizedState,b===null?b=$d(a):(y=b.cachePool,y!==null?(U=Rt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=Cg(),b={baseLanes:b.baseLanes|a,cachePool:y}),c.memoizedState=b,c.childLanes=Qd(i,A,a),r.memoizedState=Jd,sl(i.child,c)):(Fo(r),a=i.child,i=a.sibling,a=Zi(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(A=r.deletions,A===null?(r.deletions=[i],r.flags|=16):A.push(i)),r.child=a,r.memoizedState=null,a)}function Xd(i,r){return r=ic({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function ic(i,r){return i=In(22,i,null,r),i.lanes=0,i}function Zd(i,r,a){return Gr(r,i.child,null,a),i=Xd(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Ly(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),dd(i.return,r,a)}function Wd(i,r,a,c,y,v){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function Oy(i,r,a){var c=r.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Tt.current,b=(A&2)!==0;if(b?(A=A&1|2,r.flags|=128):A&=1,ue(Tt,A),Xt(i,r,c,a),c=ze?Ja:0,!b&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ly(i,a,r);else if(i.tag===19)Ly(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&Yu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Wd(r,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&Yu(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Wd(r,!0,a,null,v,c);break;case"together":Wd(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function io(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Ho|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Rs(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(o(153));if(r.child!==null){for(i=r.child,a=Zi(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Zi(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function jd(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Lu(i)))}function Tw(i,r,a){switch(r.tag){case 3:gt(r,r.stateNode.containerInfo),Uo(r,Rt,i.memoizedState.cache),Lr();break;case 27:case 5:gi(r);break;case 4:gt(r,r.stateNode.containerInfo);break;case 10:Uo(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Cd(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Fo(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Uy(i,r,a):(Fo(r),i=io(i,r,a),i!==null?i.sibling:null);Fo(r);break;case 19:var y=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Rs(i,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return Oy(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(Tt,Tt.current),c)break;return null;case 22:return r.lanes=0,Ny(i,r,a,r.pendingProps);case 24:Uo(r,Rt,i.memoizedState.cache)}return io(i,r,a)}function By(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Nt=!0;else{if(!jd(i,a)&&(r.flags&128)===0)return Nt=!1,Tw(i,r,a);Nt=(i.flags&131072)!==0}else Nt=!1,ze&&(r.flags&1048576)!==0&&yg(r,Ja,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=qr(r.elementType),r.type=i,typeof i=="function")od(i)?(c=Yr(i,c),r.tag=1,r=Py(null,r,i,c,a)):(r.tag=0,r=Kd(null,r,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===se){r.tag=11,r=by(null,r,i,c,a);break e}else if(y===N){r.tag=14,r=Ry(null,r,i,c,a);break e}}throw r=Pe(i)||i,Error(o(306,r,""))}}return r;case 0:return Kd(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=Yr(c,r.pendingProps),Py(i,r,c,y,a);case 3:e:{if(gt(r,r.stateNode.containerInfo),i===null)throw Error(o(387));c=r.pendingProps;var v=r.memoizedState;y=v.element,_d(i,r),tl(r,c,null,a);var A=r.memoizedState;if(c=A.cache,Uo(r,Rt,c),c!==v.cache&&hd(r,[Rt],a,!0),el(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=ky(i,r,c,a);break e}else if(c!==y){y=zn(Error(o(424)),r),$a(y),r=ky(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ct=Jn(i.firstChild),$t=r,ze=!0,Po=null,Yn=!0,a=Ng(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Lr(),c===y){r=io(i,r,a);break e}Xt(i,r,c,a)}r=r.child}return r;case 26:return nc(i,r),i===null?(a=Xv(r.type,null,r.pendingProps,null))?r.memoizedState=a:ze||(a=r.type,i=r.pendingProps,c=_c(we.current).createElement(a),c[wt]=r,c[qt]=i,Zt(c,a,i),It(c),r.stateNode=c):r.memoizedState=Xv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return gi(r),i===null&&ze&&(c=r.stateNode=Jv(r.type,r.pendingProps,we.current),$t=r,Yn=!0,y=ct,Qo(r.type)?(Dh=y,ct=Jn(c.firstChild)):ct=y),Xt(i,r,r.pendingProps.children,a),nc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&ze&&((y=c=ct)&&(c=Zw(c,r.type,r.pendingProps,Yn),c!==null?(r.stateNode=c,$t=r,ct=Jn(c.firstChild),Yn=!1,y=!0):y=!1),y||ko(r)),gi(r),y=r.type,v=r.pendingProps,A=i!==null?i.memoizedProps:null,c=v.children,bh(y,v)?c=null:A!==null&&bh(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=Id(i,r,dw,null,null,a),Tl._currentValue=y),nc(i,r),Xt(i,r,c,a),r.child;case 6:return i===null&&ze&&((i=a=ct)&&(a=Ww(a,r.pendingProps,Yn),a!==null?(r.stateNode=a,$t=r,ct=null,i=!0):i=!1),i||ko(r)),null;case 13:return Uy(i,r,a);case 4:return gt(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=Gr(r,null,c,a):Xt(i,r,c,a),r.child;case 11:return by(i,r,r.type,r.pendingProps,a);case 7:return Xt(i,r,r.pendingProps,a),r.child;case 8:return Xt(i,r,r.pendingProps.children,a),r.child;case 12:return Xt(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Uo(r,r.type,c.value),Xt(i,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Br(r),y=Qt(y),c=c(y),r.flags|=1,Xt(i,r,c,a),r.child;case 14:return Ry(i,r,r.type,r.pendingProps,a);case 15:return xy(i,r,r.type,r.pendingProps,a);case 19:return Oy(i,r,a);case 31:return Ew(i,r,a);case 22:return Ny(i,r,a,r.pendingProps);case 24:return Br(r),c=Qt(Rt),i===null?(y=gd(),y===null&&(y=st,v=pd(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),r.memoizedState={parent:c,cache:y},vd(r),Uo(r,Rt,y)):((i.lanes&a)!==0&&(_d(i,r),tl(r,null,null,a),el()),y=i.memoizedState,v=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Uo(r,Rt,c)):(c=v.cache,Uo(r,Rt,c),c!==y.cache&&hd(r,[Rt],a,!0))),Xt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function oo(i){i.flags|=4}function eh(i,r,a,c,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(dv())i.flags|=8192;else throw zr=qu,yd}else i.flags&=-16777217}function Fy(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!t_(r))if(dv())i.flags|=8192;else throw zr=qu,yd}function oc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?cu():536870912,i.lanes|=r,Fs|=r)}function al(i,r){if(!ze)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function ft(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function Sw(i,r,a){var c=r.pendingProps;switch(ld(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(r),null;case 1:return ft(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),eo(Rt),at(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(bs(r)?oo(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,cd())),ft(r),null;case 26:var y=r.type,v=r.memoizedState;return i===null?(oo(r),v!==null?(ft(r),Fy(r,v)):(ft(r),eh(r,y,null,c,a))):v?v!==i.memoizedState?(oo(r),ft(r),Fy(r,v)):(ft(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&oo(r),ft(r),eh(r,y,i,c,a)),null;case 27:if(Yi(r),a=we.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&oo(r);else{if(!c){if(r.stateNode===null)throw Error(o(166));return ft(r),null}i=he.current,bs(r)?_g(r):(i=Jv(y,c,a),r.stateNode=i,oo(r))}return ft(r),null;case 5:if(Yi(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&oo(r);else{if(!c){if(r.stateNode===null)throw Error(o(166));return ft(r),null}if(v=he.current,bs(r))_g(r);else{var A=_c(we.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[wt]=r,v[qt]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=v;e:switch(Zt(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&oo(r)}}return ft(r),eh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&oo(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(o(166));if(i=we.current,bs(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,y=$t,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[wt]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Uv(i.nodeValue,a)),i||ko(r,!0)}else i=_c(i).createTextNode(c),i[wt]=r,r.stateNode=i}return ft(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=bs(r),a!==null){if(i===null){if(!c)throw Error(o(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[wt]=r}else Lr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),i=!1}else a=cd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Rn(r),r):(Rn(r),null);if((r.flags&128)!==0)throw Error(o(558))}return ft(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=bs(r),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(o(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[wt]=r}else Lr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),y=!1}else y=cd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Rn(r),r):(Rn(r),null)}return Rn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),oc(r,r.updateQueue),ft(r),null);case 4:return at(),i===null&&Sh(r.stateNode.containerInfo),ft(r),null;case 10:return eo(r.type),ft(r),null;case 19:if(ne(Tt),c=r.memoizedState,c===null)return ft(r),null;if(y=(r.flags&128)!==0,v=c.rendering,v===null)if(y)al(c,!1);else{if(vt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=Yu(i),v!==null){for(r.flags|=128,al(c,!1),i=v.updateQueue,r.updateQueue=i,oc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)pg(a,i),a=a.sibling;return ue(Tt,Tt.current&1|2),ze&&Wi(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&an()>uc&&(r.flags|=128,y=!0,al(c,!1),r.lanes=4194304)}else{if(!y)if(i=Yu(v),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,oc(r,i),al(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!ze)return ft(r),null}else 2*an()-c.renderingStartTime>uc&&a!==536870912&&(r.flags|=128,y=!0,al(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(i=c.last,i!==null?i.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=an(),i.sibling=null,a=Tt.current,ue(Tt,y?a&1|2:a&1),ze&&Wi(r,c.treeForkCount),i):(ft(r),null);case 22:case 23:return Rn(r),Ad(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(ft(r),r.subtreeFlags&6&&(r.flags|=8192)):ft(r),a=r.updateQueue,a!==null&&oc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&ne(Fr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),eo(Rt),ft(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function Aw(i,r){switch(ld(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return eo(Rt),at(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Yi(r),null;case 31:if(r.memoizedState!==null){if(Rn(r),r.alternate===null)throw Error(o(340));Lr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Rn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(o(340));Lr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ne(Tt),null;case 4:return at(),null;case 10:return eo(r.type),null;case 22:case 23:return Rn(r),Ad(),i!==null&&ne(Fr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return eo(Rt),null;case 25:return null;default:return null}}function qy(i,r){switch(ld(r),r.tag){case 3:eo(Rt),at();break;case 26:case 27:case 5:Yi(r);break;case 4:at();break;case 31:r.memoizedState!==null&&Rn(r);break;case 13:Rn(r);break;case 19:ne(Tt);break;case 10:eo(r.type);break;case 22:case 23:Rn(r),Ad(),i!==null&&ne(Fr);break;case 24:eo(Rt)}}function ll(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(b){et(r,r.return,b)}}function zo(i,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&i)===i){var A=c.inst,b=A.destroy;if(b!==void 0){A.destroy=void 0,y=r;var U=a,K=b;try{K()}catch(j){et(y,U,j)}}}c=c.next}while(c!==v)}}catch(j){et(r,r.return,j)}}function zy(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Dg(r,a)}catch(c){et(i,i.return,c)}}}function Gy(i,r,a){a.props=Yr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){et(i,r,c)}}function ul(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){et(i,r,y)}}function Li(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){et(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){et(i,r,y)}else a.current=null}function Hy(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){et(i,i.return,y)}}function th(i,r,a){try{var c=i.stateNode;Yw(c,i.type,a,r),c[qt]=r}catch(y){et(i,i.return,y)}}function Yy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Qo(i.type)||i.tag===4}function nh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Yy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Qo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ih(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ni));else if(c!==4&&(c===27&&Qo(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(ih(i,r,a),i=i.sibling;i!==null;)ih(i,r,a),i=i.sibling}function rc(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&Qo(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(rc(i,r,a),i=i.sibling;i!==null;)rc(i,r,a),i=i.sibling}function Ky(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Zt(r,c,a),r[wt]=i,r[qt]=a}catch(v){et(i,i.return,v)}}var ro=!1,Mt=!1,oh=!1,Jy=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function Cw(i,r){if(i=i.containerInfo,wh=Ic,i=rg(i),Zf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,b=-1,U=-1,K=0,j=0,ie=i,$=null;t:for(;;){for(var X;ie!==a||y!==0&&ie.nodeType!==3||(b=A+y),ie!==v||c!==0&&ie.nodeType!==3||(U=A+c),ie.nodeType===3&&(A+=ie.nodeValue.length),(X=ie.firstChild)!==null;)$=ie,ie=X;for(;;){if(ie===i)break t;if($===a&&++K===y&&(b=A),$===v&&++j===c&&(U=A),(X=ie.nextSibling)!==null)break;ie=$,$=ie.parentNode}ie=X}a=b===-1||U===-1?null:{start:b,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ih={focusedElem:i,selectionRange:a},Ic=!1,Gt=r;Gt!==null;)if(r=Gt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Gt=i;else for(;Gt!==null;){switch(r=Gt,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=r,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var me=Yr(a.type,y);i=c.getSnapshotBeforeUpdate(me,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(Se){et(a,a.return,Se)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)xh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":xh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=r.sibling,i!==null){i.return=r.return,Gt=i;break}Gt=r.return}}function $y(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:ao(i,a),c&4&&ll(5,a);break;case 1:if(ao(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(A){et(a,a.return,A)}else{var y=Yr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(A){et(a,a.return,A)}}c&64&&zy(a),c&512&&ul(a,a.return);break;case 3:if(ao(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Dg(i,r)}catch(A){et(a,a.return,A)}}break;case 27:r===null&&c&4&&Ky(a);case 26:case 5:ao(i,a),r===null&&c&4&&Hy(a),c&512&&ul(a,a.return);break;case 12:ao(i,a);break;case 31:ao(i,a),c&4&&Zy(i,a);break;case 13:ao(i,a),c&4&&Wy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=Vw.bind(null,a),jw(i,a))));break;case 22:if(c=a.memoizedState!==null||ro,!c){r=r!==null&&r.memoizedState!==null||Mt,y=ro;var v=Mt;ro=c,(Mt=r)&&!v?lo(i,a,(a.subtreeFlags&8772)!==0):ao(i,a),ro=y,Mt=v}break;case 30:break;default:ao(i,a)}}function Qy(i){var r=i.alternate;r!==null&&(i.alternate=null,Qy(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&cs(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pt=null,mn=!1;function so(i,r,a){for(a=a.child;a!==null;)Xy(i,r,a),a=a.sibling}function Xy(i,r,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Wn,a)}catch{}switch(a.tag){case 26:Mt||Li(a,r),so(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||Li(a,r);var c=pt,y=mn;Qo(a.type)&&(pt=a.stateNode,mn=!1),so(i,r,a),vl(a.stateNode),pt=c,mn=y;break;case 5:Mt||Li(a,r);case 6:if(c=pt,y=mn,pt=null,so(i,r,a),pt=c,mn=y,pt!==null)if(mn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(v){et(a,r,v)}else try{pt.removeChild(a.stateNode)}catch(v){et(a,r,v)}break;case 18:pt!==null&&(mn?(i=pt,zv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),$s(i)):zv(pt,a.stateNode));break;case 4:c=pt,y=mn,pt=a.stateNode.containerInfo,mn=!0,so(i,r,a),pt=c,mn=y;break;case 0:case 11:case 14:case 15:zo(2,a,r),Mt||zo(4,a,r),so(i,r,a);break;case 1:Mt||(Li(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Gy(a,r,c)),so(i,r,a);break;case 21:so(i,r,a);break;case 22:Mt=(c=Mt)||a.memoizedState!==null,so(i,r,a),Mt=c;break;default:so(i,r,a)}}function Zy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{$s(i)}catch(a){et(r,r.return,a)}}}function Wy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{$s(i)}catch(a){et(r,r.return,a)}}function ww(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Jy),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Jy),r;default:throw Error(o(435,i.tag))}}function sc(i,r){var a=ww(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=Pw.bind(null,i,c);c.then(y,y)}})}function gn(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=i,A=r,b=A;e:for(;b!==null;){switch(b.tag){case 27:if(Qo(b.type)){pt=b.stateNode,mn=!1;break e}break;case 5:pt=b.stateNode,mn=!1;break e;case 3:case 4:pt=b.stateNode.containerInfo,mn=!0;break e}b=b.return}if(pt===null)throw Error(o(160));Xy(v,A,y),pt=null,mn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)jy(r,i),r=r.sibling}var li=null;function jy(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:gn(r,i),yn(i),c&4&&(zo(3,i,i.return),ll(3,i),zo(5,i,i.return));break;case 1:gn(r,i),yn(i),c&512&&(Mt||a===null||Li(a,a.return)),c&64&&ro&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=li;if(gn(r,i),yn(i),c&512&&(Mt||a===null||Li(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ai]||v[wt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),Zt(v,c,a),v[wt]=i,It(v),c=v;break e;case"link":var A=jv("link","href",y).get(c+(a.href||""));if(A){for(var b=0;b<A.length;b++)if(v=A[b],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(b,1);break t}}v=y.createElement(c),Zt(v,c,a),y.head.appendChild(v);break;case"meta":if(A=jv("meta","content",y).get(c+(a.content||""))){for(b=0;b<A.length;b++)if(v=A[b],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(b,1);break t}}v=y.createElement(c),Zt(v,c,a),y.head.appendChild(v);break;default:throw Error(o(468,c))}v[wt]=i,It(v),c=v}i.stateNode=c}else e_(y,i.type,i.stateNode);else i.stateNode=Wv(y,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?e_(y,i.type,i.stateNode):Wv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&th(i,i.memoizedProps,a.memoizedProps)}break;case 27:gn(r,i),yn(i),c&512&&(Mt||a===null||Li(a,a.return)),a!==null&&c&4&&th(i,i.memoizedProps,a.memoizedProps);break;case 5:if(gn(r,i),yn(i),c&512&&(Mt||a===null||Li(a,a.return)),i.flags&32){y=i.stateNode;try{pn(y,"")}catch(me){et(i,i.return,me)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,th(i,y,a!==null?a.memoizedProps:y)),c&1024&&(oh=!0);break;case 6:if(gn(r,i),yn(i),c&4){if(i.stateNode===null)throw Error(o(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(me){et(i,i.return,me)}}break;case 3:if(Sc=null,y=li,li=Ec(r.containerInfo),gn(r,i),li=y,yn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{$s(r.containerInfo)}catch(me){et(i,i.return,me)}oh&&(oh=!1,ev(i));break;case 4:c=li,li=Ec(i.stateNode.containerInfo),gn(r,i),yn(i),li=c;break;case 12:gn(r,i),yn(i);break;case 31:gn(r,i),yn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,sc(i,c)));break;case 13:gn(r,i),yn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(lc=an()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,sc(i,c)));break;case 22:y=i.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,K=ro,j=Mt;if(ro=K||y,Mt=j||U,gn(r,i),Mt=j,ro=K,yn(i),c&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||U||ro||Mt||Kr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(v=U.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{b=U.stateNode;var ie=U.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(me){et(U,U.return,me)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(me){et(U,U.return,me)}}}else if(r.tag===18){if(a===null){U=r;try{var X=U.stateNode;y?Gv(X,!0):Gv(U.stateNode,!1)}catch(me){et(U,U.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,sc(i,a))));break;case 19:gn(r,i),yn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,sc(i,c)));break;case 30:break;case 21:break;default:gn(r,i),yn(i)}}function yn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(Yy(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,v=nh(i);rc(i,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(pn(A,""),a.flags&=-33);var b=nh(i);rc(i,b,A);break;case 3:case 4:var U=a.stateNode.containerInfo,K=nh(i);ih(i,K,U);break;default:throw Error(o(161))}}catch(j){et(i,i.return,j)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function ev(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;ev(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ao(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)$y(i,r.alternate,r),r=r.sibling}function Kr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:zo(4,r,r.return),Kr(r);break;case 1:Li(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Gy(r,r.return,a),Kr(r);break;case 27:vl(r.stateNode);case 26:case 5:Li(r,r.return),Kr(r);break;case 22:r.memoizedState===null&&Kr(r);break;case 30:Kr(r);break;default:Kr(r)}i=i.sibling}}function lo(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=i,v=r,A=v.flags;switch(v.tag){case 0:case 11:case 15:lo(y,v,a),ll(4,v);break;case 1:if(lo(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){et(c,c.return,K)}if(c=v,y=c.updateQueue,y!==null){var b=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)Mg(U[y],b)}catch(K){et(c,c.return,K)}}a&&A&64&&zy(v),ul(v,v.return);break;case 27:Ky(v);case 26:case 5:lo(y,v,a),a&&c===null&&A&4&&Hy(v),ul(v,v.return);break;case 12:lo(y,v,a);break;case 31:lo(y,v,a),a&&A&4&&Zy(y,v);break;case 13:lo(y,v,a),a&&A&4&&Wy(y,v);break;case 22:v.memoizedState===null&&lo(y,v,a),ul(v,v.return);break;case 30:break;default:lo(y,v,a)}r=r.sibling}}function rh(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Qa(a))}function sh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Qa(i))}function ui(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)tv(i,r,a,c),r=r.sibling}function tv(i,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ui(i,r,a,c),y&2048&&ll(9,r);break;case 1:ui(i,r,a,c);break;case 3:ui(i,r,a,c),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Qa(i)));break;case 12:if(y&2048){ui(i,r,a,c),i=r.stateNode;try{var v=r.memoizedProps,A=v.id,b=v.onPostCommit;typeof b=="function"&&b(A,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){et(r,r.return,U)}}else ui(i,r,a,c);break;case 31:ui(i,r,a,c);break;case 13:ui(i,r,a,c);break;case 23:break;case 22:v=r.stateNode,A=r.alternate,r.memoizedState!==null?v._visibility&2?ui(i,r,a,c):cl(i,r):v._visibility&2?ui(i,r,a,c):(v._visibility|=2,Ls(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&rh(A,r);break;case 24:ui(i,r,a,c),y&2048&&sh(r.alternate,r);break;default:ui(i,r,a,c)}}function Ls(i,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,A=r,b=a,U=c,K=A.flags;switch(A.tag){case 0:case 11:case 15:Ls(v,A,b,U,y),ll(8,A);break;case 23:break;case 22:var j=A.stateNode;A.memoizedState!==null?j._visibility&2?Ls(v,A,b,U,y):cl(v,A):(j._visibility|=2,Ls(v,A,b,U,y)),y&&K&2048&&rh(A.alternate,A);break;case 24:Ls(v,A,b,U,y),y&&K&2048&&sh(A.alternate,A);break;default:Ls(v,A,b,U,y)}r=r.sibling}}function cl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,y=c.flags;switch(c.tag){case 22:cl(a,c),y&2048&&rh(c.alternate,c);break;case 24:cl(a,c),y&2048&&sh(c.alternate,c);break;default:cl(a,c)}r=r.sibling}}var fl=8192;function Os(i,r,a){if(i.subtreeFlags&fl)for(i=i.child;i!==null;)nv(i,r,a),i=i.sibling}function nv(i,r,a){switch(i.tag){case 26:Os(i,r,a),i.flags&fl&&i.memoizedState!==null&&fI(a,li,i.memoizedState,i.memoizedProps);break;case 5:Os(i,r,a);break;case 3:case 4:var c=li;li=Ec(i.stateNode.containerInfo),Os(i,r,a),li=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=fl,fl=16777216,Os(i,r,a),fl=c):Os(i,r,a));break;default:Os(i,r,a)}}function iv(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function dl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Gt=c,rv(c,i)}iv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ov(i),i=i.sibling}function ov(i){switch(i.tag){case 0:case 11:case 15:dl(i),i.flags&2048&&zo(9,i,i.return);break;case 3:dl(i);break;case 12:dl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,ac(i)):dl(i);break;default:dl(i)}}function ac(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Gt=c,rv(c,i)}iv(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:zo(8,r,r.return),ac(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,ac(r));break;default:ac(r)}i=i.sibling}}function rv(i,r){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:zo(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Qa(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Gt=c;else e:for(a=i;Gt!==null;){c=Gt;var y=c.sibling,v=c.return;if(Qy(c),c===a){Gt=null;break e}if(y!==null){y.return=v,Gt=y;break e}Gt=v}}}var Iw={getCacheForType:function(i){var r=Qt(Rt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Qt(Rt).controller.signal}},bw=typeof WeakMap=="function"?WeakMap:Map,Xe=0,st=null,Ue=null,Oe=0,je=0,xn=null,Go=!1,Bs=!1,ah=!1,uo=0,vt=0,Ho=0,Jr=0,lh=0,Nn=0,Fs=0,hl=null,vn=null,uh=!1,lc=0,sv=0,uc=1/0,cc=null,Yo=null,Lt=0,Ko=null,qs=null,co=0,ch=0,fh=null,av=null,pl=0,dh=null;function Mn(){return(Xe&2)!==0&&Oe!==0?Oe&-Oe:J.T!==null?vh():fu()}function lv(){if(Nn===0)if((Oe&536870912)===0||ze){var i=Er;Er<<=1,(Er&3932160)===0&&(Er=262144),Nn=i}else Nn=536870912;return i=bn.current,i!==null&&(i.flags|=32),Nn}function _n(i,r,a){(i===st&&(je===2||je===9)||i.cancelPendingCommit!==null)&&(zs(i,0),Jo(i,Oe,Nn,!1)),Tr(i,a),((Xe&2)===0||i!==st)&&(i===st&&((Xe&2)===0&&(Jr|=a),vt===4&&Jo(i,Oe,Nn,!1)),Oi(i))}function uv(i,r,a){if((Xe&6)!==0)throw Error(o(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||jn(i,r),y=c?Nw(i,r):ph(i,r,!0),v=c;do{if(y===0){Bs&&!c&&Jo(i,r,0,!1);break}else{if(a=i.current.alternate,v&&!Rw(a)){y=ph(i,r,!1),v=!1;continue}if(y===2){if(v=r,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var b=i;y=hl;var U=b.current.memoizedState.isDehydrated;if(U&&(zs(b,A).flags|=256),A=ph(b,A,!1),A!==2){if(ah&&!U){b.errorRecoveryDisabledLanes|=v,Jr|=v,y=4;break e}v=vn,vn=y,v!==null&&(vn===null?vn=v:vn.push.apply(vn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){zs(i,0),Jo(i,r,0,!0);break}e:{switch(c=i,v=y,v){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:Jo(c,r,Nn,!Go);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(y=lc+300-an(),10<y)){if(Jo(c,r,Nn,!Go),Ei(c,0,!0)!==0)break e;co=r,c.timeoutHandle=Fv(cv.bind(null,c,a,vn,cc,uh,r,Nn,Jr,Fs,Go,v,"Throttled",-0,0),y);break e}cv(c,a,vn,cc,uh,r,Nn,Jr,Fs,Go,v,null,-0,0)}}break}while(!0);Oi(i)}function cv(i,r,a,c,y,v,A,b,U,K,j,ie,$,X){if(i.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ni},nv(r,v,ie);var me=(v&62914560)===v?lc-an():(v&4194048)===v?sv-an():0;if(me=dI(ie,me),me!==null){co=v,i.cancelPendingCommit=me(vv.bind(null,i,r,v,a,c,y,A,b,U,j,ie,null,$,X)),Jo(i,v,A,!K);return}}vv(i,r,v,a,c,y,A,b,U)}function Rw(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!wn(v(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Jo(i,r,a,c){r&=~lh,r&=~Jr,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var y=r;0<y;){var v=31-_t(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&Sr(i,a,r)}function fc(){return(Xe&6)===0?(ml(0),!1):!0}function hh(){if(Ue!==null){if(je===0)var i=Ue.return;else i=Ue,ji=Or=null,xd(i),Ds=null,Za=0,i=Ue;for(;i!==null;)qy(i.alternate,i),i=i.return;Ue=null}}function zs(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,$w(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),co=0,hh(),st=i,Ue=a=Zi(i.current,null),Oe=r,je=0,xn=null,Go=!1,Bs=jn(i,r),ah=!1,Fs=Nn=lh=Jr=Ho=vt=0,vn=hl=null,uh=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var y=31-_t(c),v=1<<y;r|=i[y],c&=~v}return uo=r,Du(),a}function fv(i,r){Me=null,J.H=rl,r===Ms||r===Fu?(r=bg(),je=3):r===yd?(r=bg(),je=4):je=r===Yd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,xn=r,Ue===null&&(vt=1,ec(i,zn(r,i.current)))}function dv(){var i=bn.current;return i===null?!0:(Oe&4194048)===Oe?Kn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?i===Kn:!1}function hv(){var i=J.H;return J.H=rl,i===null?rl:i}function pv(){var i=J.A;return J.A=Iw,i}function dc(){vt=4,Go||(Oe&4194048)!==Oe&&bn.current!==null||(Bs=!0),(Ho&134217727)===0&&(Jr&134217727)===0||st===null||Jo(st,Oe,Nn,!1)}function ph(i,r,a){var c=Xe;Xe|=2;var y=hv(),v=pv();(st!==i||Oe!==r)&&(cc=null,zs(i,r)),r=!1;var A=vt;e:do try{if(je!==0&&Ue!==null){var b=Ue,U=xn;switch(je){case 8:hh(),A=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(r=!0);var K=je;if(je=0,xn=null,Gs(i,b,U,K),a&&Bs){A=0;break e}break;default:K=je,je=0,xn=null,Gs(i,b,U,K)}}xw(),A=vt;break}catch(j){fv(i,j)}while(!0);return r&&i.shellSuspendCounter++,ji=Or=null,Xe=c,J.H=y,J.A=v,Ue===null&&(st=null,Oe=0,Du()),A}function xw(){for(;Ue!==null;)mv(Ue)}function Nw(i,r){var a=Xe;Xe|=2;var c=hv(),y=pv();st!==i||Oe!==r?(cc=null,uc=an()+500,zs(i,r)):Bs=jn(i,r);e:do try{if(je!==0&&Ue!==null){r=Ue;var v=xn;t:switch(je){case 1:je=0,xn=null,Gs(i,r,v,1);break;case 2:case 9:if(wg(v)){je=0,xn=null,gv(r);break}r=function(){je!==2&&je!==9||st!==i||(je=7),Oi(i)},v.then(r,r);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:wg(v)?(je=0,xn=null,gv(r)):(je=0,xn=null,Gs(i,r,v,7));break;case 5:var A=null;switch(Ue.tag){case 26:A=Ue.memoizedState;case 5:case 27:var b=Ue;if(A?t_(A):b.stateNode.complete){je=0,xn=null;var U=b.sibling;if(U!==null)Ue=U;else{var K=b.return;K!==null?(Ue=K,hc(K)):Ue=null}break t}}je=0,xn=null,Gs(i,r,v,5);break;case 6:je=0,xn=null,Gs(i,r,v,6);break;case 8:hh(),vt=6;break e;default:throw Error(o(462))}}Mw();break}catch(j){fv(i,j)}while(!0);return ji=Or=null,J.H=c,J.A=y,Xe=a,Ue!==null?0:(st=null,Oe=0,Du(),vt)}function Mw(){for(;Ue!==null&&!Hf();)mv(Ue)}function mv(i){var r=By(i.alternate,i,uo);i.memoizedProps=i.pendingProps,r===null?hc(i):Ue=r}function gv(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Vy(a,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=Vy(a,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:xd(r);default:qy(a,r),r=Ue=pg(r,uo),r=By(a,r,uo)}i.memoizedProps=i.pendingProps,r===null?hc(i):Ue=r}function Gs(i,r,a,c){ji=Or=null,xd(r),Ds=null,Za=0;var y=r.return;try{if(_w(i,y,r,a,Oe)){vt=1,ec(i,zn(a,i.current)),Ue=null;return}}catch(v){if(y!==null)throw Ue=y,v;vt=1,ec(i,zn(a,i.current)),Ue=null;return}r.flags&32768?(ze||c===1?i=!0:Bs||(Oe&536870912)!==0?i=!1:(Go=i=!0,(c===2||c===9||c===3||c===6)&&(c=bn.current,c!==null&&c.tag===13&&(c.flags|=16384))),yv(r,i)):hc(r)}function hc(i){var r=i;do{if((r.flags&32768)!==0){yv(r,Go);return}i=r.return;var a=Sw(r.alternate,r,uo);if(a!==null){Ue=a;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=i}while(r!==null);vt===0&&(vt=5)}function yv(i,r){do{var a=Aw(i.alternate,i);if(a!==null){a.flags&=32767,Ue=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Ue=i;return}Ue=i=a}while(i!==null);vt=6,Ue=null}function vv(i,r,a,c,y,v,A,b,U){i.cancelPendingCommit=null;do pc();while(Lt!==0);if((Xe&6)!==0)throw Error(o(327));if(r!==null){if(r===i.current)throw Error(o(177));if(v=r.lanes|r.childLanes,v|=nd,Jf(i,a,v,A,b,U),i===st&&(Ue=st=null,Oe=0),qs=r,Ko=i,co=a,ch=v,fh=y,av=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,kw(Ao,function(){return Av(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,y=ae.p,ae.p=2,A=Xe,Xe|=4;try{Cw(i,r,a)}finally{Xe=A,ae.p=y,J.T=c}}Lt=1,_v(),Ev(),Tv()}}function _v(){if(Lt===1){Lt=0;var i=Ko,r=qs,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var c=ae.p;ae.p=2;var y=Xe;Xe|=4;try{jy(r,i);var v=Ih,A=rg(i.containerInfo),b=v.focusedElem,U=v.selectionRange;if(A!==b&&b&&b.ownerDocument&&og(b.ownerDocument.documentElement,b)){if(U!==null&&Zf(b)){var K=U.start,j=U.end;if(j===void 0&&(j=K),"selectionStart"in b)b.selectionStart=K,b.selectionEnd=Math.min(j,b.value.length);else{var ie=b.ownerDocument||document,$=ie&&ie.defaultView||window;if($.getSelection){var X=$.getSelection(),me=b.textContent.length,Se=Math.min(U.start,me),ot=U.end===void 0?Se:Math.min(U.end,me);!X.extend&&Se>ot&&(A=ot,ot=Se,Se=A);var z=ig(b,Se),B=ig(b,ot);if(z&&B&&(X.rangeCount!==1||X.anchorNode!==z.node||X.anchorOffset!==z.offset||X.focusNode!==B.node||X.focusOffset!==B.offset)){var Y=ie.createRange();Y.setStart(z.node,z.offset),X.removeAllRanges(),Se>ot?(X.addRange(Y),X.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),X.addRange(Y))}}}}for(ie=[],X=b;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var te=ie[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Ic=!!wh,Ih=wh=null}finally{Xe=y,ae.p=c,J.T=a}}i.current=r,Lt=2}}function Ev(){if(Lt===2){Lt=0;var i=Ko,r=qs,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var c=ae.p;ae.p=2;var y=Xe;Xe|=4;try{$y(i,r.alternate,r)}finally{Xe=y,ae.p=c,J.T=a}}Lt=3}}function Tv(){if(Lt===4||Lt===3){Lt=0,ou();var i=Ko,r=qs,a=co,c=av;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Lt=5:(Lt=0,qs=Ko=null,Sv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Yo=null),Ji(a),r=r.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Wn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=J.T,y=ae.p,ae.p=2,J.T=null;try{for(var v=i.onRecoverableError,A=0;A<c.length;A++){var b=c[A];v(b.value,{componentStack:b.stack})}}finally{J.T=r,ae.p=y}}(co&3)!==0&&pc(),Oi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===dh?pl++:(pl=0,dh=i):pl=0,ml(0)}}function Sv(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Qa(r)))}function pc(){return _v(),Ev(),Tv(),Av()}function Av(){if(Lt!==5)return!1;var i=Ko,r=ch;ch=0;var a=Ji(co),c=J.T,y=ae.p;try{ae.p=32>a?32:a,J.T=null,a=fh,fh=null;var v=Ko,A=co;if(Lt=0,qs=Ko=null,co=0,(Xe&6)!==0)throw Error(o(331));var b=Xe;if(Xe|=4,ov(v.current),tv(v,v.current,A,a),Xe=b,ml(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Wn,v)}catch{}return!0}finally{ae.p=y,J.T=c,Sv(i,r)}}function Cv(i,r,a){r=zn(a,r),r=Hd(i.stateNode,r,2),i=Bo(i,r,2),i!==null&&(Tr(i,2),Oi(i))}function et(i,r,a){if(i.tag===3)Cv(i,i,a);else for(;r!==null;){if(r.tag===3){Cv(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Yo===null||!Yo.has(c))){i=zn(a,i),a=wy(2),c=Bo(r,a,2),c!==null&&(Iy(a,c,r,i),Tr(c,2),Oi(c));break}}r=r.return}}function mh(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new bw;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(ah=!0,y.add(a),i=Dw.bind(null,i,r,a),r.then(i,i))}function Dw(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,st===i&&(Oe&a)===a&&(vt===4||vt===3&&(Oe&62914560)===Oe&&300>an()-lc?(Xe&2)===0&&zs(i,0):lh|=a,Fs===Oe&&(Fs=0)),Oi(i)}function wv(i,r){r===0&&(r=cu()),i=kr(i,r),i!==null&&(Tr(i,r),Oi(i))}function Vw(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),wv(i,a)}function Pw(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(r),wv(i,a)}function kw(i,r){return Ut(i,r)}var mc=null,Hs=null,gh=!1,gc=!1,yh=!1,$o=0;function Oi(i){i!==Hs&&i.next===null&&(Hs===null?mc=Hs=i:Hs=Hs.next=i),gc=!0,gh||(gh=!0,Lw())}function ml(i,r){if(!yh&&gc){yh=!0;do for(var a=!1,c=mc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,b=c.pingedLanes;v=(1<<31-_t(42|i)+1)-1,v&=y&~(A&~b),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,xv(c,v))}else v=Oe,v=Ei(c,c===st?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||jn(c,v)||(a=!0,xv(c,v));c=c.next}while(a);yh=!1}}function Uw(){Iv()}function Iv(){gc=gh=!1;var i=0;$o!==0&&Jw()&&(i=$o);for(var r=an(),a=null,c=mc;c!==null;){var y=c.next,v=bv(c,r);v===0?(c.next=null,a===null?mc=y:a.next=y,y===null&&(Hs=a)):(a=c,(i!==0||(v&3)!==0)&&(gc=!0)),c=y}Lt!==0&&Lt!==5||ml(i),$o!==0&&($o=0)}function bv(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-_t(v),b=1<<A,U=y[A];U===-1?((b&a)===0||(b&c)!==0)&&(y[A]=Kf(b,r)):U<=r&&(i.expiredLanes|=b),v&=~b}if(r=st,a=Oe,a=Ei(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(je===2||je===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&So(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||jn(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&So(c),Ji(a)){case 2:case 8:a=wa;break;case 32:a=Ao;break;case 268435456:a=ru;break;default:a=Ao}return c=Rv.bind(null,i),a=Ut(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&So(c),i.callbackPriority=2,i.callbackNode=null,2}function Rv(i,r){if(Lt!==0&&Lt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(pc()&&i.callbackNode!==a)return null;var c=Oe;return c=Ei(i,i===st?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(uv(i,c,r),bv(i,an()),i.callbackNode!=null&&i.callbackNode===a?Rv.bind(null,i):null)}function xv(i,r){if(pc())return null;uv(i,r,!0)}function Lw(){Qw(function(){(Xe&6)!==0?Ut(Ca,Uw):Iv()})}function vh(){if($o===0){var i=xs;i===0&&(i=vi,vi<<=1,(vi&261888)===0&&(vi=256)),$o=i}return $o}function Nv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ps(""+i)}function Mv(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function Ow(i,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var v=Nv((y[qt]||null).action),A=c.submitter;A&&(r=(r=A[qt]||null)?Nv(r.formAction):A.getAttribute("formAction"),r!==null&&(v=r,A=null));var b=new Mi("action","action",null,c,y);i.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if($o!==0){var U=A?Mv(y,A):new FormData(y);Od(a,{pending:!0,data:U,method:y.method,action:v},null,U)}}else typeof v=="function"&&(b.preventDefault(),U=A?Mv(y,A):new FormData(y),Od(a,{pending:!0,data:U,method:y.method,action:v},v,U))},currentTarget:y}]})}}for(var _h=0;_h<td.length;_h++){var Eh=td[_h],Bw=Eh.toLowerCase(),Fw=Eh[0].toUpperCase()+Eh.slice(1);ai(Bw,"on"+Fw)}ai(lg,"onAnimationEnd"),ai(ug,"onAnimationIteration"),ai(cg,"onAnimationStart"),ai("dblclick","onDoubleClick"),ai("focusin","onFocus"),ai("focusout","onBlur"),ai(nw,"onTransitionRun"),ai(iw,"onTransitionStart"),ai(ow,"onTransitionCancel"),ai(fg,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function Dv(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var A=c.length-1;0<=A;A--){var b=c[A],U=b.instance,K=b.currentTarget;if(b=b.listener,U!==v&&y.isPropagationStopped())break e;v=b,y.currentTarget=K;try{v(y)}catch(j){Mu(j)}y.currentTarget=null,v=U}else for(A=0;A<c.length;A++){if(b=c[A],U=b.instance,K=b.currentTarget,b=b.listener,U!==v&&y.isPropagationStopped())break e;v=b,y.currentTarget=K;try{v(y)}catch(j){Mu(j)}y.currentTarget=null,v=U}}}}function Le(i,r){var a=r[us];a===void 0&&(a=r[us]=new Set);var c=i+"__bubble";a.has(c)||(Vv(r,i,2,!1),a.add(c))}function Th(i,r,a){var c=0;r&&(c|=4),Vv(a,i,c,r)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Sh(i){if(!i[yc]){i[yc]=!0,Ra.forEach(function(a){a!=="selectionchange"&&(qw.has(a)||Th(a,!1,i),Th(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[yc]||(r[yc]=!0,Th("selectionchange",!1,r))}}function Vv(i,r,a,c){switch(l_(r)){case 2:var y=mI;break;case 8:y=gI;break;default:y=Lh}a=y.bind(null,r,a,i),y=void 0,!br||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Ah(i,r,a,c,y){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var b=c.stateNode.containerInfo;if(b===y)break;if(A===4)for(A=c.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;b!==null;){if(A=Ci(b),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){c=v=A;continue e}b=b.parentNode}}c=c.return}xo(function(){var K=v,j=On(a),ie=[];e:{var $=dg.get(i);if($!==void 0){var X=Mi,me=i;switch(i){case"keypress":if(xr(a)===0)break e;case"keydown":case"keyup":X=Ru;break;case"focusin":me="focus",X=Mr;break;case"focusout":me="blur",X=Mr;break;case"beforeblur":case"afterblur":X=Mr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=qa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=S;break;case lg:case ug:case cg:X=Tu;break;case fg:X=R;break;case"scroll":case"scrollend":X=Fa;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=Su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Xi;break;case"toggle":case"beforetoggle":X=Ne}var Se=(r&4)!==0,ot=!Se&&(i==="scroll"||i==="scrollend"),z=Se?$!==null?$+"Capture":null:$;Se=[];for(var B=K,Y;B!==null;){var te=B;if(Y=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||Y===null||z===null||(te=ii(B,z),te!=null&&Se.push(yl(B,te,Y))),ot)break;B=B.return}0<Se.length&&($=new X($,me,null,a,j),ie.push({event:$,listeners:Se}))}}if((r&7)===0){e:{if($=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",$&&a!==La&&(me=a.relatedTarget||a.fromElement)&&(Ci(me)||me[Si]))break e;if((X||$)&&($=j.window===j?j:($=j.ownerDocument)?$.defaultView||$.parentWindow:window,X?(me=a.relatedTarget||a.toElement,X=K,me=me?Ci(me):null,me!==null&&(ot=l(me),Se=me.tag,me!==ot||Se!==5&&Se!==27&&Se!==6)&&(me=null)):(X=null,me=K),X!==me)){if(Se=qa,te="onMouseLeave",z="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(Se=Xi,te="onPointerLeave",z="onPointerEnter",B="pointer"),ot=X==null?$:An(X),Y=me==null?$:An(me),$=new Se(te,B+"leave",X,a,j),$.target=ot,$.relatedTarget=Y,te=null,Ci(j)===K&&(Se=new Se(z,B+"enter",me,a,j),Se.target=Y,Se.relatedTarget=ot,te=Se),ot=te,X&&me)t:{for(Se=zw,z=X,B=me,Y=0,te=z;te;te=Se(te))Y++;te=0;for(var Ee=B;Ee;Ee=Se(Ee))te++;for(;0<Y-te;)z=Se(z),Y--;for(;0<te-Y;)B=Se(B),te--;for(;Y--;){if(z===B||B!==null&&z===B.alternate){Se=z;break t}z=Se(z),B=Se(B)}Se=null}else Se=null;X!==null&&Pv(ie,$,X,Se,!1),me!==null&&ot!==null&&Pv(ie,ot,me,Se,!0)}}e:{if($=K?An(K):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var Ye=Zm;else if(Qm($))if(Wm)Ye=jC;else{Ye=ZC;var ye=XC}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&hs(K.elementType)&&(Ye=Zm):Ye=WC;if(Ye&&(Ye=Ye(i,K))){Xm(ie,Ye,a,j);break e}ye&&ye(i,$,K),i==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&Pa($,"number",$.value)}switch(ye=K?An(K):window,i){case"focusin":(Qm(ye)||ye.contentEditable==="true")&&(Ts=ye,Wf=K,Ka=null);break;case"focusout":Ka=Wf=Ts=null;break;case"mousedown":jf=!0;break;case"contextmenu":case"mouseup":case"dragend":jf=!1,sg(ie,a,j);break;case"selectionchange":if(tw)break;case"keydown":case"keyup":sg(ie,a,j)}var De;if(Qe)e:{switch(i){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Es?Dr(i,a)&&(Be="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Pi&&a.locale!=="ko"&&(Es||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Es&&(De=Ba()):(Ni=j,Oa="value"in Ni?Ni.value:Ni.textContent,Es=!0)),ye=vc(K,Be),0<ye.length&&(Be=new Vi(Be,i,null,a,j),ie.push({event:Be,listeners:ye}),De?Be.data=De:(De=_s(a),De!==null&&(Be.data=De)))),(De=Fn?KC(i,a):JC(i,a))&&(Be=vc(K,"onBeforeInput"),0<Be.length&&(ye=new Vi("onBeforeInput","beforeinput",null,a,j),ie.push({event:ye,listeners:Be}),ye.data=De)),Ow(ie,i,K,a,j)}Dv(ie,r)})}function yl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function vc(i,r){for(var a=r+"Capture",c=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=ii(i,a),y!=null&&c.unshift(yl(i,y,v)),y=ii(i,r),y!=null&&c.push(yl(i,y,v))),i.tag===3)return c;i=i.return}return[]}function zw(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Pv(i,r,a,c,y){for(var v=r._reactName,A=[];a!==null&&a!==c;){var b=a,U=b.alternate,K=b.stateNode;if(b=b.tag,U!==null&&U===c)break;b!==5&&b!==26&&b!==27||K===null||(U=K,y?(K=ii(a,v),K!=null&&A.unshift(yl(a,K,U))):y||(K=ii(a,v),K!=null&&A.push(yl(a,K,U)))),a=a.return}A.length!==0&&i.push({event:r,listeners:A})}var Gw=/\r\n?/g,Hw=/\u0000|\uFFFD/g;function kv(i){return(typeof i=="string"?i:""+i).replace(Gw,`
`).replace(Hw,"")}function Uv(i,r){return r=kv(r),kv(i)===r}function it(i,r,a,c,y,v){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||pn(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&pn(i,""+c);break;case"className":Cn(i,"class",c);break;case"tabIndex":Cn(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(i,a,c);break;case"style":Ua(i,c,v);break;case"data":if(r!=="object"){Cn(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=ps(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(r!=="input"&&it(i,r,"name",y.name,y,null),it(i,r,"formEncType",y.formEncType,y,null),it(i,r,"formMethod",y.formMethod,y,null),it(i,r,"formTarget",y.formTarget,y,null)):(it(i,r,"encType",y.encType,y,null),it(i,r,"method",y.method,y,null),it(i,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=ps(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=ni);break;case"onScroll":c!=null&&Le("scroll",i);break;case"onScrollEnd":c!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=ps(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Le("beforetoggle",i),Le("toggle",i),fs(i,"popover",c);break;case"xlinkActuate":bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":bt(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":bt(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":bt(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":bt(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":fs(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=vu.get(a)||a,fs(i,a,c))}}function Ch(i,r,a,c,y,v){switch(a){case"style":Ua(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof c=="string"?pn(i,c):(typeof c=="number"||typeof c=="bigint")&&pn(i,""+c);break;case"onScroll":c!=null&&Le("scroll",i);break;case"onScrollEnd":c!=null&&Le("scrollend",i);break;case"onClick":c!=null&&(i.onclick=ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),v=i[qt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(r,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):fs(i,a,c)}}}function Zt(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:it(i,r,v,A,a,null)}}y&&it(i,r,"srcSet",a.srcSet,a,null),c&&it(i,r,"src",a.src,a,null);return;case"input":Le("invalid",i);var b=v=A=y=null,U=null,K=null;for(c in a)if(a.hasOwnProperty(c)){var j=a[c];if(j!=null)switch(c){case"name":y=j;break;case"type":A=j;break;case"checked":U=j;break;case"defaultChecked":K=j;break;case"value":v=j;break;case"defaultValue":b=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(o(137,r));break;default:it(i,r,c,j,a,null)}}mu(i,v,b,U,K,A,y,!1);return;case"select":Le("invalid",i),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(b=a[y],b!=null))switch(y){case"value":v=b;break;case"defaultValue":A=b;break;case"multiple":c=b;default:it(i,r,y,b,a,null)}r=v,a=A,i.multiple=!!c,r!=null?wo(i,!!c,r,!1):a!=null&&wo(i,!!c,a,!0);return;case"textarea":Le("invalid",i),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(b=a[A],b!=null))switch(A){case"value":c=b;break;case"defaultValue":y=b;break;case"children":v=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(o(91));break;default:it(i,r,A,b,a,null)}Io(i,c,y,v);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(c=a[U],c!=null))switch(U){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:it(i,r,U,c,a,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(c=0;c<gl.length;c++)Le(gl[c],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(c=a[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:it(i,r,K,c,a,null)}return;default:if(hs(r)){for(j in a)a.hasOwnProperty(j)&&(c=a[j],c!==void 0&&Ch(i,r,j,c,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(c=a[b],c!=null&&it(i,r,b,c,a,null))}function Yw(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,b=null,U=null,K=null,j=null;for(X in a){var ie=a[X];if(a.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":U=ie;default:c.hasOwnProperty(X)||it(i,r,X,null,c,ie)}}for(var $ in c){var X=c[$];if(ie=a[$],c.hasOwnProperty($)&&(X!=null||ie!=null))switch($){case"type":v=X;break;case"name":y=X;break;case"checked":K=X;break;case"defaultChecked":j=X;break;case"value":A=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,r));break;default:X!==ie&&it(i,r,$,X,c,ie)}}ds(i,A,b,U,K,j,v,y);return;case"select":X=A=b=$=null;for(v in a)if(U=a[v],a.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":X=U;default:c.hasOwnProperty(v)||it(i,r,v,null,c,U)}for(y in c)if(v=c[y],U=a[y],c.hasOwnProperty(y)&&(v!=null||U!=null))switch(y){case"value":$=v;break;case"defaultValue":b=v;break;case"multiple":A=v;default:v!==U&&it(i,r,y,v,c,U)}r=b,a=A,c=X,$!=null?wo(i,!!a,$,!1):!!c!=!!a&&(r!=null?wo(i,!!a,r,!0):wo(i,!!a,a?[]:"",!1));return;case"textarea":X=$=null;for(b in a)if(y=a[b],a.hasOwnProperty(b)&&y!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(i,r,b,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":$=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==v&&it(i,r,A,y,c,v)}gu(i,$,X);return;case"option":for(var me in a)if($=a[me],a.hasOwnProperty(me)&&$!=null&&!c.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:it(i,r,me,null,c,$)}for(U in c)if($=c[U],X=a[U],c.hasOwnProperty(U)&&$!==X&&($!=null||X!=null))switch(U){case"selected":i.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:it(i,r,U,$,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)$=a[Se],a.hasOwnProperty(Se)&&$!=null&&!c.hasOwnProperty(Se)&&it(i,r,Se,null,c,$);for(K in c)if($=c[K],X=a[K],c.hasOwnProperty(K)&&$!==X&&($!=null||X!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(o(137,r));break;default:it(i,r,K,$,c,X)}return;default:if(hs(r)){for(var ot in a)$=a[ot],a.hasOwnProperty(ot)&&$!==void 0&&!c.hasOwnProperty(ot)&&Ch(i,r,ot,void 0,c,$);for(j in c)$=c[j],X=a[j],!c.hasOwnProperty(j)||$===X||$===void 0&&X===void 0||Ch(i,r,j,$,c,X);return}}for(var z in a)$=a[z],a.hasOwnProperty(z)&&$!=null&&!c.hasOwnProperty(z)&&it(i,r,z,null,c,$);for(ie in c)$=c[ie],X=a[ie],!c.hasOwnProperty(ie)||$===X||$==null&&X==null||it(i,r,ie,$,c,X)}function Lv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Kw(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,b=y.duration;if(v&&b&&Lv(A)){for(A=0,b=y.responseEnd,c+=1;c<a.length;c++){var U=a[c],K=U.startTime;if(K>b)break;var j=U.transferSize,ie=U.initiatorType;j&&Lv(ie)&&(U=U.responseEnd,A+=j*(U<b?1:(b-K)/(U-K)))}if(--c,r+=8*(v+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var wh=null,Ih=null;function _c(i){return i.nodeType===9?i:i.ownerDocument}function Ov(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bv(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function bh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Rh=null;function Jw(){var i=window.event;return i&&i.type==="popstate"?i===Rh?!1:(Rh=i,!0):(Rh=null,!1)}var Fv=typeof setTimeout=="function"?setTimeout:void 0,$w=typeof clearTimeout=="function"?clearTimeout:void 0,qv=typeof Promise=="function"?Promise:void 0,Qw=typeof queueMicrotask=="function"?queueMicrotask:typeof qv<"u"?function(i){return qv.resolve(null).then(i).catch(Xw)}:Fv;function Xw(i){setTimeout(function(){throw i})}function Qo(i){return i==="head"}function zv(i,r){var a=r,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),$s(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")vl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,vl(a);for(var v=a.firstChild;v;){var A=v.nextSibling,b=v.nodeName;v[Ai]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&vl(i.ownerDocument.body);a=y}while(a);$s(r)}function Gv(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function xh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":xh(a),cs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function Zw(i,r,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Ai])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Jn(i.nextSibling),i===null)break}return null}function Ww(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Jn(i.nextSibling),i===null))return null;return i}function Hv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Jn(i.nextSibling),i===null))return null;return i}function Nh(i){return i.data==="$?"||i.data==="$~"}function Mh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function jw(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Jn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Dh=null;function Yv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Jn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function Kv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function Jv(i,r,a){switch(r=_c(a),i){case"html":if(i=r.documentElement,!i)throw Error(o(452));return i;case"head":if(i=r.head,!i)throw Error(o(453));return i;case"body":if(i=r.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function vl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);cs(i)}var $n=new Map,$v=new Set;function Ec(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var fo=ae.d;ae.d={f:eI,r:tI,D:nI,C:iI,L:oI,m:rI,X:aI,S:sI,M:lI};function eI(){var i=fo.f(),r=fc();return i||r}function tI(i){var r=Ln(i);r!==null&&r.tag===5&&r.type==="form"?fy(r):fo.r(i)}var Ys=typeof document>"u"?null:document;function Qv(i,r,a){var c=Ys;if(c&&typeof r=="string"&&r){var y=hn(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),$v.has(y)||($v.add(y),i={rel:i,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),Zt(r,"link",i),It(r),c.head.appendChild(r)))}}function nI(i){fo.D(i),Qv("dns-prefetch",i,null)}function iI(i,r){fo.C(i,r),Qv("preconnect",i,r)}function oI(i,r,a){fo.L(i,r,a);var c=Ys;if(c&&i&&r){var y='link[rel="preload"][as="'+hn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+hn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+hn(a.imageSizes)+'"]')):y+='[href="'+hn(i)+'"]';var v=y;switch(r){case"style":v=Ks(i);break;case"script":v=Js(i)}$n.has(v)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),$n.set(v,i),c.querySelector(y)!==null||r==="style"&&c.querySelector(_l(v))||r==="script"&&c.querySelector(El(v))||(r=c.createElement("link"),Zt(r,"link",i),It(r),c.head.appendChild(r)))}}function rI(i,r){fo.m(i,r);var a=Ys;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+hn(c)+'"][href="'+hn(i)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Js(i)}if(!$n.has(v)&&(i=E({rel:"modulepreload",href:i},r),$n.set(v,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(El(v)))return}c=a.createElement("link"),Zt(c,"link",i),It(c),a.head.appendChild(c)}}}function sI(i,r,a){fo.S(i,r,a);var c=Ys;if(c&&i){var y=wi(c).hoistableStyles,v=Ks(i);r=r||"default";var A=y.get(v);if(!A){var b={loading:0,preload:null};if(A=c.querySelector(_l(v)))b.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=$n.get(v))&&Vh(i,a);var U=A=c.createElement("link");It(U),Zt(U,"link",i),U._p=new Promise(function(K,j){U.onload=K,U.onerror=j}),U.addEventListener("load",function(){b.loading|=1}),U.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Tc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:b},y.set(v,A)}}}function aI(i,r){fo.X(i,r);var a=Ys;if(a&&i){var c=wi(a).hoistableScripts,y=Js(i),v=c.get(y);v||(v=a.querySelector(El(y)),v||(i=E({src:i,async:!0},r),(r=$n.get(y))&&Ph(i,r),v=a.createElement("script"),It(v),Zt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function lI(i,r){fo.M(i,r);var a=Ys;if(a&&i){var c=wi(a).hoistableScripts,y=Js(i),v=c.get(y);v||(v=a.querySelector(El(y)),v||(i=E({src:i,async:!0,type:"module"},r),(r=$n.get(y))&&Ph(i,r),v=a.createElement("script"),It(v),Zt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function Xv(i,r,a,c){var y=(y=we.current)?Ec(y):null;if(!y)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Ks(a.href),a=wi(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Ks(a.href);var v=wi(y).hoistableStyles,A=v.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=y.querySelector(_l(i)))&&!v._p&&(A.instance=v,A.state.loading=5),$n.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},$n.set(i,a),v||uI(y,i,a,A.state))),r&&c===null)throw Error(o(528,""));return A}if(r&&c!==null)throw Error(o(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Js(a),a=wi(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Ks(i){return'href="'+hn(i)+'"'}function _l(i){return'link[rel="stylesheet"]['+i+"]"}function Zv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function uI(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Zt(r,"link",a),It(r),i.head.appendChild(r))}function Js(i){return'[src="'+hn(i)+'"]'}function El(i){return"script[async]"+i}function Wv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+hn(a.href)+'"]');if(c)return r.instance=c,It(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),It(c),Zt(c,"style",y),Tc(c,a.precedence,i),r.instance=c;case"stylesheet":y=Ks(a.href);var v=i.querySelector(_l(y));if(v)return r.state.loading|=4,r.instance=v,It(v),v;c=Zv(a),(y=$n.get(y))&&Vh(c,y),v=(i.ownerDocument||i).createElement("link"),It(v);var A=v;return A._p=new Promise(function(b,U){A.onload=b,A.onerror=U}),Zt(v,"link",c),r.state.loading|=4,Tc(v,a.precedence,i),r.instance=v;case"script":return v=Js(a.src),(y=i.querySelector(El(v)))?(r.instance=y,It(y),y):(c=a,(y=$n.get(v))&&(c=E({},a),Ph(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),It(y),Zt(y,"link",c),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Tc(c,a.precedence,i));return r.instance}function Tc(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var b=c[A];if(b.dataset.precedence===r)v=b;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Vh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Ph(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Sc=null;function jv(i,r,a){if(Sc===null){var c=new Map,y=Sc=new Map;y.set(a,c)}else y=Sc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[Ai]||v[wt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(r)||"";A=i+A;var b=c.get(A);b?b.push(v):c.set(A,[v])}}return c}function e_(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function cI(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function t_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function fI(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Ks(c.href),v=r.querySelector(_l(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Ac.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=v,It(v);return}v=r.ownerDocument||r,c=Zv(c),(y=$n.get(y))&&Vh(c,y),v=v.createElement("link"),It(v);var A=v;A._p=new Promise(function(b,U){A.onload=b,A.onerror=U}),Zt(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Ac.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var kh=0;function dI(i,r){return i.stylesheets&&i.count===0&&wc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&wc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&kh===0&&(kh=62500*Kw());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&wc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>kh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Ac(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Cc=null;function wc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Cc=new Map,r.forEach(hI,i),Cc=null,Ac.call(i))}function hI(i,r){if(!(r.state.loading&4)){var a=Cc.get(i);if(a)var c=a.get(null);else{a=new Map,Cc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=Ac.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Tl={$$typeof:W,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function pI(i,r,a,c,y,v,A,b,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function n_(i,r,a,c,y,v,A,b,U,K,j,ie){return i=new pI(i,r,a,A,U,K,j,ie,b),r=1,v===!0&&(r|=24),v=In(3,null,null,r),i.current=v,v.stateNode=i,r=pd(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:r},vd(v),i}function i_(i){return i?(i=Cs,i):Cs}function o_(i,r,a,c,y,v){y=i_(y),c.context===null?c.context=y:c.pendingContext=y,c=Oo(r),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=Bo(i,c,r),a!==null&&(_n(a,i,r),ja(a,i,r))}function r_(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function Uh(i,r){r_(i,r),(i=i.alternate)&&r_(i,r)}function s_(i){if(i.tag===13||i.tag===31){var r=kr(i,67108864);r!==null&&_n(r,i,67108864),Uh(i,67108864)}}function a_(i){if(i.tag===13||i.tag===31){var r=Mn();r=Ar(r);var a=kr(i,r);a!==null&&_n(a,i,r),Uh(i,r)}}var Ic=!0;function mI(i,r,a,c){var y=J.T;J.T=null;var v=ae.p;try{ae.p=2,Lh(i,r,a,c)}finally{ae.p=v,J.T=y}}function gI(i,r,a,c){var y=J.T;J.T=null;var v=ae.p;try{ae.p=8,Lh(i,r,a,c)}finally{ae.p=v,J.T=y}}function Lh(i,r,a,c){if(Ic){var y=Oh(c);if(y===null)Ah(i,r,c,bc,a),u_(i,c);else if(vI(y,i,r,a,c))c.stopPropagation();else if(u_(i,c),r&4&&-1<yI.indexOf(i)){for(;y!==null;){var v=Ln(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=_i(v.pendingLanes);if(A!==0){var b=v;for(b.pendingLanes|=2,b.entangledLanes|=2;A;){var U=1<<31-_t(A);b.entanglements[1]|=U,A&=~U}Oi(v),(Xe&6)===0&&(uc=an()+500,ml(0))}}break;case 31:case 13:b=kr(v,2),b!==null&&_n(b,v,2),fc(),Uh(v,2)}if(v=Oh(c),v===null&&Ah(i,r,c,bc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else Ah(i,r,c,null,a)}}function Oh(i){return i=On(i),Bh(i)}var bc=null;function Bh(i){if(bc=null,i=Ci(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return bc=i,null}function l_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_r()){case Ca:return 2;case wa:return 8;case Ao:case Yf:return 32;case ru:return 268435456;default:return 32}default:return 32}}var Fh=!1,Xo=null,Zo=null,Wo=null,Sl=new Map,Al=new Map,jo=[],yI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u_(i,r){switch(i){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":Wo=null;break;case"pointerover":case"pointerout":Sl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(r.pointerId)}}function Cl(i,r,a,c,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},r!==null&&(r=Ln(r),r!==null&&s_(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function vI(i,r,a,c,y){switch(r){case"focusin":return Xo=Cl(Xo,i,r,a,c,y),!0;case"dragenter":return Zo=Cl(Zo,i,r,a,c,y),!0;case"mouseover":return Wo=Cl(Wo,i,r,a,c,y),!0;case"pointerover":var v=y.pointerId;return Sl.set(v,Cl(Sl.get(v)||null,i,r,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,Al.set(v,Cl(Al.get(v)||null,i,r,a,c,y)),!0}return!1}function c_(i){var r=Ci(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,ei(i.priority,function(){a_(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,ei(i.priority,function(){a_(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Rc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=Oh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);La=c,a.target.dispatchEvent(c),La=null}else return r=Ln(a),r!==null&&s_(r),i.blockedOn=a,!1;r.shift()}return!0}function f_(i,r,a){Rc(i)&&a.delete(r)}function _I(){Fh=!1,Xo!==null&&Rc(Xo)&&(Xo=null),Zo!==null&&Rc(Zo)&&(Zo=null),Wo!==null&&Rc(Wo)&&(Wo=null),Sl.forEach(f_),Al.forEach(f_)}function xc(i,r){i.blockedOn===r&&(i.blockedOn=null,Fh||(Fh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,_I)))}var Nc=null;function d_(i){Nc!==i&&(Nc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Nc===i&&(Nc=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],y=i[r+2];if(typeof c!="function"){if(Bh(c||a)===null)continue;break}var v=Ln(a);v!==null&&(i.splice(r,3),r-=3,Od(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function $s(i){function r(U){return xc(U,i)}Xo!==null&&xc(Xo,i),Zo!==null&&xc(Zo,i),Wo!==null&&xc(Wo,i),Sl.forEach(r),Al.forEach(r);for(var a=0;a<jo.length;a++){var c=jo[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<jo.length&&(a=jo[0],a.blockedOn===null);)c_(a),a.blockedOn===null&&jo.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[qt]||null;if(typeof v=="function")A||d_(a);else if(A){var b=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[qt]||null)b=A.formAction;else if(Bh(y)!==null)continue}else b=A.action;typeof b=="function"?a[c+1]=b:(a.splice(c,3),c-=3),d_(a)}}}function h_(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function qh(i){this._internalRoot=i}Mc.prototype.render=qh.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(o(409));var a=r.current,c=Mn();o_(a,c,i,r,null,null)},Mc.prototype.unmount=qh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;o_(i.current,2,null,i,null,null),fc(),r[Si]=null}};function Mc(i){this._internalRoot=i}Mc.prototype.unstable_scheduleHydration=function(i){if(i){var r=fu();i={blockedOn:null,target:i,priority:r};for(var a=0;a<jo.length&&r!==0&&r<jo[a].priority;a++);jo.splice(a,0,i),a===0&&c_(i)}};var p_=e.version;if(p_!=="19.2.3")throw Error(o(527,p_,"19.2.3"));ae.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=p(r),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var EI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{Wn=Dc.inject(EI),Kt=Dc}catch{}}return Il.createRoot=function(i,r){if(!s(i))throw Error(o(299));var a=!1,c="",y=Ty,v=Sy,A=Ay;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=n_(i,1,!1,null,null,a,c,null,y,v,A,h_),i[Si]=r.current,Sh(i),new qh(r)},Il.hydrateRoot=function(i,r,a){if(!s(i))throw Error(o(299));var c=!1,y="",v=Ty,A=Sy,b=Ay,U=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=n_(i,1,!0,r,a??null,c,y,U,v,A,b,h_),r.context=i_(null),a=r.current,c=Mn(),c=Ar(c),y=Oo(c),y.callback=null,Bo(a,y,c),a=c,r.current.lanes=a,Tr(r,a),Oi(r),i[Si]=r.current,Sh(i),new Mc(r)},Il.version="19.2.3",Il}var C_;function NI(){if(C_)return Hh.exports;C_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hh.exports=xI(),Hh.exports}var MI=NI();const DI=UT(MI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PI=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),w_=t=>{const e=PI(t);return e.charAt(0).toUpperCase()+e.slice(1)},OT=(...t)=>t.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim(),kI=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=ve.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:s="",children:l,iconNode:u,...d},g)=>ve.createElement("svg",{ref:g,...UI,width:e,height:e,stroke:t,strokeWidth:o?Number(n)*24/Number(e):n,className:OT("lucide",s),...!l&&!kI(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,_])=>ve.createElement(p,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=(t,e)=>{const n=ve.forwardRef(({className:o,...s},l)=>ve.createElement(LI,{ref:l,iconNode:e,className:OT(`lucide-${VI(w_(t))}`,`lucide-${t}`,o),...s}));return n.displayName=w_(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],BI=Ft("check",OI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qI=Ft("circle-question-mark",FI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],GI=Ft("external-link",zI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YI=Ft("eye",HI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],JI=Ft("image",KI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],QI=Ft("loader-circle",$I);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ZI=Ft("mail",XI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],jI=Ft("music",WI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],I_=Ft("newspaper",eb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],nb=Ft("refresh-cw",tb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ob=Ft("send",ib);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],sb=Ft("sparkles",rb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lb=Ft("square-pen",ab);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],cb=Ft("star",ub);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],BT=Ft("ticket",fb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],b_=Ft("trash-2",db);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],pb=Ft("tv",hb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gb=Ft("user",mb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vc=Ft("x",yb),FT=({rating:t,maxRating:e=5,onRate:n,readOnly:o=!1,size:s=24})=>{const[l,u]=ve.useState(null),d=l!==null?l:t;return w.jsx("div",{className:"flex space-x-1",children:Array.from({length:e}).map((g,p)=>{const _=p+1,E=_<=d;return w.jsx("button",{type:"button",disabled:o,onClick:()=>!o&&n&&n(_),onMouseEnter:()=>!o&&u(_),onMouseLeave:()=>!o&&u(null),className:"focus:outline-none",children:w.jsx(cb,{size:s,className:`${E?"fill-yellow-400 text-yellow-400":"fill-transparent text-neutral-700"}`,strokeWidth:E?0:2})},p)})})},vb=["Aksiyon","Bilim Kurgu","Drama","Komedi","Korku","Macera","Romantik","Gerilim","Animasyon","Belgesel","Fantastik","Suc","Gizem","Savas","Western"],qT=({isOpen:t,onClose:e,onSubmit:n,isSubmitting:o,initialTitle:s="",editMovie:l})=>{const[u,d]=ve.useState("watched"),[g,p]=ve.useState(""),[_,E]=ve.useState(""),[T,I]=ve.useState(0),[V,O]=ve.useState(""),[P,G]=ve.useState(""),[Z,W]=ve.useState(""),[se,ee]=ve.useState([]),[ce,N]=ve.useState(""),[M,x]=ve.useState(""),[L,k]=ve.useState(null),q=ve.useRef(null);ve.useEffect(()=>{t&&(l?(p(l.title),E(l.imdbUrl||""),k(l.posterBase64||null),d(l.status),I(l.userRating||0),O(l.userReview||""),G(l.year!=="???"?l.year:""),W(l.director!=="Bilinmiyor"?l.director:""),ee(l.genre&&l.genre[0]!=="Bilinmiyor"?l.genre:[]),N(l.summary!=="zet bulunamad."?l.summary:"")):(p(s),E(""),k(null),d("watched"),I(0),O(""),G(""),W(""),ee([]),N("")),x(""))},[t,s,l]);const D=J=>{var ge;const ae=(ge=J.target.files)==null?void 0:ge[0];if(ae){if(ae.size>5*1024*1024){x("DOSYA COK BUYUK (MAX 5MB)");return}const Ve=new FileReader;Ve.onloadend=()=>{k(Ve.result),x("")},Ve.readAsDataURL(ae)}},Pe=()=>{k(null),q.current&&(q.current.value="")};if(!t)return null;const rt=async J=>{if(J.preventDefault(),!g.trim()){x("FILM ADI GIRINIZ");return}if(u==="watched"&&T===0){x("PUAN VERINIZ");return}await n({rawTitle:g,status:u,userRating:u==="watched"?T:void 0,userReview:u==="watched"?V:void 0,imdbUrl:_.trim()||void 0,manualPosterBase64:L||void 0,manualYear:P.trim()||void 0,manualDirector:Z.trim()||void 0,manualGenres:se.length>0?se:void 0,manualSummary:ce.trim()||void 0}),!s&&!l&&(p(""),E(""),k(null),I(0),O(""),G(""),W(""),ee([]),N("")),x("")};return w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",children:w.jsxs("div",{className:"bg-black border-4 border-white w-full max-w-lg shadow-[20px_20px_0px_#222] relative max-h-[90vh] overflow-y-auto",children:[w.jsxs("div",{className:"bg-white text-black px-4 py-2 flex justify-between items-center font-bold text-xl sticky top-0 z-10",children:[w.jsx("span",{children:l?"> KAYIT DUZENLE":s?"> PUANLAMA EKRANI":"> YEN KAYIT EKLE"}),w.jsx("button",{onClick:e,disabled:o,className:"hover:bg-red-600 hover:text-white px-2",children:"[IKI]"})]}),!s&&!l&&w.jsxs("div",{className:"flex border-b-4 border-white",children:[w.jsx("button",{type:"button",onClick:()=>d("watched"),className:`flex-1 py-2 text-xl font-bold ${u==="watched"?"bg-red-600 text-white":"bg-neutral-900 text-neutral-500"}`,children:"ZLEDM [+]"}),w.jsx("button",{type:"button",onClick:()=>d("watchlist"),className:`flex-1 py-2 text-xl font-bold ${u==="watchlist"?"bg-green-600 text-white":"bg-neutral-900 text-neutral-500"}`,children:"ZLEYECEM [+]"})]}),w.jsxs("form",{onSubmit:rt,className:"p-6 space-y-6",children:[w.jsxs("div",{className:"flex gap-4",children:[w.jsxs("div",{className:"w-1/3",children:[w.jsxs("div",{onClick:()=>{var J;return(J=q.current)==null?void 0:J.click()},className:`aspect-[2/3] border-4 border-dashed ${L?"border-white":"border-neutral-700 hover:border-yellow-400"} flex flex-col items-center justify-center cursor-pointer bg-neutral-900`,children:[L?w.jsx("img",{src:L,alt:"Preview",className:"w-full h-full object-cover grayscale contrast-125"}):w.jsxs("div",{className:"text-center text-neutral-500 p-2",children:[w.jsx(JI,{className:"mx-auto mb-2"}),w.jsx("span",{className:"text-sm font-bold",children:"FOTO YUKLE"})]}),w.jsx("input",{type:"file",ref:q,onChange:D,accept:"image/*",className:"hidden",disabled:o})]}),L&&w.jsx("button",{type:"button",onClick:J=>{J.stopPropagation(),Pe()},className:"w-full bg-red-600 text-white text-sm font-bold mt-2",children:"SIL"})]}),w.jsxs("div",{className:"flex-1 space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-yellow-400 font-bold mb-1",children:"FILM ADI:"}),w.jsx("input",{type:"text",value:g,onChange:J=>p(J.target.value.toUpperCase()),className:"w-full bg-neutral-900 border-b-4 border-white text-white p-2 text-xl font-bold outline-none focus:bg-neutral-800 focus:border-yellow-400",placeholder:"ISIM GIRINIZ...",autoFocus:!0,disabled:o||!!s})]}),u==="watched"&&w.jsxs("div",{children:[w.jsx("label",{className:"block text-orange-400 font-bold mb-1",children:"YONETMEN:"}),w.jsx("input",{type:"text",value:Z,onChange:J=>W(J.target.value),className:"w-full bg-neutral-900 border-b-4 border-white text-white p-2 text-lg font-bold outline-none focus:bg-neutral-800 focus:border-orange-400",placeholder:"YONETMEN ADI...",disabled:o||!!s})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-cyan-400 font-bold mb-1",children:"IMDB LINK:"}),w.jsx("input",{type:"url",value:_,onChange:J=>E(J.target.value),className:"w-full bg-neutral-900 border-b-4 border-white text-white p-2 text-lg font-bold outline-none focus:bg-neutral-800 focus:border-cyan-400",placeholder:"HTTPS://...",disabled:o||!!s})]}),u==="watched"&&w.jsxs("div",{children:[w.jsx("label",{className:"block text-pink-500 font-bold mb-1",children:"TUR SEM:"}),w.jsxs("select",{value:se[0]||"",onChange:J=>ee(J.target.value?[J.target.value]:[]),className:"w-full bg-neutral-900 border-b-4 border-white text-white p-2 text-lg font-bold outline-none focus:bg-neutral-800 focus:border-pink-500 appearance-none",children:[w.jsx("option",{value:"",children:"TUR SECINIZ..."}),vb.map(J=>w.jsx("option",{value:J,children:J},J))]})]}),u==="watched"&&w.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-white font-bold mb-1",children:"YIL:"}),w.jsx("input",{type:"text",value:P,onChange:J=>G(J.target.value),className:"w-full bg-neutral-900 border-b-4 border-white text-white p-2 text-lg font-bold outline-none focus:bg-neutral-800 focus:border-white",placeholder:"2024",disabled:o||!!s})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-green-400 font-bold mb-1",children:"PUANLAMA:"}),w.jsx("div",{className:"bg-neutral-900 p-2 border-2 border-green-600 flex justify-center",children:w.jsx(FT,{rating:T,onRate:I,size:18,readOnly:o})})]})]}),u==="watched"&&w.jsxs("div",{children:[w.jsx("label",{className:"block text-purple-400 font-bold mb-1",children:"DETAY / ZET:"}),w.jsx("textarea",{value:ce,onChange:J=>N(J.target.value),rows:3,className:"w-full bg-neutral-900 border-2 border-white text-white p-2 font-bold outline-none focus:border-purple-400 resize-none",placeholder:"AI YERINE MANUEL OZET...",disabled:o||!!s})]}),u==="watched"&&w.jsxs("div",{children:[w.jsx("label",{className:"block text-fuchsia-500 font-bold mb-1",children:"YORUMUNUZ:"}),w.jsx("textarea",{value:V,onChange:J=>O(J.target.value.toUpperCase()),rows:3,className:"w-full bg-neutral-900 border-2 border-white text-white p-2 font-bold outline-none focus:border-fuchsia-500 resize-none",placeholder:"...",disabled:o})]})]})]}),M&&w.jsxs("div",{className:"bg-red-600 text-white p-2 font-bold blink text-center",children:["*** ",M," ***"]}),w.jsxs("div",{className:"flex gap-4 pt-2",children:[w.jsx("button",{type:"button",onClick:e,disabled:o,className:"flex-1 border-2 border-white text-white font-bold py-3 hover:bg-white hover:text-black",children:"PTAL"}),w.jsx("button",{type:"submit",disabled:o,className:`flex-1 font-bold py-3 text-white border-2 border-white ${o?"bg-neutral-700":"bg-yellow-400 text-black hover:bg-yellow-300"}`,children:o?"BEKLEYINIZ...":l?"GUNCELLE":"KAYDET"})]})]})]})})},zT=({movie:t,onDelete:e,onMoveToWatched:n,onDirectorClick:o,className:s=""})=>{const l=t.status==="watched";return w.jsxs("div",{className:`relative bg-black border-4 ${l?"border-white":"border-neutral-600"} flex flex-col sm:flex-row shadow-[8px_8px_0px_#333] ${s}`,children:[w.jsxs("div",{className:"w-full sm:w-[180px] aspect-[2/3] relative bg-neutral-900 border-b-4 sm:border-b-0 sm:border-r-4 border-white shrink-0 overflow-hidden group",children:[t.posterBase64?w.jsx("img",{src:t.posterBase64,alt:t.title,className:"w-full h-full object-cover contrast-125 saturate-150 pixelated",style:{imageRendering:"pixelated"}}):w.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-blue-800 text-white",children:[w.jsx("span",{className:"text-4xl",children:t.emoji}),w.jsx("span",{className:"text-sm mt-2 text-yellow-400",children:"NO IMAGE"})]}),l&&w.jsx("div",{className:`absolute top-0 left-0 text-black text-lg font-bold px-2 py-0.5 border-b-2 border-r-2 border-black ${l?"bg-yellow-400":"bg-cyan-400"}`,children:t.genre[0]})]}),w.jsxs("div",{className:"flex-1 p-5 flex flex-col relative bg-black gap-4 min-w-0",children:[w.jsxs("div",{className:"flex justify-between items-start gap-4",children:[w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("h3",{className:"text-3xl text-yellow-400 leading-none mb-2 font-bold uppercase tracking-wide break-words",children:t.title.toLocaleUpperCase("tr-TR")}),l&&w.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[w.jsx("span",{className:"text-lg text-green-400 font-bold uppercase",children:">"}),t.director.split(",").map((u,d,g)=>w.jsxs(LT.Fragment,{children:[w.jsx("button",{onClick:()=>o&&o(u.trim()),className:"text-lg text-green-400 hover:bg-green-400 hover:text-black transition-colors uppercase inline-block font-bold border-b border-transparent hover:border-black",disabled:!o,children:u.trim().toLocaleUpperCase("tr-TR")}),d<g.length-1&&w.jsx("span",{className:"text-green-400 font-bold",children:","})]},d))]})]}),l&&w.jsx("div",{className:"bg-white text-black px-3 py-1 text-2xl font-bold shrink-0 shadow-[4px_4px_0px_rgba(50,50,50,1)] h-fit",children:t.year})]}),l&&w.jsx("div",{className:"flex-1 text-white text-lg leading-tight py-1",children:t.summary}),w.jsx("div",{className:"mt-auto border-t-2 border-neutral-800 pt-4 flex flex-col gap-3",children:l?w.jsxs(w.Fragment,{children:[t.userReview&&w.jsxs("div",{className:"text-magenta-500 text-xl italic bg-neutral-900 p-3 border border-neutral-700",children:['"',t.userReview.toLocaleUpperCase("tr-TR"),'"']}),w.jsxs("div",{className:"flex flex-col xl:flex-row gap-3 items-stretch xl:items-center justify-between",children:[w.jsx("div",{className:"bg-black border-2 border-yellow-400 px-3 py-1 flex justify-center",children:w.jsx(FT,{rating:t.userRating||0,readOnly:!0,size:18})}),w.jsx("div",{className:"flex gap-3 flex-1 justify-end relative mr-1",children:t.imdbUrl&&w.jsx("a",{href:t.imdbUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 xl:flex-none bg-yellow-400 text-black px-4 py-1 text-lg font-bold hover:bg-white hover:text-black border-2 border-transparent transition-colors text-center",children:"IMDB"})})]})]}):null})]})]})},_b=({movie:t})=>w.jsxs("div",{className:"group relative bg-black border-4 border-neutral-700 shadow-[8px_8px_0px_#333] flex flex-col h-full hover:border-yellow-400 transition-colors",children:[w.jsx("div",{className:"w-full aspect-[2/3] relative bg-neutral-900 border-b-4 border-neutral-700 overflow-hidden",children:t.posterBase64?w.jsx("img",{src:t.posterBase64,alt:t.title,className:"w-full h-full object-cover contrast-125 saturate-150 pixelated group-hover:scale-105 transition-transform duration-500",style:{imageRendering:"pixelated"}}):w.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-blue-800 text-white p-4",children:[w.jsx("span",{className:"text-4xl",children:t.emoji||""}),w.jsx("span",{className:"text-xs mt-2 text-yellow-400 text-center font-bold",children:"NO IMAGE"})]})}),w.jsx("div",{className:"p-3 bg-black flex flex-col items-center justify-center flex-1",children:w.jsx("h3",{className:"text-xl text-yellow-400 leading-tight font-bold uppercase tracking-wide text-center line-clamp-2",children:t.title.toLocaleUpperCase("tr-TR")})})]}),Eb=["KO","BOA","KZLER","YENGE","ASLAN","BAAK","TERAZ","AKREP","YAY","OLAK","KOVA","BALIK"],Tb=({isOpen:t,onClose:e,movies:n})=>{const[o,s]=ve.useState(null),[l,u]=ve.useState(null),[d,g]=ve.useState(!1);if(!t)return null;const p=async _=>{s(_),g(!0),u(null),setTimeout(()=>{const E=n.filter(T=>T.status==="watched"&&T.isApproved!==!1);if(E.length>0){const T=E[Math.floor(Math.random()*E.length)];u(T)}g(!1)},1500)};return w.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/90 p-4",children:w.jsxs("div",{className:"w-full max-w-4xl bg-purple-900 border-4 border-yellow-400 p-1 shadow-[10px_10px_0px_#fff]",children:[w.jsxs("div",{className:"bg-yellow-400 text-purple-900 px-4 py-2 flex justify-between items-center font-bold text-2xl mb-4",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(sb,{}),w.jsx("span",{children:"ASTRO SNEMA - SAYFA 500"})]}),w.jsx("button",{onClick:e,className:"hover:bg-purple-900 hover:text-white px-2",children:"[IKI]"})]}),w.jsxs("div",{className:"flex flex-col md:flex-row gap-4 p-4",children:[w.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 w-full md:w-1/2",children:Eb.map(_=>w.jsx("button",{onClick:()=>p(_),disabled:d,className:`p-3 text-xl font-bold border-2 transition-all text-center
                            ${o===_?"bg-white text-purple-900 border-white blink":"bg-purple-800 text-yellow-400 border-purple-600 hover:border-yellow-400 hover:bg-purple-700"}`,children:_},_))}),w.jsxs("div",{className:"w-full md:w-1/2 bg-black border-2 border-white p-6 flex flex-col items-center justify-center min-h-[300px] text-center relative overflow-hidden",children:[!o&&w.jsxs("div",{className:"text-neutral-500 animate-pulse",children:[w.jsx("p",{className:"text-2xl mb-2",children:"LTFEN BURCUNUZU SENZ"}),w.jsx("p",{children:"---"})]}),d&&w.jsxs("div",{className:"text-yellow-400 flex flex-col items-center z-10",children:[w.jsx(QI,{className:"animate-spin w-12 h-12 mb-4"}),w.jsx("span",{className:"text-xl blink",children:"YILDIZLAR OKUNUYOR..."})]}),l&&!d&&w.jsxs("div",{className:"animate-in fade-in zoom-in duration-500 flex flex-col items-center w-full h-full justify-between",children:[w.jsxs("h3",{className:"text-2xl text-cyan-400 mb-2 border-b-2 border-cyan-400",children:[o," N NER:"]}),l.posterBase64&&w.jsx("img",{src:l.posterBase64,alt:l.title,className:"w-32 h-48 object-cover border-2 border-white mb-4 shadow-[4px_4px_0px_#333]"}),w.jsx("h2",{className:"text-3xl text-yellow-400 font-bold mb-2 break-words max-w-full",children:l.title}),w.jsx("div",{className:"text-white text-lg line-clamp-3 mb-2",children:l.summary||"Ozet yok."}),w.jsxs("div",{className:"text-purple-400 text-sm mt-auto",children:["YIL: ",l.year," | ",l.director]})]}),o&&!d&&!l&&w.jsx("div",{className:"text-red-500 text-xl font-bold",children:"MALESEF KOLEKSIYONDA FILM BULUNAMADI."})]})]}),w.jsx("div",{className:"text-center text-yellow-400 text-lg mt-2 pb-2",children:"*** GELECENZ BR FLM SENARYOSU KADAR SRPRZL OLABLR ***"})]})})},Sb=({isOpen:t,onClose:e})=>t?w.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/90 p-4",children:w.jsxs("div",{className:"w-full max-w-4xl bg-blue-900 border-4 border-yellow-400 p-1 shadow-[10px_10px_0px_#fff]",children:[w.jsxs("div",{className:"bg-yellow-400 text-blue-900 px-4 py-2 flex justify-between items-center font-bold text-2xl mb-4",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(I_,{}),w.jsx("span",{children:"SNEMA GNL - SAYFA 600"})]}),w.jsx("button",{onClick:e,className:"hover:bg-blue-900 hover:text-white px-2",children:"[IKI]"})]}),w.jsxs("div",{className:"p-8 text-center min-h-[300px] flex flex-col items-center justify-center bg-black border-2 border-white",children:[w.jsx(I_,{className:"w-16 h-16 text-yellow-400 mb-4 animate-bounce"}),w.jsx("h2",{className:"text-3xl text-white mb-2 blink",children:"BLOG YAKINDA HZMETNZDE"}),w.jsx("p",{className:"text-xl text-neutral-400",children:"FLM ELETRLER, LSTELER VE DAHA FAZLASI N BEKLEMEDE KALIN."}),w.jsx("div",{className:"mt-8 text-cyan-400 text-sm",children:"* * *"})]})]})}):null,Ab=({isOpen:t,onClose:e})=>t?w.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/90 p-4",children:w.jsxs("div",{className:"w-full max-w-2xl bg-neutral-900 border-4 border-white p-1 shadow-[10px_10px_0px_#000]",children:[w.jsxs("div",{className:"bg-cyan-400 text-black px-4 py-2 flex justify-between items-center font-bold text-2xl mb-1",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(BT,{}),w.jsx("span",{children:"BR FLM ISMARLA"})]}),w.jsx("button",{onClick:e,className:"hover:bg-black hover:text-white px-2 transition-colors",children:"[X]"})]}),w.jsxs("div",{className:"bg-black border-2 border-neutral-700 p-8 text-white flex flex-col items-center text-center gap-6 max-h-[70vh] overflow-y-auto custom-scrollbar",children:[w.jsx("h2",{className:"text-2xl font-bold text-cyan-400",children:'"Sradaki Filmim Sizin Ellerinizde: Ynetmen Koltuuna Siz Gein!"'}),w.jsx("p",{className:"text-lg text-neutral-300 leading-relaxed",children:'Bazen bir filmseveri en ok mutlu eden ey, bir bakasnn "Acaba ne hissedecek?" diye merak ettii o filmi bir bakasna zorla izletmektir. imdi bu gc size veriyorum! Patreon zerinden bana bir "Bilet" smarlayarak, izleyeceim bir sonraki filmin kaderini belirleyebilirsiniz.'}),w.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 p-4 rounded-lg w-full",children:[w.jsx("p",{className:"text-red-400 font-bold mb-2",children:" Ancak uyaryorum:"}),w.jsx("p",{className:"text-neutral-300",children:"Bu sadece bir neri deil, bir sinematik dello!"})]}),w.jsxs("div",{className:"w-full text-left space-y-4",children:[w.jsx("h3",{className:"text-xl font-bold text-white border-b border-neutral-700 pb-2",children:"Snrlar Zorlamaya Var Msnz?"}),w.jsxs("div",{children:[w.jsx("span",{className:"text-cyan-400 font-bold block mb-1",children:'"kence Seans"'}),w.jsx("p",{className:"text-neutral-400 text-lg",children:`IMDb puan yerlerde srnen (evet, o 2.4'lk felaketlerden bahsediyorum), mantk hatalaryla dolu, bitmek bilmeyen o korkun filmi izlemem iin bana meydan okuyabilirsiniz. Acm, detayl bir "Neden izlememelisiniz?" yazsyla burada paylaacam.`})]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-cyan-400 font-bold block mb-1",children:'"Sanat Sabr idir"'}),w.jsx("p",{className:"text-neutral-400 text-lg",children:"Siyah-beyaz, tek mekanda geen ve karakterin 45 dakika boyunca sadece duvara bakt 6 saatlik o Macar sanat filmini mi merak ediyorsunuz? Gnderin gelsin! Uykumla olan savam ve filmin derinliklerindeki (varsa) anlam sizin iin deifre edeyim."})]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-cyan-400 font-bold block mb-1",children:'"Gizli Hazineni Payla"'}),w.jsx("p",{className:"text-neutral-400 text-lg",children:'Ya da "Bunu benden baka kimse bilmez ama harikadr" dediiniz o klt yapm gnderin, hakkn beraber teslim edelim.'})]})]}),w.jsxs("div",{className:"w-full text-left space-y-4 pt-4 border-t border-neutral-800",children:[w.jsx("h3",{className:"text-xl font-bold text-white border-b border-neutral-700 pb-2",children:"Sre Nasl liyor?"}),w.jsxs("ul",{className:"space-y-2 text-neutral-300 list-disc list-inside",children:[w.jsxs("li",{children:[w.jsx("strong",{className:"text-white",children:"Biletini Al:"})," Patreon'dan biletini se ve meydan okuman balat."]}),w.jsxs("li",{children:[w.jsx("strong",{className:"text-white",children:"Grevi Ver:"})," zlememi istediin filmi (ne kadar tuhaf veya uzun olduu fark etmez) bana ilet."]}),w.jsxs("li",{children:[w.jsx("strong",{className:"text-white",children:"ncelemeyi Bekle:"})," O filmi bizzat izleyip, tm drstlmle (ve bazen gzyalarmla) hazrladm detayl incelemeyi burada, ismine zel bir teekkrle yaynlayaym."]})]})]}),w.jsx("p",{className:"text-neutral-400 text-lg mt-2",children:"Spend your time watching great movies... Ama bazen de en ktlerini izleyelim ki iyilerin kymetini bilelim, deil mi?"}),w.jsx("p",{className:"text-cyan-400 font-bold",children:'Hadi, msrlar hazrlayn ve bana ne izleyeceimi syleyin. En "absrt" istei sabrszlkla bekliyorum!'}),w.jsxs("a",{href:"https://www.patreon.com/",target:"_blank",rel:"noopener noreferrer",className:"w-full bg-cyan-400 text-black px-8 py-4 text-2xl font-bold hover:bg-white hover:text-cyan-500 transition-colors flex items-center justify-center gap-2 mt-4",children:[w.jsx("span",{children:"PATREON'A GT"}),w.jsx(GI,{size:24})]})]})]})}):null,R_=[{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/7GlsxNI4LVI?si=BhifaelrwxrVQsih" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Dnyann grltsn susturup evrenin sonsuzluunu hissetmek istediinizde bu paray balatn. Sadece bir film mzii deil, bir zaman makinesi."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/f1w4qnfux-o?si=EaiJsH4Soxgb1J27" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Baz aklar kelimelerle deil, bu keman sesindeki o ar admlarla anlatlr. Sinema tarihinin en zarif melankolisi."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/30jrmzzgHLc?si=xVD80KxJDJmCexTD" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Darda neon klar, elinizde direksiyon ve kafanzda binbir dnce... ehri bir film sahnesine dntrmek iin tek ihtiyacnz olan bu ritim."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/07xTvC5a9YQ?si=5c9YmglAB0NQCjp2" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Bugn her ey ok mu gri grnyor? Bu akordeon sesiyle kendinize bir Paris sabah smarlayn. Kk eylerin bysne kaplma vakti."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/D9OhQVuupdY?si=xbdhdV_9xd3xVDMT" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Yamurlu bir cam kenar, lo bir k ve dijital bir huzur. Gelecein yalnzln bu seste bulacaksnz."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/Flb01Ni3p3M?si=KpN0s37OONQatJzJ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Baz melodiler ilk notasndan itibaren size bir hikaye anlatmaya balar. Bu para, sinemann 'dokunulamaz' zirvesinden gelen bir miras gibi."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/aOHmfq2AUaU?si=-itaNVtBJBHmx6z4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Zamann daraldn, ilerin ciddiye bindiini hissettiiniz o anlarn mzii. Nabznz hzlandrmak istiyorsanz sesi biraz daha an."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/1hLIXrlpRe8?si=cdb3r4Bdh3d8Ke45" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Gne enerjik bir giri yapmak iin daha iyisi yok. Bir restoranda masaya kp dans etme istei uyandrabilir, hazrlkl olun!"},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/ppzoBclWpaA?si=UHYlFlSNgQUZqK6y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Unutmak istediiniz ama bir yandan da smsk sarldnz o anlara adanm bir para. Kar yaarken camdan bakmalk."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/PYI09PMNazw?si=RNWXitF9Fu_kF13M" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Efsanevi Ennio Morricone'den bir aheser. Adm adm ykselen bu melodiyle kendinizi bir ln ortasnda, byk bir macerann eiinde hissedeceksiniz."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/K61-tK7Xlzg?si=Npodep-wyu6RaETM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Bir karakterin krln ve yeniden douunu anlatan en hznl ello sesi. Kendi iinizdeki sessiz dansa elik edecek bir bayapt."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/HSW9UPQbeVQ?si=rReYPU7OyjTOmjW1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"sko yaylalarnn rzgarn yznzde hissettiren, zgrlk ve akn o muazzam karm. Gzlerinizi kapatn ve o usuz bucaksz yeillii hayal edin."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/LF9_9MZyQGo?si=EGowbvmlr0Nc0YV0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Modern klasik mziin dhisi Sakamotodan kalbe dokunan bir piyano melodisi. Sadece bir film mzii deil, ruhu dinlendiren bir terapi seans."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/_DxjFs_dsR8?si=tC6Yhgq57Zx6Mjle" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"En karanlk hikayelerin bile iinde bir zarafet vardr. Bu vals sizi bir yandan dansa davet ederken, dier yandan kalbinize ince bir sz brakacak."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/mqgEYRtWMJU?si=HgrKzbTxWL2eEQA-" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Daft Punkn sinematik evrene brakt en byk miras. Gece kl bir caddede yrrken veya alrken odaklanmak iin birebir."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/yRh-dzrI4Z4?si=J8poy-EJBafh-sMx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Hayatn rutininden skldnzda bu ritme tutunun. Sizi koltuunuzdan alp usuz bucaksz denizlerde bir maceraya srkleyecek kadar gl."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/057A1RdssoU?si=0XCqLp69bHawuZRq" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Kemann alad o an. nsan ruhunun en karanlk ve en aydnlk yanlarn ayn anda hissettiren, kalbe kaznan bir at."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/-bzWSJG93P8?si=qFmII-Lfe7vLYPaO" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Sadece bir 'kt adam' mzii deil, bir gvde gsterisi. Bu paray dinlerken kendinizi galaksiyi ynetmeye hazr hissetmemeniz imkansz."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/6lRqY7eu0BU?si=KwtY_vevloIYX0Kx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Bu siteyi ama sebebim olan o sinema tutkusunun bestelenmi hali. Eski bir sinema salonunun tozlu koltuklarn ve film makinelerinin sesini hatrlatr."},{embed:'<iframe width="560" height="315" src="https://www.youtube.com/embed/c56t7upa8Bk?si=yORzihYFJnjyudnH" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',text:"Ve final... Usulca balayp devasa bir dalgaya dnen bu para, her notasnda zamann akn ve geri gelmeyecek anlarn arln hissettiriyor. Derin bir nefes aln ve kendinizi bu ykselie brakn."}],Cb=({isOpen:t,onClose:e})=>{const[n,o]=ve.useState(0);ve.useEffect(()=>{t&&s()},[t]);const s=()=>{const u=Math.floor(Math.random()*R_.length);o(u)};if(!t)return null;const l=R_[n];return w.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/90 p-4",children:w.jsxs("div",{className:"w-full max-w-4xl bg-neutral-900 border-4 border-white p-1 shadow-[10px_10px_0px_#000]",children:[w.jsxs("div",{className:"bg-pink-500 text-black px-4 py-2 flex justify-between items-center font-bold text-2xl mb-1",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(jI,{}),w.jsx("span",{children:"700 MZK KUTUSU"})]}),w.jsx("button",{onClick:e,className:"hover:bg-black hover:text-white px-2 transition-colors",children:"[X]"})]}),w.jsxs("div",{className:"bg-black border-2 border-neutral-700 p-4 sm:p-8 text-white flex flex-col items-center gap-6",children:[w.jsx("div",{className:"w-full aspect-video border-2 border-neutral-800",children:w.jsx("div",{className:"w-full h-full [&>iframe]:w-full [&>iframe]:h-full",dangerouslySetInnerHTML:{__html:l.embed}})}),w.jsxs("p",{className:"text-xl text-center font-medium text-pink-400 max-w-2xl leading-relaxed",children:['"',l.text,'"']}),w.jsx("div",{className:"flex gap-4",children:w.jsxs("button",{onClick:s,className:"bg-neutral-800 hover:bg-neutral-700 text-white px-6 py-3 font-bold border-2 border-transparent hover:border-pink-500 transition-colors flex items-center gap-2",children:[w.jsx(nb,{size:20}),w.jsx("span",{children:"KARITIR"})]})}),w.jsx("p",{className:"text-neutral-600 text-xs",children:"* Rastgele bir para seildi."})]})]})})},wb=({activeTab:t,setActiveTab:e,onSurpriseMe:n,isSearchVisible:o,toggleSearch:s,searchTerm:l,onSearchChange:u,onHoroscopeClick:d,onBlogClick:g,onMusicClick:p})=>{const _=ve.useRef(null);return ve.useEffect(()=>{o&&setTimeout(()=>{var E;(E=_.current)==null||E.focus()},50)},[o]),w.jsxs("div",{className:"sticky top-0 z-50",children:[w.jsxs("div",{className:"bg-black border-b-2 border-white px-4 py-3 flex flex-wrap justify-between items-center text-xl sm:text-2xl font-bold gap-x-4 gap-y-2",children:[w.jsxs("div",{className:"flex items-center gap-1 mr-auto",children:[w.jsx("span",{className:"bg-white text-black px-2 font-bold",children:"BENM"}),w.jsx("span",{className:"text-yellow-400 font-bold teletext-shadow",children:"TV"})]}),w.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-4",children:[w.jsx("button",{onClick:()=>e("watched"),className:`hover:bg-white hover:text-black px-2 ${t==="watched"?"text-yellow-400":"text-neutral-500"}`,children:"100 KOLEKSYON"}),w.jsx("button",{onClick:()=>e("watchlist"),className:`hover:bg-white hover:text-black px-2 ${t==="watchlist"?"text-green-400":"text-neutral-500"}`,children:"200 LSTE"}),w.jsx("button",{onClick:n,className:"text-cyan-400 hover:bg-white hover:text-black px-2",children:"300 ANS"}),w.jsx("button",{onClick:s,className:`hover:bg-white hover:text-black px-2 ${o?"bg-red-600 text-white":"text-red-500"}`,children:"400 ARAMA"}),w.jsx("button",{onClick:d,className:"text-purple-400 hover:bg-white hover:text-black px-2",children:"500 HOROSCOPE"}),w.jsx("button",{onClick:g,className:"text-blue-400 hover:bg-white hover:text-black px-2",children:"600 BLOG"}),w.jsx("button",{onClick:p,className:"text-pink-400 hover:bg-white hover:text-black px-2",children:"700 MZK"})]})]}),o&&w.jsxs("div",{className:"bg-blue-800 p-2 border-b-2 border-white flex items-center gap-2 animate-in slide-in-from-top duration-200",children:[w.jsx("span",{className:"text-white font-bold whitespace-nowrap px-2",children:"ARAMA >"}),w.jsx("input",{ref:_,type:"text",value:l,onChange:E=>u(E.target.value.toUpperCase()),placeholder:"FILM VEYA YONETMEN ARA...",className:"w-full bg-black text-yellow-400 p-2 text-xl font-bold border-none outline-none placeholder-neutral-700"}),w.jsx("button",{onClick:s,className:"bg-red-600 text-white px-3 py-1 font-bold hover:bg-red-500",children:"KAPAT"})]})]})},Ib=({activeTab:t,selectedGenre:e,setSelectedGenre:n,selectedDirector:o,setSelectedDirector:s,selectedYear:l,setSelectedYear:u,selectedRating:d,setSelectedRating:g,availableGenres:p,availableDirectors:_,availableYears:E})=>w.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-8",children:[w.jsxs("div",{className:"relative",children:[w.jsxs("select",{value:e,onChange:T=>n(T.target.value),className:`w-full bg-black border-2 p-2 text-lg font-bold outline-none cursor-pointer rounded-none appearance-none text-center ${e?"text-orange-400 border-orange-400":"text-cyan-400 border-cyan-400 hover:bg-cyan-900"}`,children:[w.jsx("option",{value:"",children:"TM TRLER"}),p.map(T=>w.jsx("option",{value:T,children:T},T))]}),e&&w.jsx("button",{onClick:()=>n(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-red-500 hover:text-white bg-black/50 rounded-full",title:"FLTREY TEMZLE",children:w.jsx(Vc,{size:20})})]}),w.jsxs("div",{className:"relative",children:[w.jsxs("select",{value:o,onChange:T=>s(T.target.value),className:`w-full bg-black border-2 p-2 text-lg font-bold outline-none cursor-pointer rounded-none appearance-none text-center ${o?"text-orange-400 border-orange-400":"text-cyan-400 border-cyan-400 hover:bg-cyan-900"}`,children:[w.jsx("option",{value:"",children:"YNETMENLER"}),_.map(T=>w.jsx("option",{value:T,children:T},T))]}),o&&w.jsx("button",{onClick:()=>s(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-red-500 hover:text-white bg-black/50 rounded-full",title:"FLTREY TEMZLE",children:w.jsx(Vc,{size:20})})]}),w.jsxs("div",{className:"relative",children:[w.jsxs("select",{value:l,onChange:T=>u(T.target.value),className:`w-full bg-black border-2 p-2 text-lg font-bold outline-none cursor-pointer rounded-none appearance-none text-center ${l?"text-orange-400 border-orange-400":"text-cyan-400 border-cyan-400 hover:bg-cyan-900"}`,children:[w.jsx("option",{value:"",children:"YILLAR"}),E.map(T=>w.jsx("option",{value:T,children:T},T))]}),l&&w.jsx("button",{onClick:()=>u(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-red-500 hover:text-white bg-black/50 rounded-full",title:"FLTREY TEMZLE",children:w.jsx(Vc,{size:20})})]}),t==="watched"&&w.jsxs("div",{className:"relative",children:[w.jsxs("select",{value:d,onChange:T=>g(T.target.value===""?"":Number(T.target.value)),className:`w-full bg-black border-2 p-2 text-lg font-bold outline-none cursor-pointer rounded-none appearance-none text-center ${d!==""?"text-orange-400 border-orange-400":"text-cyan-400 border-cyan-400 hover:bg-cyan-900"}`,children:[w.jsx("option",{value:"",children:"PUANLAR"}),[5,4,3,2,1].map(T=>w.jsxs("option",{value:T,children:[T," YILDIZ"]},T))]}),d!==""&&w.jsx("button",{onClick:()=>g(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-red-500 hover:text-white bg-black/50 rounded-full",title:"FLTREY TEMZLE",children:w.jsx(Vc,{size:20})})]})]}),bb=({movie:t,onClose:e,onTryAgain:n,onDelete:o,onMoveToWatched:s,onDirectorClick:l})=>t?w.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4",children:w.jsxs("div",{className:"w-full max-w-3xl bg-blue-900 border-4 border-white p-2 shadow-[20px_20px_0px_rgba(0,0,0,1)]",children:[w.jsxs("div",{className:"bg-white text-blue-900 p-2 mb-8 flex justify-between items-center font-bold text-2xl",children:[w.jsx("span",{children:"*** SRPRZ ***"}),w.jsx("button",{onClick:e,className:"text-red-600 hover:bg-red-600 hover:text-white px-2",children:"[X]"})]}),w.jsx("div",{className:"px-4 py-2",children:w.jsx(zT,{movie:t,onDelete:u=>{o(u),e()},onMoveToWatched:u=>{s(u),e()},onDirectorClick:u=>{l(u),e()},className:"w-full"})}),w.jsx("button",{onClick:n,className:"w-full bg-cyan-400 text-black font-bold text-xl py-4 mt-8 hover:bg-white border-2 border-black",children:"TEKRAR DENE"})]})}):null,Rb=({movies:t,onApprove:e,onDelete:n,onUpdate:o,suggestions:s,onDeleteSuggestion:l})=>{const[u,d]=ve.useState("pending"),g=t.filter(ee=>ee.isApproved===!1),p=t.filter(ee=>ee.isApproved!==!1),[_,E]=ve.useState(null),[T,I]=ve.useState(!1),[V,O]=ve.useState(!1),P=ee=>{E(ee),I(!0)},G=async ee=>{if(_){O(!0);try{await o(_.id,{title:ee.rawTitle,status:ee.status,userRating:ee.userRating,userReview:ee.userReview,imdbUrl:ee.imdbUrl,posterBase64:ee.manualPosterBase64,year:ee.manualYear||_.year,director:ee.manualDirector||_.director,genre:ee.manualGenres||_.genre,summary:ee.manualSummary||_.summary}),I(!1),E(null)}catch(ce){console.error("Update failed",ce),alert("Guncelleme basarisiz")}finally{O(!1)}}},Z=async ee=>{window.confirm("BU KAYDI REDDETMEK VE SILMEK ISTEDIGINIZE EMIN MISINIZ?")&&await n(ee)},W=ee=>w.jsxs("div",{className:"flex flex-col gap-2",children:[u==="pending"&&w.jsx("button",{onClick:()=>e(ee.id),className:"bg-green-600 hover:bg-green-500 text-white p-2",title:"ONAYLA",children:w.jsx(BI,{size:24})}),ee.status!=="watched"&&w.jsx("button",{onClick:()=>o(ee.id,{status:"watched",watchedDate:new Date().toISOString()}),className:"bg-purple-600 hover:bg-purple-500 text-white p-2",title:"IZLENDI OLARAK ISARETLE",children:w.jsx(YI,{size:24})}),w.jsx("button",{onClick:()=>P(ee),className:"bg-blue-600 hover:bg-blue-500 text-white p-2",title:"DUZENLE",children:w.jsx(lb,{size:24})}),w.jsx("button",{onClick:()=>Z(ee.id),className:"bg-red-600 hover:bg-red-500 text-white p-2",title:"SIL / REDDET",children:w.jsx(b_,{size:24})})]}),se=u==="pending"?g:p;return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"flex gap-4 border-b-2 border-white pb-2 mb-6",children:[w.jsxs("button",{onClick:()=>d("pending"),className:`text-xl font-bold px-4 py-2 ${u==="pending"?"bg-yellow-400 text-black":"text-neutral-500 hover:text-white"}`,children:["ONAY BEKLEYENLER (",g.length,")"]}),w.jsxs("button",{onClick:()=>d("approved"),className:`text-xl font-bold px-4 py-2 ${u==="approved"?"bg-green-600 text-white":"text-neutral-500 hover:text-white"}`,children:["KAYITLI ARV (",p.length,")"]}),w.jsxs("button",{onClick:()=>d("suggestions"),className:`text-xl font-bold px-4 py-2 ${u==="suggestions"?"bg-purple-600 text-white":"text-neutral-500 hover:text-white"}`,children:["NERLER (",s.length,")"]})]}),u==="suggestions"&&(s.length===0?w.jsx("div",{className:"border-4 border-white border-dashed p-12 text-center bg-neutral-900",children:w.jsx("h2",{className:"text-3xl text-neutral-500",children:"MESAJ KUTUSU BO"})}):w.jsx("div",{className:"grid gap-4",children:s.map(ee=>w.jsxs("div",{className:"border-2 border-white bg-neutral-900 p-6 relative",children:[w.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-neutral-700 pb-2",children:[w.jsxs("div",{children:[w.jsxs("h3",{className:"text-yellow-400 font-bold text-xl uppercase",children:[ee.name," ",ee.surname]}),w.jsx("span",{className:"text-neutral-500 text-sm font-mono",children:new Date(ee.createdAt).toLocaleString("tr-TR")})]}),w.jsx("button",{onClick:()=>l(ee.id),className:"bg-red-900 text-red-200 p-2 hover:bg-red-800",title:"SL",children:w.jsx(b_,{size:20})})]}),w.jsx("p",{className:"text-white text-lg font-mono leading-relaxed whitespace-pre-wrap",children:ee.message})]},ee.id))})),u!=="suggestions"&&(se.length===0?w.jsxs("div",{className:"border-4 border-white border-dashed p-12 text-center bg-neutral-900",children:[w.jsx("h2",{className:"text-3xl text-neutral-500 mb-2",children:u==="pending"?"HER SEY YOLUNDA":"ARV BO"}),w.jsx("p",{className:"text-xl text-white",children:u==="pending"?"ONAY BEKLEYEN KAYIT YOK.":"HENZ ONAYLANMI KAYIT YOK."})]}):w.jsx("div",{className:"grid gap-4",children:se.map(ee=>w.jsxs("div",{className:"border-2 border-white bg-neutral-900 p-4 flex gap-4 items-start",children:[w.jsx("div",{className:"w-24 aspect-[2/3] bg-black flex-shrink-0 border border-neutral-700",children:ee.posterBase64?w.jsx("img",{src:ee.posterBase64,alt:ee.title,className:"w-full h-full object-cover"}):w.jsx("div",{className:"flex items-center justify-center h-full text-2xl",children:""})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("h3",{className:"text-xl font-bold text-yellow-400 truncate",children:ee.title}),w.jsxs("div",{className:"text-sm text-neutral-400 font-bold mb-2",children:[ee.year,"  ",ee.director]}),w.jsx("div",{className:"text-xs text-neutral-500 mb-2 line-clamp-2",children:ee.summary}),w.jsxs("div",{className:"flex gap-2 text-xs font-bold",children:[w.jsx("span",{className:`px-2 py-1 ${ee.status==="watched"?"bg-red-900 text-red-200":"bg-green-900 text-green-200"}`,children:ee.status==="watched"?"ZLEND":"ZLENECEK"}),ee.userRating&&w.jsxs("span",{className:"bg-yellow-900 text-yellow-200 px-2 py-1",children:[" ",ee.userRating]})]})]}),W(ee)]},ee.id))})),w.jsx(qT,{isOpen:T,onClose:()=>{I(!1),E(null)},onSubmit:G,isSubmitting:V,editMovie:_||void 0})]})},xb=({isOpen:t,onClose:e,watchedCount:n,watchlistCount:o})=>t?w.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/90 p-4",children:w.jsxs("div",{className:"w-full max-w-3xl bg-neutral-900 border-4 border-white p-1 shadow-[10px_10px_0px_#000]",children:[w.jsxs("div",{className:"bg-white text-black px-4 py-2 flex justify-between items-center font-bold text-2xl mb-1",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(qI,{}),w.jsx("span",{children:"HAKKINDA"})]}),w.jsx("button",{onClick:e,className:"hover:bg-black hover:text-white px-2 transition-colors",children:"[X]"})]}),w.jsxs("div",{className:"bg-black border-2 border-neutral-700 p-8 text-white min-h-[400px] flex flex-col justify-center",children:[w.jsxs("h2",{className:"text-3xl sm:text-4xl text-yellow-400 font-bold mb-6 leading-none tracking-wide border-b-4 border-blue-600 inline-block pb-2",children:["SPEND YOUR TIME WATCHING GREAT MOVIES,",w.jsx("br",{}),"NOT SEARCHING FOR THEM."]}),w.jsxs("div",{className:"space-y-4 text-xl sm:text-2xl font-medium leading-relaxed text-neutral-300",children:[w.jsxs("p",{children:["Kt bir filme harcanan iki saat, geri gelmeyecek bir zamandr.",w.jsx("span",{className:"text-white",children:" Ben bu zaman sizin yerinize harcadm!"})," Bu platform, izlediim yzlerce film arasndan szlp gelen bir neri rehberidir."]}),w.jsx("p",{children:"Puan tablolarma gz atarak hangi filmin izlemeye deer olduunu grebilir, kiisel eletirilerimle film hakknda n bilgi edinebilirsiniz."}),w.jsx("p",{className:"text-cyan-400 font-bold mt-4",children:"Buras bir veritaban deil, bir filmseverin size sunduu dijital bir tavsiye kutusudur."}),w.jsxs("div",{className:"mt-8 border-t-2 border-neutral-800 pt-6 flex flex-wrap gap-8 justify-center font-mono text-lg",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-yellow-400 font-bold text-xl",children:"100"}),w.jsx("span",{className:"text-white",children:"ZLENEN FLMLER"}),w.jsxs("span",{className:"text-yellow-400 font-bold text-sm bg-neutral-900 px-2 py-1 border border-neutral-700 ml-1",children:[n," FLM"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-yellow-400 font-bold text-xl",children:"200"}),w.jsx("span",{className:"text-white",children:"ZLENECEK FLMLER"}),w.jsxs("span",{className:"text-yellow-400 font-bold text-sm bg-neutral-900 px-2 py-1 border border-neutral-700 ml-1",children:[o," FLM"]})]})]})]})]})]})}):null,Nb=({isOpen:t,onClose:e,onSubmit:n,isSubmitting:o})=>{const[s,l]=ve.useState(""),[u,d]=ve.useState(""),[g,p]=ve.useState("");if(!t)return null;const _=async E=>{E.preventDefault();try{await n({name:s,surname:u,message:g}),l(""),d(""),p(""),alert("NERNZ LETLD / SENT"),e()}catch{alert("HATALI ILEM / ERROR")}};return w.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/90 p-4",children:w.jsxs("div",{className:"w-full max-w-xl bg-neutral-900 border-4 border-white p-1 shadow-[10px_10px_0px_#000]",children:[w.jsxs("div",{className:"bg-white text-black px-4 py-2 flex justify-between items-center font-bold text-2xl mb-4",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(ZI,{}),w.jsx("span",{children:"NER FORMU"})]}),w.jsx("button",{onClick:e,className:"hover:bg-black hover:text-white px-2 transition-colors",children:"[X]"})]}),w.jsxs("form",{onSubmit:_,className:"bg-black border-2 border-neutral-700 p-6 flex flex-col gap-4",children:[w.jsxs("div",{className:"flex gap-4",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:"text-white font-bold block mb-2",children:"ADI"}),w.jsxs("div",{className:"relative",children:[w.jsx(gb,{className:"absolute left-3 top-3 text-neutral-500 w-5 h-5"}),w.jsx("input",{type:"text",required:!0,value:s,onChange:E=>l(E.target.value),className:"w-full bg-neutral-900 border-2 border-neutral-700 text-white p-2 pl-10 font-mono focus:border-yellow-400 outline-none",placeholder:"JANE"})]})]}),w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:"text-white font-bold block mb-2",children:"SOYADI"}),w.jsx("input",{type:"text",required:!0,value:u,onChange:E=>d(E.target.value),className:"w-full bg-neutral-900 border-2 border-neutral-700 text-white p-2 font-mono focus:border-yellow-400 outline-none",placeholder:"DOE"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-white font-bold block mb-2",children:"NER / KAYET"}),w.jsx("textarea",{required:!0,value:g,onChange:E=>p(E.target.value),className:"w-full h-32 bg-neutral-900 border-2 border-neutral-700 text-white p-2 font-mono focus:border-yellow-400 outline-none resize-none",placeholder:"Mesajnz..."})]}),w.jsx("button",{type:"submit",disabled:o,className:"bg-yellow-400 text-black font-bold py-3 text-xl hover:bg-white transition-colors flex justify-center items-center gap-2",children:o?"GNDERLYOR...":w.jsxs(w.Fragment,{children:[w.jsx(ob,{className:"w-5 h-5"}),"[ GNDER ]"]})})]})]})})};var Mb={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Db,Vb;function Pb(){return{geminiUrl:Db,vertexUrl:Vb}}function kb(t,e,n,o){var s,l;if(!(t!=null&&t.baseUrl)){const u=Pb();return e?(s=u.vertexUrl)!==null&&s!==void 0?s:n:(l=u.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vo{}function fe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function h(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const g=t[d];if(Array.isArray(n))for(let p=0;p<g.length;p++){const _=g[p];h(_,e.slice(l+1),n[p])}else for(const p of g)h(p,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const g=t[d];h(g[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(o+1),n)):n}else return n}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Ub(t,e){for(const[n,o]of Object.entries(e)){const s=n.split("."),l=o.split("."),u=new Set;let d=-1;for(let g=0;g<s.length;g++)if(s[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}lp(t,s,l,0,u)}}function lp(t,e,n,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const g of d[u])lp(g,e,n,o+1,s)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(p=>!p.startsWith("_")&&!s.has(p)),g={};for(const p of d)g[p]=u[p];for(const[p,_]of Object.entries(g)){const E=[];for(const T of n.slice(o))T==="*"?E.push(p):E.push(T);h(u,E,_)}for(const p of d)delete u[p]}}else{const u=t;l in u&&lp(u[l],e,n,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lb(t){const e={},n=f(t,["operationName"]);n!=null&&h(e,["operationName"],n);const o=f(t,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function Ob(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],Fb(u)),e}function Bb(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],qb(u)),e}function Fb(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>zb(u))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function qb(t){const e={},n=f(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Gb(u))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function zb(t){const e={},n=f(t,["video"]);return n!=null&&h(e,["video"],Qb(n)),e}function Gb(t){const e={},n=f(t,["_self"]);return n!=null&&h(e,["video"],Xb(n)),e}function Hb(t){const e={},n=f(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function Yb(t){const e={},n=f(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function Kb(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],Jb(u)),e}function Jb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const s=f(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function GT(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],$b(u)),e}function $b(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const s=f(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function Qb(t){const e={},n=f(t,["uri"]);n!=null&&h(e,["uri"],n);const o=f(t,["encodedVideo"]);o!=null&&h(e,["videoBytes"],Jp(o));const s=f(t,["encoding"]);return s!=null&&h(e,["mimeType"],s),e}function Xb(t){const e={},n=f(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],Jp(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var x_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(x_||(x_={}));var N_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(N_||(N_={}));var M_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(M_||(M_={}));var Ot;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ot||(Ot={}));var D_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(D_||(D_={}));var V_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(V_||(V_={}));var P_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(P_||(P_={}));var k_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(k_||(k_={}));var U_;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(U_||(U_={}));var L_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(L_||(L_={}));var O_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(O_||(O_={}));var B_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(B_||(B_={}));var F_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(F_||(F_={}));var q_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(q_||(q_={}));var z_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(z_||(z_={}));var G_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(G_||(G_={}));var H_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(H_||(H_={}));var Y_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Y_||(Y_={}));var K_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(K_||(K_={}));var J_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(J_||(J_={}));var $_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($_||($_={}));var jc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(jc||(jc={}));var Q_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Q_||(Q_={}));var X_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(X_||(X_={}));var Z_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Z_||(Z_={}));var up;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(up||(up={}));var W_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(W_||(W_={}));var j_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(j_||(j_={}));var cp;(function(t){t.COLLECTION="COLLECTION"})(cp||(cp={}));var e0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(e0||(e0={}));var t0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(t0||(t0={}));var n0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(n0||(n0={}));var i0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(i0||(i0={}));var o0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(o0||(o0={}));var r0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(r0||(r0={}));var s0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(s0||(s0={}));var a0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(a0||(a0={}));var l0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(l0||(l0={}));var u0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(u0||(u0={}));var c0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(c0||(c0={}));var f0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(f0||(f0={}));var d0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(d0||(d0={}));var h0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(h0||(h0={}));var p0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(p0||(p0={}));var m0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(m0||(m0={}));var g0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(g0||(g0={}));var y0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(y0||(y0={}));var v0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(v0||(v0={}));var _0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(_0||(_0={}));var E0;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(E0||(E0={}));var T0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(T0||(T0={}));var S0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(S0||(S0={}));var A0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(A0||(A0={}));var C0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(C0||(C0={}));var w0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(w0||(w0={}));var I0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(I0||(I0={}));var ea;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ea||(ea={}));class fp{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class bl{get text(){var e,n,o,s,l,u,d,g;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const E=[];for(const T of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[I,V]of Object.entries(T))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(V!==null||V!==void 0)&&E.push(I);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;_=!0,p+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var e,n,o,s,l,u,d,g;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const E of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[T,I]of Object.entries(E))T!=="inlineData"&&(I!==null||I!==void 0)&&_.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,o,s,l,u,d,g;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,o,s,l,u,d,g,p;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,o,s,l,u,d,g,p;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class b0{}class R0{}class Zb{}class Wb{}class jb{}class eR{}class x0{}class N0{}class M0{}class tR{}class ef{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new ef;let s;const l=e;return n?s=Bb(l):s=Ob(l),Object.assign(o,s),o}}class D0{}class V0{}class P0{}class k0{}class nR{}class iR{}class oR{}class $p{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new $p,l=Kb(e);return Object.assign(o,l),o}}class rR{}class sR{}class aR{}class U0{}class lR{get text(){var e,n,o;let s="",l=!1;const u=[];for(const d of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[g,p]of Object.entries(d))g!=="text"&&g!=="thought"&&p!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,s+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,n,o;let s="";const l=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class uR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Qp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Qp,l=GT(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function HT(t,e){const n=Je(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function YT(t){return Array.isArray(t)?t.map(e=>tf(e)):[tf(t)]}function tf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function KT(t){const e=tf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JT(t){const e=tf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function L0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function $T(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>L0(e)):[L0(t)]}function dp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function O0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function B0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function sn(t){if(t==null)throw new Error("ContentUnion is required");return dp(t)?t:{role:"user",parts:$T(t)}}function Xp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=sn(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=sn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>sn(n)):[sn(e)]}function Xn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(O0(t)||B0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[sn(t)]}const e=[],n=[],o=dp(t[0]);for(const s of t){const l=dp(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(O0(s)||B0(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:$T(n)}),e}function cR(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Ot).includes(n[0].toUpperCase())?n[0].toUpperCase():Ot.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Ot).includes(o.toUpperCase())?o.toUpperCase():Ot.TYPE_UNSPECIFIED})}}function na(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&cR(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Ot).includes(d.toUpperCase())?d.toUpperCase():Ot.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=na(d);else if(o.includes(u)){const g=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}g.push(na(p))}e[u]=g}else if(s.includes(u)){const g={};for(const[p,_]of Object.entries(d))g[p]=na(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Zp(t){return na(t)}function Wp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function jp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ga(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=na(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=na(e.response));return t}function ya(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function fR(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function _o(t,e){if(typeof e!="string")throw new Error("name must be a string");return fR(t,e,"cachedContents")}function QT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function mr(t){return Jp(t)}function dR(t){return t!=null&&typeof t=="object"&&"name"in t}function hR(t){return t!=null&&typeof t=="object"&&"video"in t}function pR(t){return t!=null&&typeof t=="object"&&"uri"in t}function XT(t){var e;let n;if(dR(t)&&(n=t.name),!(pR(t)&&(n=t.uri,n===void 0))&&!(hR(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ZT(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function WT(t){for(const e of["models","tunedModels","publisherModels"])if(mR(t,e))return t[e];return[]}function mR(t,e){return t!==null&&typeof t=="object"&&e in t}function gR(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function yR(t,e={}){const n=[],o=new Set;for(const s of t){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const u=gR(s,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function jT(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function vR(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function eS(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let l=!1;for(const u of s){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function va(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function tS(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _R(t){const e={},n=f(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const o=f(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>jR(u))),h(e,["inlinedResponses"],l)}const s=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function ER(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const o=f(t,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const s=f(t,["bigqueryDestination","outputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function TR(t){const e={},n=f(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const o=f(t,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const s=f(t,["bigqueryUri"]);if(s!=null&&h(e,["bigqueryDestination","outputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Yc(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const s=f(t,["metadata","state"]);s!=null&&h(e,["state"],tS(s));const l=f(t,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=f(t,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(t,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(t,["metadata","model"]);g!=null&&h(e,["model"],g);const p=f(t,["metadata","output"]);return p!=null&&h(e,["dest"],_R(eS(p))),e}function hp(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["displayName"]);o!=null&&h(e,["displayName"],o);const s=f(t,["state"]);s!=null&&h(e,["state"],tS(s));const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(t,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(t,["endTime"]);g!=null&&h(e,["endTime"],g);const p=f(t,["updateTime"]);p!=null&&h(e,["updateTime"],p);const _=f(t,["model"]);_!=null&&h(e,["model"],_);const E=f(t,["inputConfig"]);E!=null&&h(e,["src"],SR(E));const T=f(t,["outputConfig"]);T!=null&&h(e,["dest"],ER(eS(T)));const I=f(t,["completionStats"]);return I!=null&&h(e,["completionStats"],I),e}function SR(t){const e={},n=f(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const o=f(t,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const s=f(t,["bigquerySource","inputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function AR(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&h(n,["fileName"],o);const s=f(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>WR(t,u))),h(n,["requests","requests"],l)}return n}function CR(t){const e={},n=f(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const o=f(t,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const s=f(t,["bigqueryUri"]);if(s!=null&&h(e,["bigquerySource","inputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function wR(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function IR(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],va(t,o)),n}function bR(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],va(t,o)),n}function RR(t){const e={},n=f(t,["content"]);n!=null&&h(e,["content"],n);const o=f(t,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],xR(o));const s=f(t,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const l=f(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(t,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(t,["index"]);g!=null&&h(e,["index"],g);const p=f(t,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const _=f(t,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),h(e,["safetyRatings"],T)}const E=f(t,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function xR(t){const e={},n=f(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["citations"],o)}return e}function nS(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>sx(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function NR(t,e){const n={},o=f(t,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function MR(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const s=f(t,["dest"]);return e!==void 0&&s!=null&&h(e,["outputConfig"],TR(vR(s))),n}function F0(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["src"]);s!=null&&h(n,["batch","inputConfig"],AR(t,jT(t,s)));const l=f(e,["config"]);return l!=null&&NR(l,n),n}function DR(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["model"],Je(t,o));const s=f(e,["src"]);s!=null&&h(n,["inputConfig"],CR(jT(t,s)));const l=f(e,["config"]);return l!=null&&MR(l,n),n}function VR(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),n}function PR(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["src"]);s!=null&&h(n,["batch","inputConfig"],qR(t,s));const l=f(e,["config"]);return l!=null&&VR(l,n),n}function kR(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],va(t,o)),n}function UR(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],va(t,o)),n}function LR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);return l!=null&&h(e,["error"],l),e}function OR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);return l!=null&&h(e,["error"],l),e}function BR(t,e){const n={},o=f(e,["contents"]);if(o!=null){let l=Xp(t,o);Array.isArray(l)&&(l=l.map(u=>u)),h(n,["requests[]","request","content"],l)}const s=f(e,["config"]);return s!=null&&(h(n,["_self"],FR(s,n)),Ub(n,{"requests[].*":"requests[].request.*"})),n}function FR(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const s=f(t,["title"]);e!==void 0&&s!=null&&h(e,["requests[]","title"],s);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function qR(t,e){const n={},o=f(e,["fileName"]);o!=null&&h(n,["file_name"],o);const s=f(e,["inlinedRequests"]);return s!=null&&h(n,["requests"],BR(t,s)),n}function zR(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function GR(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HR(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&h(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function YR(t,e,n){const o={},s=f(e,["systemInstruction"]);n!==void 0&&s!=null&&h(n,["systemInstruction"],nS(sn(s)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(o,["topP"],u);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(o,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(o,["maxOutputTokens"],p);const _=f(e,["stopSequences"]);_!=null&&h(o,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&h(o,["responseLogprobs"],E);const T=f(e,["logprobs"]);T!=null&&h(o,["logprobs"],T);const I=f(e,["presencePenalty"]);I!=null&&h(o,["presencePenalty"],I);const V=f(e,["frequencyPenalty"]);V!=null&&h(o,["frequencyPenalty"],V);const O=f(e,["seed"]);O!=null&&h(o,["seed"],O);const P=f(e,["responseMimeType"]);P!=null&&h(o,["responseMimeType"],P);const G=f(e,["responseSchema"]);G!=null&&h(o,["responseSchema"],Zp(G));const Z=f(e,["responseJsonSchema"]);if(Z!=null&&h(o,["responseJsonSchema"],Z),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(n!==void 0&&W!=null){let D=W;Array.isArray(D)&&(D=D.map(Pe=>ax(Pe))),h(n,["safetySettings"],D)}const se=f(e,["tools"]);if(n!==void 0&&se!=null){let D=ya(se);Array.isArray(D)&&(D=D.map(Pe=>ux(ga(Pe)))),h(n,["tools"],D)}const ee=f(e,["toolConfig"]);if(n!==void 0&&ee!=null&&h(n,["toolConfig"],lx(ee)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(e,["cachedContent"]);n!==void 0&&ce!=null&&h(n,["cachedContent"],_o(t,ce));const N=f(e,["responseModalities"]);N!=null&&h(o,["responseModalities"],N);const M=f(e,["mediaResolution"]);M!=null&&h(o,["mediaResolution"],M);const x=f(e,["speechConfig"]);if(x!=null&&h(o,["speechConfig"],Wp(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&h(o,["thinkingConfig"],L);const k=f(e,["imageConfig"]);k!=null&&h(o,["imageConfig"],ZR(k));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&h(o,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function KR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>RR(p))),h(e,["candidates"],g)}const s=f(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const l=f(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(t,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function JR(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],va(t,o)),n}function $R(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],va(t,o)),n}function QR(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function XR(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function ZR(t){const e={},n=f(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const o=f(t,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function WR(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["request","model"],Je(t,o));const s=f(e,["contents"]);if(s!=null){let d=Xn(s);Array.isArray(d)&&(d=d.map(g=>nS(g))),h(n,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(n,["metadata"],l);const u=f(e,["config"]);return u!=null&&h(n,["request","generationConfig"],YR(t,u,f(n,["request"],{}))),n}function jR(t){const e={},n=f(t,["response"]);n!=null&&h(e,["response"],KR(n));const o=f(t,["error"]);return o!=null&&h(e,["error"],o),e}function ex(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);if(e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function tx(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const l=f(t,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),n}function nx(t){const e={},n=f(t,["config"]);return n!=null&&ex(n,e),e}function ix(t){const e={},n=f(t,["config"]);return n!=null&&tx(n,e),e}function ox(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Yc(u))),h(e,["batchJobs"],l)}return e}function rx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>hp(u))),h(e,["batchJobs"],l)}return e}function sx(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],zR(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],GR(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],wR(g));const p=f(t,["text"]);p!=null&&h(e,["text"],p);const _=f(t,["thought"]);_!=null&&h(e,["thought"],_);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const T=f(t,["videoMetadata"]);return T!=null&&h(e,["videoMetadata"],T),e}function ax(t){const e={},n=f(t,["category"]);if(n!=null&&h(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function lx(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],HR(o)),e}function ux(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],QR(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],XR(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ho;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ho||(ho={}));class os{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cx extends vo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new os(ho.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=F0(this.apiClient,e),o=n._url,s=fe("{model}:batchGenerateContent",o),d=n.batch.inputConfig.requests,g=d.requests,p=[];for(const _ of g){const E=Object.assign({},_);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=T,E.request=I}p.push(E)}return d.requests=p,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${s}`;else if(u)o.dest=`${u}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=DR(this.apiClient,e);return d=fe("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>hp(_))}else{const p=F0(this.apiClient,e);return d=fe("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Yc(_))}}async createEmbeddingsInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PR(this.apiClient,e);return l=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>Yc(g))}}async get(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=$R(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>hp(_))}else{const p=JR(this.apiClient,e);return d=fe("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Yc(_))}}async cancel(e){var n,o,s,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=bR(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=IR(this.apiClient,e);u=fe("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=ix(e);return d=fe("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=rx(_),T=new U0;return Object.assign(T,E),T})}else{const p=nx(e);return d=fe("batches",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=ox(_),T=new U0;return Object.assign(T,E),T})}}async delete(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=UR(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>OR(_))}else{const p=kR(this.apiClient,e);return d=fe("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>LR(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fx(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function q0(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Px(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function dx(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const l=f(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let _=Xn(u);Array.isArray(_)&&(_=_.map(E=>q0(E))),h(e,["contents"],_)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],q0(sn(d)));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(E=>Ux(E))),h(e,["tools"],_)}const p=f(t,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],kx(p)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function hx(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const l=f(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let E=Xn(u);Array.isArray(E)&&(E=E.map(T=>T)),h(e,["contents"],E)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],sn(d));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(T=>Lx(T))),h(e,["tools"],E)}const p=f(t,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const _=f(t,["kmsKeyName"]);return e!==void 0&&_!=null&&h(e,["encryption_spec","kmsKeyName"],_),n}function px(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["model"],HT(t,o));const s=f(e,["config"]);return s!=null&&dx(s,n),n}function mx(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["model"],HT(t,o));const s=f(e,["config"]);return s!=null&&hx(s,n),n}function gx(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],_o(t,o)),n}function yx(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],_o(t,o)),n}function vx(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function _x(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Ex(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Tx(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Sx(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&h(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ax(t){const e={},n=f(t,["description"]);n!=null&&h(e,["description"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["parameters"]);s!=null&&h(e,["parameters"],s);const l=f(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&h(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Cx(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],_o(t,o)),n}function wx(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],_o(t,o)),n}function Ix(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function bx(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Rx(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function xx(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function Nx(t){const e={},n=f(t,["config"]);return n!=null&&Rx(n,e),e}function Mx(t){const e={},n=f(t,["config"]);return n!=null&&xx(n,e),e}function Dx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function Vx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function Px(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],Ex(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],Tx(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],fx(g));const p=f(t,["text"]);p!=null&&h(e,["text"],p);const _=f(t,["thought"]);_!=null&&h(e,["thought"],_);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const T=f(t,["videoMetadata"]);return T!=null&&h(e,["videoMetadata"],T),e}function kx(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],Sx(o)),e}function Ux(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],Ix(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],bx(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function Lx(t){const e={},n=f(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(t,["codeExecution"]);s!=null&&h(e,["codeExecution"],s);const l=f(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>Ax(T))),h(e,["functionDeclarations"],E)}const d=f(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const p=f(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const _=f(t,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function Ox(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),n}function Bx(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),n}function Fx(t,e){const n={},o=f(e,["name"]);o!=null&&h(n,["_url","name"],_o(t,o));const s=f(e,["config"]);return s!=null&&Ox(s,n),n}function qx(t,e){const n={},o=f(e,["name"]);o!=null&&h(n,["_url","name"],_o(t,o));const s=f(e,["config"]);return s!=null&&Bx(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zx extends vo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new os(ho.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=mx(this.apiClient,e);return d=fe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=px(this.apiClient,e);return d=fe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=wx(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=Cx(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=yx(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=_x(_),T=new P0;return Object.assign(T,E),T})}else{const p=gx(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=vx(_),T=new P0;return Object.assign(T,E),T})}}async update(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=qx(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=Fx(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=Mx(e);return d=fe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=Vx(_),T=new k0;return Object.assign(T,E),T})}else{const p=Nx(e);return d=fe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=Dx(_),T=new k0;return Object.assign(T,E),T})}}}function nf(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function z0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(t){return this instanceof Ie?(this.v=t,this):new Ie(t)}function ci(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(I){return function(V){return Promise.resolve(V).then(I,E)}}function d(I,V){o[I]&&(s[I]=function(O){return new Promise(function(P,G){l.push([I,O,P,G])>1||g(I,O)})},V&&(s[I]=V(s[I])))}function g(I,V){try{p(o[I](V))}catch(O){T(l[0][3],O)}}function p(I){I.value instanceof Ie?Promise.resolve(I.value.v).then(_,E):T(l[0][2],I)}function _(I){g("next",I)}function E(I){g("throw",I)}function T(I,V){I(V),l.shift(),l.length&&g(l[0][0],l[0][1])}}function fi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof z0=="function"?z0(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(u){return new Promise(function(d,g){u=t[l](u),s(d,g,u.done,u.value)})}}function s(l,u,d,g){Promise.resolve(g).then(function(p){l({value:p,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gx(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:iS(n)}function iS(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Hx(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function G0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let l=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),l&&!iS(t[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class Yx{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Kx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Kx{constructor(e,n,o,s={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),Hx(l)}async sendMessage(e){var n;await this.sendPromise;const o=sn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,d;const g=await s,p=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];_!=null&&(T=(d=_.slice(E))!==null&&d!==void 0?d:[]);const I=p?[p]:[];this.recordHistory(o,I,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=sn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?G0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return ci(this,arguments,function*(){var s,l,u,d,g,p;const _=[];try{for(var E=!0,T=fi(e),I;I=yield Ie(T.next()),s=I.done,!s;E=!0){d=I.value,E=!1;const V=d;if(Gx(V)){const O=(p=(g=V.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;O!==void 0&&_.push(O)}yield yield Ie(V)}}catch(V){l={error:V}}finally{try{!E&&!s&&(u=T.return)&&(yield Ie(u.call(T)))}finally{if(l)throw l.error}}this.recordHistory(n,_)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(l=>l.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...G0(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ql extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ql.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jx(t){const e={},n=f(t,["file"]);return n!=null&&h(e,["file"],n),e}function $x(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Qx(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","file"],XT(n)),e}function Xx(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Zx(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","file"],XT(n)),e}function Wx(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function jx(t){const e={},n=f(t,["config"]);return n!=null&&Wx(n,e),e}function eN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tN extends vo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new os(ho.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=jx(e);return l=fe("files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>{const p=eN(g),_=new rR;return Object.assign(_,p),_})}}async createInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Jx(e);return l=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const p=$x(g),_=new sR;return Object.assign(_,p),_})}}async get(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Zx(e);return l=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Qx(e);return l=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>{const p=Xx(g),_=new aR;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kc(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function nN(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>vN(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function iN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function oN(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rN(t){const e={},n=f(t,["description"]);n!=null&&h(e,["description"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["parameters"]);s!=null&&h(e,["parameters"],s);const l=f(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&h(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function sN(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const o=f(t,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const s=f(t,["audioTimestamp"]);s!=null&&h(e,["audioTimestamp"],s);const l=f(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(t,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(t,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=f(t,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const _=f(t,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const E=f(t,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const T=f(t,["responseLogprobs"]);T!=null&&h(e,["responseLogprobs"],T);const I=f(t,["responseMimeType"]);I!=null&&h(e,["responseMimeType"],I);const V=f(t,["responseModalities"]);V!=null&&h(e,["responseModalities"],V);const O=f(t,["responseSchema"]);O!=null&&h(e,["responseSchema"],O);const P=f(t,["routingConfig"]);P!=null&&h(e,["routingConfig"],P);const G=f(t,["seed"]);G!=null&&h(e,["seed"],G);const Z=f(t,["speechConfig"]);Z!=null&&h(e,["speechConfig"],Z);const W=f(t,["stopSequences"]);W!=null&&h(e,["stopSequences"],W);const se=f(t,["temperature"]);se!=null&&h(e,["temperature"],se);const ee=f(t,["thinkingConfig"]);ee!=null&&h(e,["thinkingConfig"],ee);const ce=f(t,["topK"]);ce!=null&&h(e,["topK"],ce);const N=f(t,["topP"]);if(N!=null&&h(e,["topP"],N),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function aN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function lN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function uN(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=f(t,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],jp(E));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","thinkingConfig"],T);const I=f(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const V=f(t,["systemInstruction"]);e!==void 0&&V!=null&&h(e,["setup","systemInstruction"],nN(sn(V)));const O=f(t,["tools"]);if(e!==void 0&&O!=null){let ce=ya(O);Array.isArray(ce)&&(ce=ce.map(N=>EN(ga(N)))),h(e,["setup","tools"],ce)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&h(e,["setup","sessionResumption"],_N(P));const G=f(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&h(e,["setup","inputAudioTranscription"],G);const Z=f(t,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const W=f(t,["realtimeInputConfig"]);e!==void 0&&W!=null&&h(e,["setup","realtimeInputConfig"],W);const se=f(t,["contextWindowCompression"]);e!==void 0&&se!=null&&h(e,["setup","contextWindowCompression"],se);const ee=f(t,["proactivity"]);if(e!==void 0&&ee!=null&&h(e,["setup","proactivity"],ee),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function cN(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],sN(o));const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=f(t,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],jp(E));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","thinkingConfig"],T);const I=f(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const V=f(t,["systemInstruction"]);e!==void 0&&V!=null&&h(e,["setup","systemInstruction"],sn(V));const O=f(t,["tools"]);if(e!==void 0&&O!=null){let N=ya(O);Array.isArray(N)&&(N=N.map(M=>TN(ga(M)))),h(e,["setup","tools"],N)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&h(e,["setup","sessionResumption"],P);const G=f(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&h(e,["setup","inputAudioTranscription"],G);const Z=f(t,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const W=f(t,["realtimeInputConfig"]);e!==void 0&&W!=null&&h(e,["setup","realtimeInputConfig"],W);const se=f(t,["contextWindowCompression"]);e!==void 0&&se!=null&&h(e,["setup","contextWindowCompression"],se);const ee=f(t,["proactivity"]);e!==void 0&&ee!=null&&h(e,["setup","proactivity"],ee);const ce=f(t,["explicitVadSignal"]);return e!==void 0&&ce!=null&&h(e,["setup","explicitVadSignal"],ce),n}function fN(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["setup","model"],Je(t,o));const s=f(e,["config"]);return s!=null&&h(n,["config"],uN(s,n)),n}function dN(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["setup","model"],Je(t,o));const s=f(e,["config"]);return s!=null&&h(n,["config"],cN(s,n)),n}function hN(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function pN(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["weightedPrompts"],o)}return e}function mN(t){const e={},n=f(t,["media"]);if(n!=null){let p=YT(n);Array.isArray(p)&&(p=p.map(_=>Kc(_))),h(e,["mediaChunks"],p)}const o=f(t,["audio"]);o!=null&&h(e,["audio"],Kc(JT(o)));const s=f(t,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const l=f(t,["video"]);l!=null&&h(e,["video"],Kc(KT(l)));const u=f(t,["text"]);u!=null&&h(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(t,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function gN(t){const e={},n=f(t,["media"]);if(n!=null){let p=YT(n);Array.isArray(p)&&(p=p.map(_=>_)),h(e,["mediaChunks"],p)}const o=f(t,["audio"]);o!=null&&h(e,["audio"],JT(o));const s=f(t,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const l=f(t,["video"]);l!=null&&h(e,["video"],KT(l));const u=f(t,["text"]);u!=null&&h(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(t,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function yN(t){const e={},n=f(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const o=f(t,["serverContent"]);o!=null&&h(e,["serverContent"],o);const s=f(t,["toolCall"]);s!=null&&h(e,["toolCall"],s);const l=f(t,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=f(t,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],SN(u));const d=f(t,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(t,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const p=f(t,["voiceActivityDetectionSignal"]);p!=null&&h(e,["voiceActivityDetectionSignal"],p);const _=f(t,["voiceActivity"]);return _!=null&&h(e,["voiceActivity"],AN(_)),e}function vN(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],iN(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],oN(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],Kc(g));const p=f(t,["text"]);p!=null&&h(e,["text"],p);const _=f(t,["thought"]);_!=null&&h(e,["thought"],_);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const T=f(t,["videoMetadata"]);return T!=null&&h(e,["videoMetadata"],T),e}function _N(t){const e={},n=f(t,["handle"]);if(n!=null&&h(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function EN(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],aN(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],lN(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function TN(t){const e={},n=f(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(t,["codeExecution"]);s!=null&&h(e,["codeExecution"],s);const l=f(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>rN(T))),h(e,["functionDeclarations"],E)}const d=f(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const p=f(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const _=f(t,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function SN(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const o=f(t,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const s=f(t,["candidatesTokenCount"]);s!=null&&h(e,["responseTokenCount"],s);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=f(t,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(t,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(t,["promptTokensDetails"]);if(g!=null){let I=g;Array.isArray(I)&&(I=I.map(V=>V)),h(e,["promptTokensDetails"],I)}const p=f(t,["cacheTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(V=>V)),h(e,["cacheTokensDetails"],I)}const _=f(t,["candidatesTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(V=>V)),h(e,["responseTokensDetails"],I)}const E=f(t,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(V=>V)),h(e,["toolUsePromptTokensDetails"],I)}const T=f(t,["trafficType"]);return T!=null&&h(e,["trafficType"],T),e}function AN(t){const e={},n=f(t,["type"]);return n!=null&&h(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CN(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function wN(t){const e={},n=f(t,["content"]);n!=null&&h(e,["content"],n);const o=f(t,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],IN(o));const s=f(t,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const l=f(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(t,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(t,["index"]);g!=null&&h(e,["index"],g);const p=f(t,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const _=f(t,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),h(e,["safetyRatings"],T)}const E=f(t,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function IN(t){const e={},n=f(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["citations"],o)}return e}function bN(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["contents"]);if(s!=null){let l=Xn(s);Array.isArray(l)&&(l=l.map(u=>u)),h(n,["contents"],l)}return n}function RN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["tokensInfo"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),h(e,["tokensInfo"],s)}return e}function xN(t){const e={},n=f(t,["values"]);n!=null&&h(e,["values"],n);const o=f(t,["statistics"]);return o!=null&&h(e,["statistics"],NN(o)),e}function NN(t){const e={},n=f(t,["truncated"]);n!=null&&h(e,["truncated"],n);const o=f(t,["token_count"]);return o!=null&&h(e,["tokenCount"],o),e}function Tf(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>B1(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function MN(t){const e={},n=f(t,["controlType"]);n!=null&&h(e,["controlType"],n);const o=f(t,["enableControlImageComputation"]);return o!=null&&h(e,["computeControl"],o),e}function DN(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function VN(t,e){const n={},o=f(t,["systemInstruction"]);e!==void 0&&o!=null&&h(e,["systemInstruction"],sn(o));const s=f(t,["tools"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>aS(d))),h(e,["tools"],u)}const l=f(t,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],C1(l)),n}function PN(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["contents"]);if(s!=null){let u=Xn(s);Array.isArray(u)&&(u=u.map(d=>Tf(d))),h(n,["contents"],u)}const l=f(e,["config"]);return l!=null&&DN(l),n}function kN(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["contents"]);if(s!=null){let u=Xn(s);Array.isArray(u)&&(u=u.map(d=>d)),h(n,["contents"],u)}const l=f(e,["config"]);return l!=null&&VN(l,n),n}function UN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["totalTokens"]);o!=null&&h(e,["totalTokens"],o);const s=f(t,["cachedContentTokenCount"]);return s!=null&&h(e,["cachedContentTokenCount"],s),e}function LN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["totalTokens"]);return o!=null&&h(e,["totalTokens"],o),e}function ON(t,e){const n={},o=f(e,["model"]);return o!=null&&h(n,["_url","name"],Je(t,o)),n}function BN(t,e){const n={},o=f(e,["model"]);return o!=null&&h(n,["_url","name"],Je(t,o)),n}function FN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function qN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function zN(t,e){const n={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const s=f(t,["negativePrompt"]);e!==void 0&&s!=null&&h(e,["parameters","negativePrompt"],s);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(t,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=f(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const E=f(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const T=f(t,["includeRaiReason"]);e!==void 0&&T!=null&&h(e,["parameters","includeRaiReason"],T);const I=f(t,["language"]);e!==void 0&&I!=null&&h(e,["parameters","language"],I);const V=f(t,["outputMimeType"]);e!==void 0&&V!=null&&h(e,["parameters","outputOptions","mimeType"],V);const O=f(t,["outputCompressionQuality"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","compressionQuality"],O);const P=f(t,["addWatermark"]);e!==void 0&&P!=null&&h(e,["parameters","addWatermark"],P);const G=f(t,["labels"]);e!==void 0&&G!=null&&h(e,["labels"],G);const Z=f(t,["editMode"]);e!==void 0&&Z!=null&&h(e,["parameters","editMode"],Z);const W=f(t,["baseSteps"]);return e!==void 0&&W!=null&&h(e,["parameters","editConfig","baseSteps"],W),n}function GN(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["prompt"]);s!=null&&h(n,["instances[0]","prompt"],s);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>Y1(g))),h(n,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&zN(u,n),n}function HN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Sf(l))),h(e,["generatedImages"],s)}return e}function YN(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const s=f(t,["title"]);e!==void 0&&s!=null&&h(e,["requests[]","title"],s);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function KN(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&h(e,["instances[]","task_type"],o);const s=f(t,["title"]);e!==void 0&&s!=null&&h(e,["instances[]","title"],s);const l=f(t,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const u=f(t,["mimeType"]);e!==void 0&&u!=null&&h(e,["instances[]","mimeType"],u);const d=f(t,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),n}function JN(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["contents"]);if(s!=null){let d=Xp(t,s);Array.isArray(d)&&(d=d.map(g=>g)),h(n,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&YN(l,n);const u=f(e,["model"]);return u!==void 0&&h(n,["requests[]","model"],Je(t,u)),n}function $N(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["contents"]);if(s!=null){let u=Xp(t,s);Array.isArray(u)&&(u=u.map(d=>d)),h(n,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&KN(l,n),n}function QN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["embeddings"],l)}const s=f(t,["metadata"]);return s!=null&&h(e,["metadata"],s),e}function XN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>xN(u))),h(e,["embeddings"],l)}const s=f(t,["metadata"]);return s!=null&&h(e,["metadata"],s),e}function ZN(t){const e={},n=f(t,["endpoint"]);n!=null&&h(e,["name"],n);const o=f(t,["deployedModelId"]);return o!=null&&h(e,["deployedModelId"],o),e}function WN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function jN(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function e1(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&h(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function t1(t){const e={},n=f(t,["description"]);n!=null&&h(e,["description"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["parameters"]);s!=null&&h(e,["parameters"],s);const l=f(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&h(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function n1(t,e,n){const o={},s=f(e,["systemInstruction"]);n!==void 0&&s!=null&&h(n,["systemInstruction"],Tf(sn(s)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(o,["topP"],u);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(o,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(o,["maxOutputTokens"],p);const _=f(e,["stopSequences"]);_!=null&&h(o,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&h(o,["responseLogprobs"],E);const T=f(e,["logprobs"]);T!=null&&h(o,["logprobs"],T);const I=f(e,["presencePenalty"]);I!=null&&h(o,["presencePenalty"],I);const V=f(e,["frequencyPenalty"]);V!=null&&h(o,["frequencyPenalty"],V);const O=f(e,["seed"]);O!=null&&h(o,["seed"],O);const P=f(e,["responseMimeType"]);P!=null&&h(o,["responseMimeType"],P);const G=f(e,["responseSchema"]);G!=null&&h(o,["responseSchema"],Zp(G));const Z=f(e,["responseJsonSchema"]);if(Z!=null&&h(o,["responseJsonSchema"],Z),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(n!==void 0&&W!=null){let D=W;Array.isArray(D)&&(D=D.map(Pe=>K1(Pe))),h(n,["safetySettings"],D)}const se=f(e,["tools"]);if(n!==void 0&&se!=null){let D=ya(se);Array.isArray(D)&&(D=D.map(Pe=>j1(ga(Pe)))),h(n,["tools"],D)}const ee=f(e,["toolConfig"]);if(n!==void 0&&ee!=null&&h(n,["toolConfig"],W1(ee)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(e,["cachedContent"]);n!==void 0&&ce!=null&&h(n,["cachedContent"],_o(t,ce));const N=f(e,["responseModalities"]);N!=null&&h(o,["responseModalities"],N);const M=f(e,["mediaResolution"]);M!=null&&h(o,["mediaResolution"],M);const x=f(e,["speechConfig"]);if(x!=null&&h(o,["speechConfig"],Wp(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&h(o,["thinkingConfig"],L);const k=f(e,["imageConfig"]);k!=null&&h(o,["imageConfig"],x1(k));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&h(o,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function i1(t,e,n){const o={},s=f(e,["systemInstruction"]);n!==void 0&&s!=null&&h(n,["systemInstruction"],sn(s));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(o,["topP"],u);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(o,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(o,["maxOutputTokens"],p);const _=f(e,["stopSequences"]);_!=null&&h(o,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&h(o,["responseLogprobs"],E);const T=f(e,["logprobs"]);T!=null&&h(o,["logprobs"],T);const I=f(e,["presencePenalty"]);I!=null&&h(o,["presencePenalty"],I);const V=f(e,["frequencyPenalty"]);V!=null&&h(o,["frequencyPenalty"],V);const O=f(e,["seed"]);O!=null&&h(o,["seed"],O);const P=f(e,["responseMimeType"]);P!=null&&h(o,["responseMimeType"],P);const G=f(e,["responseSchema"]);G!=null&&h(o,["responseSchema"],Zp(G));const Z=f(e,["responseJsonSchema"]);Z!=null&&h(o,["responseJsonSchema"],Z);const W=f(e,["routingConfig"]);W!=null&&h(o,["routingConfig"],W);const se=f(e,["modelSelectionConfig"]);se!=null&&h(o,["modelConfig"],se);const ee=f(e,["safetySettings"]);if(n!==void 0&&ee!=null){let ae=ee;Array.isArray(ae)&&(ae=ae.map(ge=>ge)),h(n,["safetySettings"],ae)}const ce=f(e,["tools"]);if(n!==void 0&&ce!=null){let ae=ya(ce);Array.isArray(ae)&&(ae=ae.map(ge=>aS(ga(ge)))),h(n,["tools"],ae)}const N=f(e,["toolConfig"]);n!==void 0&&N!=null&&h(n,["toolConfig"],N);const M=f(e,["labels"]);n!==void 0&&M!=null&&h(n,["labels"],M);const x=f(e,["cachedContent"]);n!==void 0&&x!=null&&h(n,["cachedContent"],_o(t,x));const L=f(e,["responseModalities"]);L!=null&&h(o,["responseModalities"],L);const k=f(e,["mediaResolution"]);k!=null&&h(o,["mediaResolution"],k);const q=f(e,["speechConfig"]);q!=null&&h(o,["speechConfig"],Wp(q));const D=f(e,["audioTimestamp"]);D!=null&&h(o,["audioTimestamp"],D);const Pe=f(e,["thinkingConfig"]);Pe!=null&&h(o,["thinkingConfig"],Pe);const rt=f(e,["imageConfig"]);if(rt!=null&&h(o,["imageConfig"],N1(rt)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const J=f(e,["modelArmorConfig"]);return n!==void 0&&J!=null&&h(n,["modelArmorConfig"],J),o}function H0(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["contents"]);if(s!=null){let u=Xn(s);Array.isArray(u)&&(u=u.map(d=>Tf(d))),h(n,["contents"],u)}const l=f(e,["config"]);return l!=null&&h(n,["generationConfig"],n1(t,l,n)),n}function Y0(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["contents"]);if(s!=null){let u=Xn(s);Array.isArray(u)&&(u=u.map(d=>d)),h(n,["contents"],u)}const l=f(e,["config"]);return l!=null&&h(n,["generationConfig"],i1(t,l,n)),n}function K0(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>wN(p))),h(e,["candidates"],g)}const s=f(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const l=f(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(t,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function J0(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(_=>_)),h(e,["candidates"],p)}const s=f(t,["createTime"]);s!=null&&h(e,["createTime"],s);const l=f(t,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const u=f(t,["promptFeedback"]);u!=null&&h(e,["promptFeedback"],u);const d=f(t,["responseId"]);d!=null&&h(e,["responseId"],d);const g=f(t,["usageMetadata"]);return g!=null&&h(e,["usageMetadata"],g),e}function o1(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const s=f(t,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);const l=f(t,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const g=f(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&h(e,["parameters","includeSafetyAttributes"],g);const p=f(t,["includeRaiReason"]);e!==void 0&&p!=null&&h(e,["parameters","includeRaiReason"],p);const _=f(t,["language"]);e!==void 0&&_!=null&&h(e,["parameters","language"],_);const E=f(t,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const T=f(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(t,["imageSize"]);if(e!==void 0&&I!=null&&h(e,["parameters","sampleImageSize"],I),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function r1(t,e){const n={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const s=f(t,["negativePrompt"]);e!==void 0&&s!=null&&h(e,["parameters","negativePrompt"],s);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(t,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=f(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const E=f(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const T=f(t,["includeRaiReason"]);e!==void 0&&T!=null&&h(e,["parameters","includeRaiReason"],T);const I=f(t,["language"]);e!==void 0&&I!=null&&h(e,["parameters","language"],I);const V=f(t,["outputMimeType"]);e!==void 0&&V!=null&&h(e,["parameters","outputOptions","mimeType"],V);const O=f(t,["outputCompressionQuality"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","compressionQuality"],O);const P=f(t,["addWatermark"]);e!==void 0&&P!=null&&h(e,["parameters","addWatermark"],P);const G=f(t,["labels"]);e!==void 0&&G!=null&&h(e,["labels"],G);const Z=f(t,["imageSize"]);e!==void 0&&Z!=null&&h(e,["parameters","sampleImageSize"],Z);const W=f(t,["enhancePrompt"]);return e!==void 0&&W!=null&&h(e,["parameters","enhancePrompt"],W),n}function s1(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["prompt"]);s!=null&&h(n,["instances[0]","prompt"],s);const l=f(e,["config"]);return l!=null&&o1(l,n),n}function a1(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["prompt"]);s!=null&&h(n,["instances[0]","prompt"],s);const l=f(e,["config"]);return l!=null&&r1(l,n),n}function l1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>E1(u))),h(e,["generatedImages"],l)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&h(e,["positivePromptSafetyAttributes"],rS(s)),e}function u1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Sf(u))),h(e,["generatedImages"],l)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&h(e,["positivePromptSafetyAttributes"],sS(s)),e}function c1(t,e){const n={},o=f(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=f(t,["durationSeconds"]);if(e!==void 0&&s!=null&&h(e,["parameters","durationSeconds"],s),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=f(t,["resolution"]);e!==void 0&&u!=null&&h(e,["parameters","resolution"],u);const d=f(t,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(t,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const p=f(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&h(e,["parameters","enhancePrompt"],p),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(t,["lastFrame"]);e!==void 0&&_!=null&&h(e,["instances[0]","lastFrame"],Af(_));const E=f(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(I=>dM(I))),h(e,["instances[0]","referenceImages"],T)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function f1(t,e){const n={},o=f(t,["numberOfVideos"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const l=f(t,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const u=f(t,["durationSeconds"]);e!==void 0&&u!=null&&h(e,["parameters","durationSeconds"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(t,["aspectRatio"]);e!==void 0&&g!=null&&h(e,["parameters","aspectRatio"],g);const p=f(t,["resolution"]);e!==void 0&&p!=null&&h(e,["parameters","resolution"],p);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const E=f(t,["pubsubTopic"]);e!==void 0&&E!=null&&h(e,["parameters","pubsubTopic"],E);const T=f(t,["negativePrompt"]);e!==void 0&&T!=null&&h(e,["parameters","negativePrompt"],T);const I=f(t,["enhancePrompt"]);e!==void 0&&I!=null&&h(e,["parameters","enhancePrompt"],I);const V=f(t,["generateAudio"]);e!==void 0&&V!=null&&h(e,["parameters","generateAudio"],V);const O=f(t,["lastFrame"]);e!==void 0&&O!=null&&h(e,["instances[0]","lastFrame"],mi(O));const P=f(t,["referenceImages"]);if(e!==void 0&&P!=null){let W=P;Array.isArray(W)&&(W=W.map(se=>hM(se))),h(e,["instances[0]","referenceImages"],W)}const G=f(t,["mask"]);e!==void 0&&G!=null&&h(e,["instances[0]","mask"],fM(G));const Z=f(t,["compressionQuality"]);return e!==void 0&&Z!=null&&h(e,["parameters","compressionQuality"],Z),n}function d1(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],g1(u)),e}function h1(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],y1(u)),e}function p1(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["prompt"]);s!=null&&h(n,["instances[0]","prompt"],s);const l=f(e,["image"]);l!=null&&h(n,["instances[0]","image"],Af(l));const u=f(e,["video"]);u!=null&&h(n,["instances[0]","video"],lS(u));const d=f(e,["source"]);d!=null&&v1(d,n);const g=f(e,["config"]);return g!=null&&c1(g,n),n}function m1(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["prompt"]);s!=null&&h(n,["instances[0]","prompt"],s);const l=f(e,["image"]);l!=null&&h(n,["instances[0]","image"],mi(l));const u=f(e,["video"]);u!=null&&h(n,["instances[0]","video"],uS(u));const d=f(e,["source"]);d!=null&&_1(d,n);const g=f(e,["config"]);return g!=null&&f1(g,n),n}function g1(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>S1(u))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function y1(t){const e={},n=f(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>A1(u))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function v1(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const s=f(t,["image"]);e!==void 0&&s!=null&&h(e,["instances[0]","image"],Af(s));const l=f(t,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],lS(l)),n}function _1(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const s=f(t,["image"]);e!==void 0&&s!=null&&h(e,["instances[0]","image"],mi(s));const l=f(t,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],uS(l)),n}function E1(t){const e={},n=f(t,["_self"]);n!=null&&h(e,["image"],M1(n));const o=f(t,["raiFilteredReason"]);o!=null&&h(e,["raiFilteredReason"],o);const s=f(t,["_self"]);return s!=null&&h(e,["safetyAttributes"],rS(s)),e}function Sf(t){const e={},n=f(t,["_self"]);n!=null&&h(e,["image"],oS(n));const o=f(t,["raiFilteredReason"]);o!=null&&h(e,["raiFilteredReason"],o);const s=f(t,["_self"]);s!=null&&h(e,["safetyAttributes"],sS(s));const l=f(t,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function T1(t){const e={},n=f(t,["_self"]);n!=null&&h(e,["mask"],oS(n));const o=f(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),h(e,["labels"],s)}return e}function S1(t){const e={},n=f(t,["video"]);return n!=null&&h(e,["video"],uM(n)),e}function A1(t){const e={},n=f(t,["_self"]);return n!=null&&h(e,["video"],cM(n)),e}function C1(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const o=f(t,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const s=f(t,["audioTimestamp"]);s!=null&&h(e,["audioTimestamp"],s);const l=f(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(t,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(t,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=f(t,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const _=f(t,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const E=f(t,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const T=f(t,["responseLogprobs"]);T!=null&&h(e,["responseLogprobs"],T);const I=f(t,["responseMimeType"]);I!=null&&h(e,["responseMimeType"],I);const V=f(t,["responseModalities"]);V!=null&&h(e,["responseModalities"],V);const O=f(t,["responseSchema"]);O!=null&&h(e,["responseSchema"],O);const P=f(t,["routingConfig"]);P!=null&&h(e,["routingConfig"],P);const G=f(t,["seed"]);G!=null&&h(e,["seed"],G);const Z=f(t,["speechConfig"]);Z!=null&&h(e,["speechConfig"],Z);const W=f(t,["stopSequences"]);W!=null&&h(e,["stopSequences"],W);const se=f(t,["temperature"]);se!=null&&h(e,["temperature"],se);const ee=f(t,["thinkingConfig"]);ee!=null&&h(e,["thinkingConfig"],ee);const ce=f(t,["topK"]);ce!=null&&h(e,["topK"],ce);const N=f(t,["topP"]);if(N!=null&&h(e,["topP"],N),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function w1(t,e){const n={},o=f(e,["model"]);return o!=null&&h(n,["_url","name"],Je(t,o)),n}function I1(t,e){const n={},o=f(e,["model"]);return o!=null&&h(n,["_url","name"],Je(t,o)),n}function b1(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function R1(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function x1(t){const e={},n=f(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const o=f(t,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function N1(t){const e={},n=f(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const o=f(t,["imageSize"]);o!=null&&h(e,["imageSize"],o);const s=f(t,["personGeneration"]);s!=null&&h(e,["personGeneration"],s);const l=f(t,["outputMimeType"]);l!=null&&h(e,["imageOutputOptions","mimeType"],l);const u=f(t,["outputCompressionQuality"]);return u!=null&&h(e,["imageOutputOptions","compressionQuality"],u),e}function M1(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],mr(n));const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function oS(t){const e={},n=f(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&h(e,["imageBytes"],mr(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Af(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],mr(n));const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function mi(t){const e={},n=f(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const o=f(t,["imageBytes"]);o!=null&&h(e,["bytesBase64Encoded"],mr(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function D1(t,e,n){const o={},s=f(e,["pageSize"]);n!==void 0&&s!=null&&h(n,["_query","pageSize"],s);const l=f(e,["pageToken"]);n!==void 0&&l!=null&&h(n,["_query","pageToken"],l);const u=f(e,["filter"]);n!==void 0&&u!=null&&h(n,["_query","filter"],u);const d=f(e,["queryBase"]);return n!==void 0&&d!=null&&h(n,["_url","models_url"],ZT(t,d)),o}function V1(t,e,n){const o={},s=f(e,["pageSize"]);n!==void 0&&s!=null&&h(n,["_query","pageSize"],s);const l=f(e,["pageToken"]);n!==void 0&&l!=null&&h(n,["_query","pageToken"],l);const u=f(e,["filter"]);n!==void 0&&u!=null&&h(n,["_query","filter"],u);const d=f(e,["queryBase"]);return n!==void 0&&d!=null&&h(n,["_url","models_url"],ZT(t,d)),o}function P1(t,e){const n={},o=f(e,["config"]);return o!=null&&D1(t,o,n),n}function k1(t,e){const n={},o=f(e,["config"]);return o!=null&&V1(t,o,n),n}function U1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["_self"]);if(s!=null){let l=WT(s);Array.isArray(l)&&(l=l.map(u=>pp(u))),h(e,["models"],l)}return e}function L1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["_self"]);if(s!=null){let l=WT(s);Array.isArray(l)&&(l=l.map(u=>mp(u))),h(e,["models"],l)}return e}function O1(t){const e={},n=f(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const o=f(t,["segmentationClasses"]);o!=null&&h(e,["maskClasses"],o);const s=f(t,["maskDilation"]);return s!=null&&h(e,["dilation"],s),e}function pp(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["displayName"]);o!=null&&h(e,["displayName"],o);const s=f(t,["description"]);s!=null&&h(e,["description"],s);const l=f(t,["version"]);l!=null&&h(e,["version"],l);const u=f(t,["_self"]);u!=null&&h(e,["tunedModelInfo"],eM(u));const d=f(t,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const g=f(t,["outputTokenLimit"]);g!=null&&h(e,["outputTokenLimit"],g);const p=f(t,["supportedGenerationMethods"]);p!=null&&h(e,["supportedActions"],p);const _=f(t,["temperature"]);_!=null&&h(e,["temperature"],_);const E=f(t,["maxTemperature"]);E!=null&&h(e,["maxTemperature"],E);const T=f(t,["topP"]);T!=null&&h(e,["topP"],T);const I=f(t,["topK"]);I!=null&&h(e,["topK"],I);const V=f(t,["thinking"]);return V!=null&&h(e,["thinking"],V),e}function mp(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["displayName"]);o!=null&&h(e,["displayName"],o);const s=f(t,["description"]);s!=null&&h(e,["description"],s);const l=f(t,["versionId"]);l!=null&&h(e,["version"],l);const u=f(t,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>ZN(T))),h(e,["endpoints"],E)}const d=f(t,["labels"]);d!=null&&h(e,["labels"],d);const g=f(t,["_self"]);g!=null&&h(e,["tunedModelInfo"],tM(g));const p=f(t,["defaultCheckpointId"]);p!=null&&h(e,["defaultCheckpointId"],p);const _=f(t,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(T=>T)),h(e,["checkpoints"],E)}return e}function B1(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],WN(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],jN(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],CN(g));const p=f(t,["text"]);p!=null&&h(e,["text"],p);const _=f(t,["thought"]);_!=null&&h(e,["thought"],_);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const T=f(t,["videoMetadata"]);return T!=null&&h(e,["videoMetadata"],T),e}function F1(t){const e={},n=f(t,["productImage"]);return n!=null&&h(e,["image"],mi(n)),e}function q1(t,e){const n={},o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const s=f(t,["baseSteps"]);e!==void 0&&s!=null&&h(e,["parameters","baseSteps"],s);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=f(t,["seed"]);e!==void 0&&u!=null&&h(e,["parameters","seed"],u);const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const p=f(t,["addWatermark"]);e!==void 0&&p!=null&&h(e,["parameters","addWatermark"],p);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","mimeType"],_);const E=f(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E);const T=f(t,["enhancePrompt"]);e!==void 0&&T!=null&&h(e,["parameters","enhancePrompt"],T);const I=f(t,["labels"]);return e!==void 0&&I!=null&&h(e,["labels"],I),n}function z1(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["source"]);s!=null&&H1(s,n);const l=f(e,["config"]);return l!=null&&q1(l,n),n}function G1(t){const e={},n=f(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Sf(s))),h(e,["generatedImages"],o)}return e}function H1(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const s=f(t,["personImage"]);e!==void 0&&s!=null&&h(e,["instances[0]","personImage","image"],mi(s));const l=f(t,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>F1(d))),h(e,["instances[0]","productImages"],u)}return n}function Y1(t){const e={},n=f(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],mi(n));const o=f(t,["referenceId"]);o!=null&&h(e,["referenceId"],o);const s=f(t,["referenceType"]);s!=null&&h(e,["referenceType"],s);const l=f(t,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],O1(l));const u=f(t,["controlImageConfig"]);u!=null&&h(e,["controlImageConfig"],MN(u));const d=f(t,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const g=f(t,["subjectImageConfig"]);return g!=null&&h(e,["subjectImageConfig"],g),e}function rS(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const o=f(t,["safetyAttributes","scores"]);o!=null&&h(e,["scores"],o);const s=f(t,["contentType"]);return s!=null&&h(e,["contentType"],s),e}function sS(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const o=f(t,["safetyAttributes","scores"]);o!=null&&h(e,["scores"],o);const s=f(t,["contentType"]);return s!=null&&h(e,["contentType"],s),e}function K1(t){const e={},n=f(t,["category"]);if(n!=null&&h(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function J1(t){const e={},n=f(t,["image"]);return n!=null&&h(e,["image"],mi(n)),e}function $1(t,e){const n={},o=f(t,["mode"]);e!==void 0&&o!=null&&h(e,["parameters","mode"],o);const s=f(t,["maxPredictions"]);e!==void 0&&s!=null&&h(e,["parameters","maxPredictions"],s);const l=f(t,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const u=f(t,["maskDilation"]);e!==void 0&&u!=null&&h(e,["parameters","maskDilation"],u);const d=f(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const g=f(t,["labels"]);return e!==void 0&&g!=null&&h(e,["labels"],g),n}function Q1(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["source"]);s!=null&&Z1(s,n);const l=f(e,["config"]);return l!=null&&$1(l,n),n}function X1(t){const e={},n=f(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>T1(s))),h(e,["generatedMasks"],o)}return e}function Z1(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const s=f(t,["image"]);e!==void 0&&s!=null&&h(e,["instances[0]","image"],mi(s));const l=f(t,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],J1(l)),n}function W1(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],e1(o)),e}function j1(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],b1(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],R1(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function aS(t){const e={},n=f(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(t,["codeExecution"]);s!=null&&h(e,["codeExecution"],s);const l=f(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>t1(T))),h(e,["functionDeclarations"],E)}const d=f(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const p=f(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const _=f(t,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function eM(t){const e={},n=f(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const o=f(t,["createTime"]);o!=null&&h(e,["createTime"],o);const s=f(t,["updateTime"]);return s!=null&&h(e,["updateTime"],s),e}function tM(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const o=f(t,["createTime"]);o!=null&&h(e,["createTime"],o);const s=f(t,["updateTime"]);return s!=null&&h(e,["updateTime"],s),e}function nM(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const s=f(t,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),n}function iM(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const s=f(t,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),n}function oM(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","name"],Je(t,o));const s=f(e,["config"]);return s!=null&&nM(s,n),n}function rM(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["config"]);return s!=null&&iM(s,n),n}function sM(t,e){const n={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const s=f(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&h(e,["parameters","safetySetting"],s);const l=f(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const u=f(t,["includeRaiReason"]);e!==void 0&&u!=null&&h(e,["parameters","includeRaiReason"],u);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const g=f(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g);const p=f(t,["enhanceInputImage"]);e!==void 0&&p!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],p);const _=f(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=f(t,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const T=f(t,["numberOfImages"]);e!==void 0&&T!=null&&h(e,["parameters","sampleCount"],T);const I=f(t,["mode"]);return e!==void 0&&I!=null&&h(e,["parameters","mode"],I),n}function aM(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],Je(t,o));const s=f(e,["image"]);s!=null&&h(n,["instances[0]","image"],mi(s));const l=f(e,["upscaleFactor"]);l!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&sM(u,n),n}function lM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Sf(l))),h(e,["generatedImages"],s)}return e}function uM(t){const e={},n=f(t,["uri"]);n!=null&&h(e,["uri"],n);const o=f(t,["encodedVideo"]);o!=null&&h(e,["videoBytes"],mr(o));const s=f(t,["encoding"]);return s!=null&&h(e,["mimeType"],s),e}function cM(t){const e={},n=f(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],mr(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function fM(t){const e={},n=f(t,["image"]);n!=null&&h(e,["_self"],mi(n));const o=f(t,["maskMode"]);return o!=null&&h(e,["maskMode"],o),e}function dM(t){const e={},n=f(t,["image"]);n!=null&&h(e,["image"],Af(n));const o=f(t,["referenceType"]);return o!=null&&h(e,["referenceType"],o),e}function hM(t){const e={},n=f(t,["image"]);n!=null&&h(e,["image"],mi(n));const o=f(t,["referenceType"]);return o!=null&&h(e,["referenceType"],o),e}function lS(t){const e={},n=f(t,["uri"]);n!=null&&h(e,["uri"],n);const o=f(t,["videoBytes"]);o!=null&&h(e,["encodedVideo"],mr(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["encoding"],s),e}function uS(t){const e={},n=f(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const o=f(t,["videoBytes"]);o!=null&&h(e,["bytesBase64Encoded"],mr(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pM(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),n}function mM(t){const e={},n=f(t,["config"]);return n!=null&&pM(n,e),e}function gM(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),n}function yM(t){const e={},n=f(t,["name"]);n!=null&&h(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&gM(o,e),e}function vM(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function _M(t,e){const n={},o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const s=f(t,["chunkingConfig"]);return e!==void 0&&s!=null&&h(e,["chunkingConfig"],s),n}function EM(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],SM(u)),e}function TM(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const o=f(t,["fileName"]);o!=null&&h(e,["fileName"],o);const s=f(t,["config"]);return s!=null&&_M(s,e),e}function SM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const s=f(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function AM(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function CM(t){const e={},n=f(t,["config"]);return n!=null&&AM(n,e),e}function wM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function cS(t,e){const n={},o=f(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const s=f(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(t,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),n}function IM(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const o=f(t,["config"]);return o!=null&&cS(o,e),e}function bM(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RM="Content-Type",xM="X-Server-Timeout",NM="User-Agent",gp="x-goog-api-client",MM="1.38.0",DM=`google-genai-sdk/${MM}`,VM="v1beta1",PM="v1beta";class kM{constructor(e){var n,o,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:VM}else{if(!this.clientOptions.apiKey)throw new ql({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:PM,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===cp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))s.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(n))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,s){if(n&&n.timeout||s){const l=new AbortController,u=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>l.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=u}return n&&n.extraBody!==null&&UM(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await $0(s),new fp(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await $0(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return ci(this,arguments,function*(){var o;const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:_}=yield Ie(s.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(_,{stream:!0});try{const V=JSON.parse(E);if("error"in V){const O=JSON.parse(JSON.stringify(V.error)),P=O.status,G=O.code,Z=`got status: ${P}. ${JSON.stringify(V)}`;if(G>=400&&G<600)throw new ql({message:Z,status:G})}}catch(V){if(V.name==="ApiError")throw V}u+=E;let T=-1,I=0;for(;;){T=-1,I=0;for(const P of g){const G=u.indexOf(P);G!==-1&&(T===-1||G<T)&&(T=G,I=P.length)}if(T===-1)break;const V=u.substring(0,T);u=u.substring(T+I);const O=V.trim();if(O.startsWith(d)){const P=O.substring(d.length).trim();try{const G=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ie(new fp(G))}catch(G){throw new Error(`exception parsing stream chunk ${P}. ${G}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=DM+" "+this.clientOptions.userAgentExtra;return e[NM]=n,e[gp]=n,e[RM]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))o.append(s,l);e.timeout&&e.timeout>0&&o.append(xM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);s.sizeBytes=String(u.size);const d=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const g={file:s},p=this.getFileName(e),_=fe("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(_,s.sizeBytes,s.mimeType,p,g,n==null?void 0:n.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,o){var s;const l=this.clientOptions.uploader,u=await l.stat(n),d=String(u.size),g=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),E={};o!=null&&cS(o,E);const T=await this.fetchUploadUrl(p,d,g,_,E,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,s,l,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=p==null?void 0:p.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function $0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new ql({message:s,status:n}):new Error(s)}}function UM(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,u){const d=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const p=u[g],_=d[g];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?d[g]=o(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),d[g]=p)}return d}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LM="mcp_used/unknown";let OM=!1;function fS(t){for(const e of t)if(BM(e)||typeof e=="object"&&"inputSchema"in e)return!0;return OM}function dS(t){var e;const n=(e=t[gp])!==null&&e!==void 0?e:"";t[gp]=(n+` ${LM}`).trimStart()}function BM(t){return t!==null&&typeof t=="object"&&t instanceof em}function FM(t){return ci(this,arguments,function*(n,o=100){let s,l=0;for(;l<o;){const u=yield Ie(n.listTools({cursor:s}));for(const d of u.tools)yield yield Ie(d),l++;if(!u.nextCursor)break;s=u.nextCursor}})}class em{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new em(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,g=(n=void 0,fi(FM(_))),p;p=await g.next(),e=p.done,!e;d=!0){s=p.value,d=!1;const E=s;u.push(E);const T=E.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=_}}catch(E){n={error:E}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),yR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await s.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function qM(t,e,n){const o=new uR;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(o,s),e(o)}class zM{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=YM(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const _=new Promise(W=>{p=W}),E=e.callbacks,T=function(){p({})},I=this.apiClient,V={onopen:T,onmessage:W=>{qM(I,E.onmessage,W)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(W){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(W){}},O=this.webSocketFactory.create(g,HM(u),V);O.connect(),await _;const Z={setup:{model:Je(this.apiClient,e.model)}};return O.send(JSON.stringify(Z)),new GM(O,this.apiClient)}}class GM{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=pN(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=hN(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ea.PLAY)}pause(){this.sendPlaybackControl(ea.PAUSE)}stop(){this.sendPlaybackControl(ea.STOP)}resetContext(){this.sendPlaybackControl(ea.RESET_CONTEXT)}close(){this.conn.close()}}function HM(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function YM(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function JM(t,e,n){const o=new lR;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const l=JSON.parse(s);if(t.isVertexAI()){const u=yN(l);Object.assign(o,u)}else Object.assign(o,l);e(o)}class $M{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new zM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&fS(e.config.tools)&&dS(E);const T=WM(E);if(this.apiClient.isVertexAI()){const x=this.apiClient.getProject(),L=this.apiClient.getLocation(),k=this.apiClient.getApiKey(),q=!!x&&!!L||!!k;this.apiClient.getCustomBaseUrl()&&!q?_=g:(_=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,_))}else{const x=this.apiClient.getApiKey();let L="BidiGenerateContent",k="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",k="access_token"),_=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${L}?${k}=${x}`}let I=()=>{};const V=new Promise(x=>{I=x}),O=e.callbacks,P=function(){var x;(x=O==null?void 0:O.onopen)===null||x===void 0||x.call(O),I({})},G=this.apiClient,Z={onopen:P,onmessage:x=>{JM(G,O.onmessage,x)},onerror:(n=O==null?void 0:O.onerror)!==null&&n!==void 0?n:function(x){},onclose:(o=O==null?void 0:O.onclose)!==null&&o!==void 0?o:function(x){}},W=this.webSocketFactory.create(_,ZM(T),Z);W.connect(),await V;let se=Je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const x=this.apiClient.getProject(),L=this.apiClient.getLocation();x&&L&&(se=`projects/${x}/locations/${L}/`+se)}let ee={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[jc.AUDIO]}:e.config.responseModalities=[jc.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ce=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const x of ce)if(this.isCallableTool(x)){const L=x;N.push(await L.tool())}else N.push(x);N.length>0&&(e.config.tools=N);const M={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ee=dN(this.apiClient,M):ee=fN(this.apiClient,M),delete ee.config,W.send(JSON.stringify(ee)),new XM(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const QM={turnComplete:!0};class XM{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Xn(n.turns),e.isVertexAI()||(o=o.map(s=>Tf(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(KM)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},QM),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:gN(e)}:n={realtimeInput:mN(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ZM(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function WM(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q0=10;function X0(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ia(u)){s=!0;break}if(!s)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ia(t){return"callTool"in t&&typeof t.callTool=="function"}function jM(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>ia(s)))!==null&&o!==void 0?o:!1}function Z0(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(ia(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(s)}),n}function W0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eD extends vo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,l,u,d;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!jM(n)||X0(n.config))return await this.generateContentInternal(g);const p=Z0(n);if(p.length>0){const O=p.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let _,E;const T=Xn(g.contents),I=(l=(s=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Q0;let V=0;for(;V<I&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const O=_.candidates[0].content,P=[];for(const G of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ia(G)){const W=await G.callTool(_.functionCalls);P.push(...W)}V++,E={role:"user",parts:P},g.contents=Xn(g.contents),g.contents.push(O),g.contents.push(E),W0(g.config)&&(T.push(O),T.push(E))}return W0(g.config)&&(_.automaticFunctionCallingHistory=T),_},this.generateContentStream=async n=>{var o,s,l,u,d;if(this.maybeMoveToResponseJsonSchem(n),X0(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const g=Z0(n);if(g.length>0){const E=g.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(s=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let l;const u=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((s=g==null?void 0:g.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async n=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new os(ho.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var o,s,l,u,d,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(d=n.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>ia(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&fS(e.config.tools)){const g=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),dS(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var n,o,s;const l=new Map;for(const u of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(ia(u)){const d=u,g=await d.tool();for(const p of(s=g.functionDeclarations)!==null&&s!==void 0?s:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,d)}}return l}async processAfcStream(e){var n,o,s;const l=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Q0;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(p,_,E){return ci(this,arguments,function*(){for(var T,I,V,O,P,G;d<l;){u&&(d++,u=!1);const ee=yield Ie(p.processParamsMaybeAddMcpUsage(E)),ce=yield Ie(p.generateContentStreamInternal(ee)),N=[],M=[];try{for(var Z=!0,W=(I=void 0,fi(ce)),se;se=yield Ie(W.next()),T=se.done,!T;Z=!0){O=se.value,Z=!1;const x=O;if(yield yield Ie(x),x.candidates&&(!((P=x.candidates[0])===null||P===void 0)&&P.content)){M.push(x.candidates[0].content);for(const L of(G=x.candidates[0].content.parts)!==null&&G!==void 0?G:[])if(d<l&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(L.functionCall.name)){const k=yield Ie(_.get(L.functionCall.name).callTool([L.functionCall]));N.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(x){I={error:x}}finally{try{!Z&&!T&&(V=W.return)&&(yield Ie(V.call(W)))}finally{if(I)throw I.error}}if(N.length>0){u=!0;const x=new bl;x.candidates=[{content:{role:"user",parts:N}}],yield yield Ie(x);const L=[];L.push(...M),L.push({role:"user",parts:N});const k=Xn(E.contents).concat(L);E.contents=k}else break}})})(this,g,e)}async generateContentInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=Y0(this.apiClient,e);return d=fe("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=J0(_),T=new bl;return Object.assign(T,E),T})}else{const p=H0(this.apiClient,e);return d=fe("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=K0(_),T=new bl;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=Y0(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(E){return ci(this,arguments,function*(){var T,I,V,O;try{for(var P=!0,G=fi(E),Z;Z=yield Ie(G.next()),T=Z.done,!T;P=!0){O=Z.value,P=!1;const W=O,se=J0(yield Ie(W.json()));se.sdkHttpResponse={headers:W.headers};const ee=new bl;Object.assign(ee,se),yield yield Ie(ee)}}catch(W){I={error:W}}finally{try{!P&&!T&&(V=G.return)&&(yield Ie(V.call(G)))}finally{if(I)throw I.error}}})})}else{const p=H0(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return ci(this,arguments,function*(){var T,I,V,O;try{for(var P=!0,G=fi(E),Z;Z=yield Ie(G.next()),T=Z.done,!T;P=!0){O=Z.value,P=!1;const W=O,se=K0(yield Ie(W.json()));se.sdkHttpResponse={headers:W.headers};const ee=new bl;Object.assign(ee,se),yield yield Ie(ee)}}catch(W){I={error:W}}finally{try{!P&&!T&&(V=G.return)&&(yield Ie(V.call(G)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=$N(this.apiClient,e);return d=fe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=XN(_),T=new b0;return Object.assign(T,E),T})}else{const p=JN(this.apiClient,e);return d=fe("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=QN(_),T=new b0;return Object.assign(T,E),T})}}async generateImagesInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=a1(this.apiClient,e);return d=fe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=u1(_),T=new R0;return Object.assign(T,E),T})}else{const p=s1(this.apiClient,e);return d=fe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=l1(_),T=new R0;return Object.assign(T,E),T})}}async editImageInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=GN(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>{const p=HN(g),_=new Zb;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=aM(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>{const p=lM(g),_=new Wb;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=z1(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const p=G1(g),_=new jb;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Q1(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const p=X1(g),_=new eR;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=I1(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>mp(_))}else{const p=w1(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>pp(_))}}async listInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=k1(this.apiClient,e);return d=fe("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=L1(_),T=new x0;return Object.assign(T,E),T})}else{const p=P1(this.apiClient,e);return d=fe("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=U1(_),T=new x0;return Object.assign(T,E),T})}}async update(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=rM(this.apiClient,e);return d=fe("{model}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>mp(_))}else{const p=oM(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>pp(_))}}async delete(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=BN(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=qN(_),T=new N0;return Object.assign(T,E),T})}else{const p=ON(this.apiClient,e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=FN(_),T=new N0;return Object.assign(T,E),T})}}async countTokens(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=kN(this.apiClient,e);return d=fe("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=LN(_),T=new M0;return Object.assign(T,E),T})}else{const p=PN(this.apiClient,e);return d=fe("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=UN(_),T=new M0;return Object.assign(T,E),T})}}async computeTokens(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=bN(this.apiClient,e);return l=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>{const p=RN(g),_=new tR;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=m1(this.apiClient,e);return d=fe("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>{const E=h1(_),T=new ef;return Object.assign(T,E),T})}else{const p=p1(this.apiClient,e);return d=fe("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const E=d1(_),T=new ef;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tD extends vo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=Yb(e);return d=fe("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u}else{const p=Hb(e);return d=fe("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Lb(e);return l=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nD(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function iD(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>dD(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function oD(t,e,n){const o={},s=f(e,["expireTime"]);n!==void 0&&s!=null&&h(n,["expireTime"],s);const l=f(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&h(n,["newSessionExpireTime"],l);const u=f(e,["uses"]);n!==void 0&&u!=null&&h(n,["uses"],u);const d=f(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&h(n,["bidiGenerateContentSetup"],fD(t,d));const g=f(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&h(n,["fieldMask"],g),o}function rD(t,e){const n={},o=f(e,["config"]);return o!=null&&h(n,["config"],oD(t,o,n)),n}function sD(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function aD(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lD(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function uD(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function cD(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=f(t,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],jp(E));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","thinkingConfig"],T);const I=f(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const V=f(t,["systemInstruction"]);e!==void 0&&V!=null&&h(e,["setup","systemInstruction"],iD(sn(V)));const O=f(t,["tools"]);if(e!==void 0&&O!=null){let ce=ya(O);Array.isArray(ce)&&(ce=ce.map(N=>pD(ga(N)))),h(e,["setup","tools"],ce)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&h(e,["setup","sessionResumption"],hD(P));const G=f(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&h(e,["setup","inputAudioTranscription"],G);const Z=f(t,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const W=f(t,["realtimeInputConfig"]);e!==void 0&&W!=null&&h(e,["setup","realtimeInputConfig"],W);const se=f(t,["contextWindowCompression"]);e!==void 0&&se!=null&&h(e,["setup","contextWindowCompression"],se);const ee=f(t,["proactivity"]);if(e!==void 0&&ee!=null&&h(e,["setup","proactivity"],ee),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function fD(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["setup","model"],Je(t,o));const s=f(e,["config"]);return s!=null&&h(n,["config"],cD(s,n)),n}function dD(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],sD(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],aD(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],nD(g));const p=f(t,["text"]);p!=null&&h(e,["text"],p);const _=f(t,["thought"]);_!=null&&h(e,["thought"],_);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const T=f(t,["videoMetadata"]);return T!=null&&h(e,["videoMetadata"],T),e}function hD(t){const e={},n=f(t,["handle"]);if(n!=null&&h(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pD(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],lD(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],uD(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mD(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${n}.${l}`);e.push(...s)}else e.push(n)}return e.join(",")}function gD(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const l=mD(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(p=>u.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class yD extends vo{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=rD(this.apiClient,e);l=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=gD(d,e.config);return s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vD(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),n}function _D(t){const e={},n=f(t,["name"]);n!=null&&h(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&vD(o,e),e}function ED(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function TD(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function SD(t){const e={},n=f(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const o=f(t,["config"]);return o!=null&&TD(o,e),e}function AD(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CD extends vo{constructor(e){super(),this.apiClient=e,this.list=async n=>new os(ho.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ED(e);return l=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_D(e);s=fe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=SD(e);return l=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const p=AD(g),_=new nR;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wD extends vo{constructor(e,n=new CD(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new os(ho.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mM(e);return l=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async get(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=vM(e);return l=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=yM(e);s=fe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=CM(e);return l=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const p=wM(g),_=new iR;return Object.assign(_,p),_})}}async uploadToFileSearchStoreInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IM(e);return l=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const p=bM(g),_=new oR;return Object.assign(_,p),_})}}async importFile(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=TM(e);return l=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const p=EM(g),_=new $p;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hS=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return hS=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const ID=()=>hS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const vp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zn extends Error{}class dn extends Zn{constructor(e,n,o,s){super(`${dn.makeMessage(e,n,o)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,o){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,o,s){if(!e||!s)return new Cf({message:o,cause:vp(n)});const l=n;return e===400?new mS(e,l,o,s):e===401?new gS(e,l,o,s):e===403?new yS(e,l,o,s):e===404?new vS(e,l,o,s):e===409?new _S(e,l,o,s):e===422?new ES(e,l,o,s):e===429?new TS(e,l,o,s):e>=500?new SS(e,l,o,s):new dn(e,l,o,s)}}class _p extends dn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Cf extends dn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class pS extends Cf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class mS extends dn{}class gS extends dn{}class yS extends dn{}class vS extends dn{}class _S extends dn{}class ES extends dn{}class TS extends dn{}class SS extends dn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bD=/^[a-z][a-z0-9+.-]*:/i,RD=t=>bD.test(t);let Ep=t=>(Ep=Array.isArray,Ep(t));const xD=Ep;let ND=xD;const j0=ND;function MD(t){if(!t)return!0;for(const e in t)return!1;return!0}function DD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const VD=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Zn(`${t} must be an integer`);if(e<0)throw new Zn(`${t} must be a positive integer`);return e},PD=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kD=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qs="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UD(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const LD=()=>{var t,e,n,o,s;const l=UD();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qs,"X-Stainless-OS":tE(Deno.build.os),"X-Stainless-Arch":eE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qs,"X-Stainless-OS":tE((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":eE((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const u=OD();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function OD(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const s=o[1]||0,l=o[2]||0,u=o[3]||0;return{browser:e,version:`${s}.${l}.${u}`}}}return null}const eE=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",tE=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Pc;const BD=()=>Pc??(Pc=LD());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FD(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function AS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function qD(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return AS({start(){},async pull(n){const{done:o,value:s}=await e.next();o?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function CS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function zD(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),s=o.cancel();o.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GD=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wS=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function $h(t,e,n){return wS(),new File(t,e??"unknown_file",n)}function HD(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const YD=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IS=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",KD=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&IS(t),JD=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function $D(t,e,n){if(wS(),t=await t,KD(t))return t instanceof File?t:$h([await t.arrayBuffer()],t.name);if(JD(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),$h(await Tp(s),e,n)}const o=await Tp(t);if(e||(e=HD(t)),!(n!=null&&n.type)){const s=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return $h(o,e,n)}async function Tp(t){var e,n,o,s,l;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(IS(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(YD(t))try{for(var d=!0,g=fi(t),p;p=await g.next(),e=p.done,!e;d=!0){s=p.value,d=!1;const _=s;u.push(...await Tp(_))}}catch(_){n={error:_}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}else{const _=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${QD(t)}`)}return u}function QD(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bS{constructor(e){this._client=e}}bS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RS(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const nE=Object.freeze(Object.create(null)),XD=(t=RS)=>(function(n,...o){if(n.length===1)return n[0];let s=!1;const l=[],u=n.reduce((_,E,T)=>{var I,V,O;/[?#]/.test(E)&&(s=!0);const P=o[T];let G=(s?encodeURIComponent:t)(""+P);return T!==o.length&&(P==null||typeof P=="object"&&P.toString===((O=Object.getPrototypeOf((V=Object.getPrototypeOf((I=P.hasOwnProperty)!==null&&I!==void 0?I:nE))!==null&&V!==void 0?V:nE))===null||O===void 0?void 0:O.toString))&&(G=P+"",l.push({start:_.length+E.length,length:G.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+E+(T===o.length?"":G)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(d))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((_,E)=>_.start-E.start),l.length>0){let _=0;const E=l.reduce((T,I)=>{const V=" ".repeat(I.start-_),O="^".repeat(I.length);return _=I.start+I.length,T+V+O},"");throw new Zn(`Path parameters result in path with invalid segments:
${l.map(T=>T.error).join(`
`)}
${u}
${E}`)}return u}),kc=XD(RS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xS extends bS{create(e,n){var o;const{api_version:s=this._client.apiVersion}=e,l=nf(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Zn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Zn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(kc`/${s}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(kc`/${s}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(kc`/${s}/interactions/${e}/cancel`,o)}get(e,n={},o){var s;const l=n??{},{api_version:u=this._client.apiVersion}=l,d=nf(l,["api_version"]);return this._client.get(kc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}xS._key=Object.freeze(["interactions"]);class NS extends xS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZD(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let o=0;for(const s of t)n.set(s,o),o+=s.length;return n}let Uc;function tm(t){let e;return(Uc??(e=new globalThis.TextEncoder,Uc=e.encode.bind(e)))(t)}let Lc;function iE(t){let e;return(Lc??(e=new globalThis.TextDecoder,Lc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?tm(e):e;this.buffer=ZD([this.buffer,n]);const o=[];let s;for(;(s=WD(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(iE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,u=iE(this.buffer.subarray(0,l));o.push(u),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}wf.NEWLINE_CHARS=new Set([`
`,"\r"]);wf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function WD(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function jD(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const of={off:0,error:200,warn:300,info:400,debug:500},oE=(t,e,n)=>{if(t){if(DD(of,t))return t;cn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(of))}`)}};function Nl(){}function Oc(t,e,n){return!e||of[t]>of[n]?Nl:e[t].bind(e)}const e2={error:Nl,warn:Nl,info:Nl,debug:Nl};let rE=new WeakMap;function cn(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return e2;const s=rE.get(n);if(s&&s[0]===o)return s[1];const l={error:Oc("error",n,o),warn:Oc("warn",n,o),info:Oc("info",n,o),debug:Oc("debug",n,o)};return rE.set(n,[o,l]),l}const $r=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ta{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let s=!1;const l=o?cn(o):console;function u(){return ci(this,arguments,function*(){var g,p,_,E;if(s)throw new Zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let T=!1;try{try{for(var I=!0,V=fi(t2(e,n)),O;O=yield Ie(V.next()),g=O.done,!g;I=!0){E=O.value,I=!1;const P=E;if(!T)if(P.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Ie(JSON.parse(P.data))}catch(G){throw l.error("Could not parse message into JSON:",P.data),l.error("From chunk:",P.raw),G}}}catch(P){p={error:P}}finally{try{!I&&!g&&(_=V.return)&&(yield Ie(_.call(V)))}finally{if(p)throw p.error}}T=!0}catch(P){if(yp(P))return yield Ie(void 0);throw P}finally{T||n.abort()}})}return new ta(u,n,o)}static fromReadableStream(e,n,o){let s=!1;function l(){return ci(this,arguments,function*(){var g,p,_,E;const T=new wf,I=CS(e);try{for(var V=!0,O=fi(I),P;P=yield Ie(O.next()),g=P.done,!g;V=!0){E=P.value,V=!1;const G=E;for(const Z of T.decode(G))yield yield Ie(Z)}}catch(G){p={error:G}}finally{try{!V&&!g&&(_=O.return)&&(yield Ie(_.call(O)))}finally{if(p)throw p.error}}for(const G of T.flush())yield yield Ie(G)})}function u(){return ci(this,arguments,function*(){var g,p,_,E;if(s)throw new Zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let T=!1;try{try{for(var I=!0,V=fi(l()),O;O=yield Ie(V.next()),g=O.done,!g;I=!0){E=O.value,I=!1;const P=E;T||P&&(yield yield Ie(JSON.parse(P)))}}catch(P){p={error:P}}finally{try{!I&&!g&&(_=V.return)&&(yield Ie(_.call(V)))}finally{if(p)throw p.error}}T=!0}catch(P){if(yp(P))return yield Ie(void 0);throw P}finally{T||n.abort()}})}return new ta(u,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),s=l=>({next:()=>{if(l.length===0){const u=o.next();e.push(u),n.push(u)}return l.shift()}});return[new ta(()=>s(e),this.controller,this.client),new ta(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return AS({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:l}=await n.next();if(l)return o.close();const u=tm(JSON.stringify(s)+`
`);o.enqueue(u)}catch(s){o.error(s)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function t2(t,e){return ci(this,arguments,function*(){var o,s,l,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Zn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Zn("Attempted to iterate over a response with no body");const d=new i2,g=new wf,p=CS(t.body);try{for(var _=!0,E=fi(n2(p)),T;T=yield Ie(E.next()),o=T.done,!o;_=!0){u=T.value,_=!1;const I=u;for(const V of g.decode(I)){const O=d.decode(V);O&&(yield yield Ie(O))}}}catch(I){s={error:I}}finally{try{!_&&!o&&(l=E.return)&&(yield Ie(l.call(E)))}finally{if(s)throw s.error}}for(const I of g.flush()){const V=d.decode(I);V&&(yield yield Ie(V))}})}function n2(t){return ci(this,arguments,function*(){var n,o,s,l;let u=new Uint8Array;try{for(var d=!0,g=fi(t),p;p=yield Ie(g.next()),n=p.done,!n;d=!0){l=p.value,d=!1;const _=l;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?tm(_):_;let T=new Uint8Array(u.length+E.length);T.set(u),T.set(E,u.length),u=T;let I;for(;(I=jD(u))!==-1;)yield yield Ie(u.slice(0,I)),u=u.slice(I)}}catch(_){o={error:_}}finally{try{!d&&!n&&(s=g.return)&&(yield Ie(s.call(g)))}finally{if(o)throw o.error}}u.length>0&&(yield yield Ie(u))})}class i2{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,s]=o2(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function o2(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function r2(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:s,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return cn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ta.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),p=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await n.json():await n.text()})();return cn(t).debug(`[${o}] response parsed`,$r({retryOfRequestLogID:s,url:n.url,status:n.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nm extends Promise{constructor(e,n,o=r2){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new nm(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MS=Symbol("brand.privateNullableHeaders");function*s2(t){if(!t)return;if(MS in t){const{values:o,nulls:s}=t;yield*o.entries();for(const l of s)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():j0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const l=j0(o[1])?o[1]:[o[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[s,null]),yield[s,d])}}const Rl=t=>{const e=new Headers,n=new Set;for(const o of t){const s=new Set;for(const[l,u]of s2(o)){const d=l.toLowerCase();s.has(d)||(e.delete(l),s.add(d)),u===null?(e.delete(l),n.add(d)):(e.append(l,u),n.delete(d))}}return{[MS]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qh=t=>{var e,n,o,s,l,u;if(typeof globalThis.process<"u")return(o=(n=(e=Mb)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||l===void 0?void 0:l.call(s,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var DS;class If{constructor(e){var n,o,s,l,u,d,g,{baseURL:p=Qh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=Qh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=e,T=nf(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:_,apiVersion:E},T),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(o=I.timeout)!==null&&o!==void 0?o:If.DEFAULT_TIMEOUT,this.logger=(s=I.logger)!==null&&s!==void 0?s:console;const V="warn";this.logLevel=V,this.logLevel=(u=(l=oE(I.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:oE(Qh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:V,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=I.fetch)!==null&&g!==void 0?g:FD(),this.encoder=GD,this._options=I,this.apiKey=_,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Rl([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Rl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Rl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new Zn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Qs}`}defaultIdempotencyKey(){return`stainless-node-retry-${ID()}`}makeStatusError(e,n,o,s){return dn.generate(e,n,o,s)}buildURL(e,n,o){const s=!this.baseURLOverridden()&&o||this.baseURL,l=RD(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return MD(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new nm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var s,l,u;const d=await e,g=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=g),await this.prepareOptions(d);const{req:p,url:_,timeout:E}=await this.buildRequest(d,{retryCount:g-n});await this.prepareRequest(p,{url:_,options:d});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=o===void 0?"":`, retryOf: ${o}`,V=Date.now();if(cn(this).debug(`[${T}] sending request`,$r({retryOfRequestLogID:o,method:d.method,url:_,options:d,headers:p.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new _p;const O=new AbortController,P=await this.fetchWithTimeout(_,p,E,O).catch(vp),G=Date.now();if(P instanceof globalThis.Error){const W=`retrying, ${n} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new _p;const se=yp(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(n)return cn(this).info(`[${T}] connection ${se?"timed out":"failed"} - ${W}`),cn(this).debug(`[${T}] connection ${se?"timed out":"failed"} (${W})`,$r({retryOfRequestLogID:o,url:_,durationMs:G-V,message:P.message})),this.retryRequest(d,n,o??T);throw cn(this).info(`[${T}] connection ${se?"timed out":"failed"} - error; no more retries left`),cn(this).debug(`[${T}] connection ${se?"timed out":"failed"} (error; no more retries left)`,$r({retryOfRequestLogID:o,url:_,durationMs:G-V,message:P.message})),se?new pS:new Cf({cause:P})}const Z=`[${T}${I}] ${p.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${G-V}ms`;if(!P.ok){const W=await this.shouldRetry(P);if(n&&W){const x=`retrying, ${n} attempts remaining`;return await zD(P.body),cn(this).info(`${Z} - ${x}`),cn(this).debug(`[${T}] response error (${x})`,$r({retryOfRequestLogID:o,url:P.url,status:P.status,headers:P.headers,durationMs:G-V})),this.retryRequest(d,n,o??T,P.headers)}const se=W?"error; no more retries left":"error; not retryable";cn(this).info(`${Z} - ${se}`);const ee=await P.text().catch(x=>vp(x).message),ce=PD(ee),N=ce?void 0:ee;throw cn(this).debug(`[${T}] response error (${se})`,$r({retryOfRequestLogID:o,url:P.url,status:P.status,headers:P.headers,message:N,durationMs:Date.now()-V})),this.makeStatusError(P.status,ce,N,P.headers)}return cn(this).info(Z),cn(this).debug(`[${T}] response start`,$r({retryOfRequestLogID:o,url:P.url,status:P.status,headers:P.headers,durationMs:G-V})),{response:P,options:d,controller:O,requestLogID:T,retryOfRequestLogID:o,startTime:V}}async fetchWithTimeout(e,n,o,s){const l=n||{},{signal:u,method:d}=l,g=nf(l,["signal","method"]);u&&u.addEventListener("abort",()=>s.abort());const p=setTimeout(()=>s.abort(),o),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,E=Object.assign(Object.assign(Object.assign({signal:s.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(p)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,s){var l;let u;const d=s==null?void 0:s.get("retry-after-ms");if(d){const p=parseFloat(d);Number.isNaN(p)||(u=p)}const g=s==null?void 0:s.get("retry-after");if(g&&!u){const p=parseFloat(g);Number.isNaN(p)?u=Date.parse(g)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,p)}return await kD(u),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,s,l;const u=Object.assign({},e),{method:d,path:g,query:p,defaultBaseURL:_}=u,E=this.buildURL(g,p,_);"timeout"in u&&VD("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:T,body:I}=this.buildBody({options:u}),V=await this.buildHeaders({options:e,method:d,bodyHeaders:T,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:V},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:s}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Rl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),BD()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Rl([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:qD(e)}:this.encoder({body:e,headers:o})}}If.DEFAULT_TIMEOUT=6e4;class Yt extends If{constructor(){super(...arguments),this.interactions=new NS(this)}}DS=Yt;Yt.GeminiNextGenAPIClient=DS;Yt.GeminiNextGenAPIClientError=Zn;Yt.APIError=dn;Yt.APIConnectionError=Cf;Yt.APIConnectionTimeoutError=pS;Yt.APIUserAbortError=_p;Yt.NotFoundError=vS;Yt.ConflictError=_S;Yt.RateLimitError=TS;Yt.BadRequestError=mS;Yt.AuthenticationError=gS;Yt.InternalServerError=SS;Yt.PermissionDeniedError=yS;Yt.UnprocessableEntityError=ES;Yt.toFile=$D;Yt.Interactions=NS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a2(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function l2(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function u2(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function c2(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function f2(t,e,n){const o={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&h(e,["displayName"],s),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(t,["learningRateMultiplier"]);if(u!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(t,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function d2(t,e,n){const o={};let s=f(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const I=f(t,["validationDataset"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec"],sE(I))}else if(s==="PREFERENCE_TUNING"){const I=f(t,["validationDataset"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec"],sE(I))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=f(t,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(t,["epochCount"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(t,["epochCount"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let g=f(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const I=f(t,["learningRateMultiplier"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(g==="PREFERENCE_TUNING"){const I=f(t,["learningRateMultiplier"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let p=f(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const I=f(t,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(p==="PREFERENCE_TUNING"){const I=f(t,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let _=f(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const I=f(t,["adapterSize"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(_==="PREFERENCE_TUNING"){const I=f(t,["adapterSize"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(t,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const T=f(t,["beta"]);return e!==void 0&&T!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),o}function h2(t,e){const n={},o=f(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const s=f(t,["preTunedModel"]);s!=null&&h(n,["preTunedModel"],s);const l=f(t,["trainingDataset"]);l!=null&&C2(l);const u=f(t,["config"]);return u!=null&&f2(u,n),n}function p2(t,e){const n={},o=f(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const s=f(t,["preTunedModel"]);s!=null&&h(n,["preTunedModel"],s);const l=f(t,["trainingDataset"]);l!=null&&w2(l,n,e);const u=f(t,["config"]);return u!=null&&d2(u,n,e),n}function m2(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function g2(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function y2(t,e,n){const o={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(t,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function v2(t,e,n){const o={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(t,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function _2(t,e){const n={},o=f(t,["config"]);return o!=null&&y2(o,n),n}function E2(t,e){const n={},o=f(t,["config"]);return o!=null&&v2(o,n),n}function T2(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["nextPageToken"]);s!=null&&h(n,["nextPageToken"],s);const l=f(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>VS(d))),h(n,["tuningJobs"],u)}return n}function S2(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["nextPageToken"]);s!=null&&h(n,["nextPageToken"],s);const l=f(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Sp(d))),h(n,["tuningJobs"],u)}return n}function A2(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["model"],o);const s=f(t,["name"]);return s!=null&&h(n,["endpoint"],s),n}function C2(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),h(n,["examples","examples"],s)}return n}function w2(t,e,n){const o={};let s=f(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(s==="PREFERENCE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function VS(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["name"]);s!=null&&h(n,["name"],s);const l=f(t,["state"]);l!=null&&h(n,["state"],QT(l));const u=f(t,["createTime"]);u!=null&&h(n,["createTime"],u);const d=f(t,["tuningTask","startTime"]);d!=null&&h(n,["startTime"],d);const g=f(t,["tuningTask","completeTime"]);g!=null&&h(n,["endTime"],g);const p=f(t,["updateTime"]);p!=null&&h(n,["updateTime"],p);const _=f(t,["description"]);_!=null&&h(n,["description"],_);const E=f(t,["baseModel"]);E!=null&&h(n,["baseModel"],E);const T=f(t,["_self"]);return T!=null&&h(n,["tunedModel"],A2(T)),n}function Sp(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["name"]);s!=null&&h(n,["name"],s);const l=f(t,["state"]);l!=null&&h(n,["state"],QT(l));const u=f(t,["createTime"]);u!=null&&h(n,["createTime"],u);const d=f(t,["startTime"]);d!=null&&h(n,["startTime"],d);const g=f(t,["endTime"]);g!=null&&h(n,["endTime"],g);const p=f(t,["updateTime"]);p!=null&&h(n,["updateTime"],p);const _=f(t,["error"]);_!=null&&h(n,["error"],_);const E=f(t,["description"]);E!=null&&h(n,["description"],E);const T=f(t,["baseModel"]);T!=null&&h(n,["baseModel"],T);const I=f(t,["tunedModel"]);I!=null&&h(n,["tunedModel"],I);const V=f(t,["preTunedModel"]);V!=null&&h(n,["preTunedModel"],V);const O=f(t,["supervisedTuningSpec"]);O!=null&&h(n,["supervisedTuningSpec"],O);const P=f(t,["preferenceOptimizationSpec"]);P!=null&&h(n,["preferenceOptimizationSpec"],P);const G=f(t,["tuningDataStats"]);G!=null&&h(n,["tuningDataStats"],G);const Z=f(t,["encryptionSpec"]);Z!=null&&h(n,["encryptionSpec"],Z);const W=f(t,["partnerModelTuningSpec"]);W!=null&&h(n,["partnerModelTuningSpec"],W);const se=f(t,["customBaseModel"]);se!=null&&h(n,["customBaseModel"],se);const ee=f(t,["experiment"]);ee!=null&&h(n,["experiment"],ee);const ce=f(t,["labels"]);ce!=null&&h(n,["labels"],ce);const N=f(t,["outputUri"]);N!=null&&h(n,["outputUri"],N);const M=f(t,["pipelineJob"]);M!=null&&h(n,["pipelineJob"],M);const x=f(t,["serviceAccount"]);x!=null&&h(n,["serviceAccount"],x);const L=f(t,["tunedModelDisplayName"]);L!=null&&h(n,["tunedModelDisplayName"],L);const k=f(t,["veoTuningSpec"]);return k!=null&&h(n,["veoTuningSpec"],k),n}function I2(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["name"]);s!=null&&h(n,["name"],s);const l=f(t,["metadata"]);l!=null&&h(n,["metadata"],l);const u=f(t,["done"]);u!=null&&h(n,["done"],u);const d=f(t,["error"]);return d!=null&&h(n,["error"],d),n}function sE(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&h(n,["validationDatasetUri"],o);const s=f(t,["vertexDatasetResource"]);return s!=null&&h(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b2 extends vo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new os(ho.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:s});return l.baseModel=void 0,await this.tuneInternal(l)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),l=await this.tuneMldevInternal(s);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:up.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=g2(e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>Sp(_))}else{const p=m2(e);return d=fe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>VS(_))}}async listInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=E2(e);return d=fe("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=S2(_),T=new D0;return Object.assign(T,E),T})}else{const p=_2(e);return d=fe("tunedModels",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=T2(_),T=new D0;return Object.assign(T,E),T})}}async cancel(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=l2(e);return d=fe("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=c2(_),T=new V0;return Object.assign(T,E),T})}else{const p=a2(e);return d=fe("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=u2(_),T=new V0;return Object.assign(T,E),T})}}async tuneInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=p2(e,e);return l=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>Sp(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h2(e);return l=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>I2(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R2{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const x2=1024*1024*8,N2=3,M2=1e3,D2=2,rf="x-goog-upload-status";async function V2(t,e,n){var o;const s=await PS(t,e,n),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[rf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function P2(t,e,n){var o;const s=await PS(t,e,n),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[rf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=GT(l),d=new Qp;return Object.assign(d,u),d}async function PS(t,e,n){var o,s;let l=0,u=0,d=new fp(new Response),g="upload";for(l=t.size;u<l;){const p=Math.min(x2,l-u),_=t.slice(u,u+p);u+p>=l&&(g+=", finalize");let E=0,T=M2;for(;E<N2&&(d=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[rf]));)E++,await U2(T),T=T*D2;if(u+=p,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[rf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function k2(t){return{size:t.size,type:t.type}}function U2(t){return new Promise(e=>setTimeout(e,t))}class L2{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await V2(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await P2(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await k2(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O2{create(e,n,o){return new B2(e,n,o)}}class B2{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aE="x-goog-api-key";class F2{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(aE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(aE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q2="gl-node/";class z2{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=kb(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new F2(this.apiKey);this.apiClient=new kM({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:q2+"web",uploader:new L2,downloader:new R2}),this.models=new eD(this.apiClient),this.live=new $M(this.apiClient,s,new O2),this.batches=new cx(this.apiClient),this.chats=new Yx(this.models,this.apiClient),this.caches=new zx(this.apiClient),this.files=new tN(this.apiClient),this.operations=new tD(this.apiClient),this.authTokens=new yD(this.apiClient),this.tunings=new b2(this.apiClient),this.fileSearchStores=new wD(this.apiClient)}}const lE=new z2({apiKey:void 0}),G2=async(t,e=!1)=>{var d,g,p;const n=lE.models.generateContent({model:"gemini-3-flash-preview",contents:`Find details for the movie "${t}". Return the summary in Turkish. Provide the official IMDb URL.`,config:{responseMimeType:"application/json",responseSchema:{type:Ot.OBJECT,properties:{title:{type:Ot.STRING,description:"Official Turkish title of the movie"},originalTitle:{type:Ot.STRING,description:"Original title of the movie"},year:{type:Ot.STRING,description:"Release year"},genre:{type:Ot.ARRAY,items:{type:Ot.STRING},description:"List of genres (in Turkish)"},director:{type:Ot.STRING,description:"Director name"},summary:{type:Ot.STRING,description:"Short plot summary in Turkish (max 30 words)"},emoji:{type:Ot.STRING,description:"A single emoji best describing the movie"},themeColor:{type:Ot.STRING,description:"A hex color code matching the movie poster mood"},imdbUrl:{type:Ot.STRING,description:"Full URL to the movie's IMDb page"}},required:["title","originalTitle","year","genre","director","summary","emoji","themeColor","imdbUrl"]}}});let o=null;e||(o=lE.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:`A high quality, cinematic movie poster for the movie "${t}". The title "${t}" should be prominently displayed and integrated into the poster design. Minimalist, official style, vertical.`}]},config:{imageConfig:{aspectRatio:"3:4"}}}));let s,l=null;if(o){const _=await Promise.allSettled([n,o]);s=_[0],l=_[1]}else s=(await Promise.allSettled([n]))[0];let u={title:t,originalTitle:t,year:"???",genre:["Bilinmiyor"],director:"Bilinmiyor",summary:"Film detaylar alnamad, ancak kaydnz oluturuldu.",emoji:"",themeColor:"#64748b",imdbUrl:`https://www.imdb.com/find?q=${encodeURIComponent(t)}`};if(s.status==="fulfilled"&&s.value.text)try{u={...u,...JSON.parse(s.value.text)}}catch(_){console.error("Failed to parse metadata JSON",_)}else s.status==="rejected"&&console.error("Text generation failed:",s.reason);if(l&&l.status==="fulfilled"){const _=l.value;if((p=(g=(d=_.candidates)==null?void 0:d[0])==null?void 0:g.content)!=null&&p.parts){for(const E of _.candidates[0].content.parts)if(E.inlineData){u.posterBase64=`data:${E.inlineData.mimeType};base64,${E.inlineData.data}`;break}}}else l&&l.status==="rejected"&&console.error("Image generation failed:",l.reason);return u},H2=()=>{};var uE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Y2=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const s=t[n++];if(s<128)e[o++]=String.fromCharCode(s);else if(s>191&&s<224){const l=t[n++];e[o++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=t[n++],u=t[n++],d=t[n++],g=((s&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const l=t[n++],u=t[n++];e[o++]=String.fromCharCode((s&15)<<12|(l&63)<<6|u&63)}}return e.join("")},US={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let s=0;s<t.length;s+=3){const l=t[s],u=s+1<t.length,d=u?t[s+1]:0,g=s+2<t.length,p=g?t[s+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let T=(d&15)<<2|p>>6,I=p&63;g||(I=64,u||(T=64)),o.push(n[_],n[E],n[T],n[I])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Y2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let s=0;s<t.length;){const l=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,l==null||d==null||p==null||E==null)throw new K2;const T=l<<2|d>>4;if(o.push(T),p!==64){const I=d<<4&240|p>>2;if(o.push(I),E!==64){const V=p<<6&192|E;o.push(V)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class K2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const J2=function(t){const e=kS(t);return US.encodeByteArray(e,!0)},sf=function(t){return J2(t).replace(/\./g,"")},$2=function(t){try{return US.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=()=>Q2().__FIREBASE_DEFAULTS__,Z2=()=>{if(typeof process>"u"||typeof uE>"u")return;const t=uE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},W2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$2(t[1]);return e&&JSON.parse(e)},im=()=>{try{return H2()||X2()||Z2()||W2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},j2=t=>{var e,n;return(n=(e=im())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},eV=t=>{const e=j2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},LS=()=>{var t;return(t=im())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nV(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",s=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${o}`,aud:o,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[sf(JSON.stringify(n)),sf(JSON.stringify(u)),""].join(".")}const Ul={};function oV(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ul))Ul[e]?t.emulator.push(e):t.prod.push(e);return t}function rV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cE=!1;function sV(t,e){if(typeof window>"u"||typeof document>"u"||!om(window.location.host)||Ul[t]===e||Ul[t]||cE)return;Ul[t]=e;function n(T){return`__firebase__banner__${T}`}const o="__firebase__banner",l=oV().prod.length>0;function u(){const T=document.getElementById(o);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{cE=!0,u()},T}function _(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=rV(o),I=n("text"),V=document.getElementById(I)||document.createElement("span"),O=n("learnmore"),P=document.getElementById(O)||document.createElement("a"),G=n("preprendIcon"),Z=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const W=T.element;d(W),_(P,O);const se=p();g(Z,G),W.append(Z,V,P,se),document.body.appendChild(W)}l?(V.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lV(){var e;const t=(e=im())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cV(){return!lV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OS(){try{return typeof indexedDB=="object"}catch{return!1}}function BS(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(o);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(n){e(n)}})}function fV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="FirebaseError";class gr extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=dV,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bf.prototype.create)}}class bf{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},s=`${this.service}/${e}`,l=this.errors[e],u=l?hV(l,o):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new gr(s,d,o)}}function hV(t,e){return t.replace(pV,(n,o)=>{const s=e[o];return s!=null?String(s):`<${o}?>`})}const pV=/\{\$([^}]+)}/g;function zl(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const s of n){if(!o.includes(s))return!1;const l=t[s],u=e[s];if(fE(l)&&fE(u)){if(!zl(l,u))return!1}else if(l!==u)return!1}for(const s of o)if(!n.includes(s))return!1;return!0}function fE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=1e3,gV=2,yV=14400*1e3,vV=.5;function dE(t,e=mV,n=gV){const o=e*Math.pow(n,t),s=Math.round(vV*o*(Math.random()-.5)*2);return Math.min(yV,o+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t){return t&&t._delegate?t._delegate:t}class po{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new tV;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&o.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(o)return null;throw s}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TV(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:s});o.resolve(l)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&u.resolve(s)}return s}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(o)??new Set;s.add(e),this.onInitCallbacks.set(o,s);const l=this.instances.get(o);return l&&e(l,o),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const s of o)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:EV(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EV(t){return t===Qr?void 0:t}function TV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _V(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const AV={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},CV=He.INFO,wV={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},IV=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),s=wV[e];if(s)console[s](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rm{constructor(e){this.name=e,this._logLevel=CV,this._logHandler=IV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const bV=(t,e)=>e.some(n=>t instanceof n);let hE,pE;function RV(){return hE||(hE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xV(){return pE||(pE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FS=new WeakMap,Ap=new WeakMap,qS=new WeakMap,Xh=new WeakMap,sm=new WeakMap;function NV(t){const e=new Promise((n,o)=>{const s=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(ir(t.result)),s()},u=()=>{o(t.error),s()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&FS.set(n,t)}).catch(()=>{}),sm.set(e,t),e}function MV(t){if(Ap.has(t))return;const e=new Promise((n,o)=>{const s=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),s()},u=()=>{o(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});Ap.set(t,e)}let Cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DV(t){Cp=t(Cp)}function VV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(Zh(this),e,...n);return qS.set(o,e.sort?e.sort():[e]),ir(o)}:xV().includes(t)?function(...e){return t.apply(Zh(this),e),ir(FS.get(this))}:function(...e){return ir(t.apply(Zh(this),e))}}function PV(t){return typeof t=="function"?VV(t):(t instanceof IDBTransaction&&MV(t),bV(t,RV())?new Proxy(t,Cp):t)}function ir(t){if(t instanceof IDBRequest)return NV(t);if(Xh.has(t))return Xh.get(t);const e=PV(t);return e!==t&&(Xh.set(t,e),sm.set(e,t)),e}const Zh=t=>sm.get(t);function zS(t,e,{blocked:n,upgrade:o,blocking:s,terminated:l}={}){const u=indexedDB.open(t,e),d=ir(u);return o&&u.addEventListener("upgradeneeded",g=>{o(ir(u.result),g.oldVersion,g.newVersion,ir(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),s&&g.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const kV=["get","getKey","getAll","getAllKeys","count"],UV=["put","add","delete","clear"],Wh=new Map;function mE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wh.get(e))return Wh.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,s=UV.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(s||kV.includes(n)))return;const l=async function(u,...d){const g=this.transaction(u,s?"readwrite":"readonly");let p=g.store;return o&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),s&&g.done]))[0]};return Wh.set(e,l),l}DV(t=>({...t,get:(e,n,o)=>mE(e,n)||t.get(e,n,o),has:(e,n)=>!!mE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OV(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function OV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wp="@firebase/app",gE="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new rm("@firebase/app"),BV="@firebase/app-compat",FV="@firebase/analytics-compat",qV="@firebase/analytics",zV="@firebase/app-check-compat",GV="@firebase/app-check",HV="@firebase/auth",YV="@firebase/auth-compat",KV="@firebase/database",JV="@firebase/data-connect",$V="@firebase/database-compat",QV="@firebase/functions",XV="@firebase/functions-compat",ZV="@firebase/installations",WV="@firebase/installations-compat",jV="@firebase/messaging",eP="@firebase/messaging-compat",tP="@firebase/performance",nP="@firebase/performance-compat",iP="@firebase/remote-config",oP="@firebase/remote-config-compat",rP="@firebase/storage",sP="@firebase/storage-compat",aP="@firebase/firestore",lP="@firebase/ai",uP="@firebase/firestore-compat",cP="firebase",fP="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="[DEFAULT]",dP={[wp]:"fire-core",[BV]:"fire-core-compat",[qV]:"fire-analytics",[FV]:"fire-analytics-compat",[GV]:"fire-app-check",[zV]:"fire-app-check-compat",[HV]:"fire-auth",[YV]:"fire-auth-compat",[KV]:"fire-rtdb",[JV]:"fire-data-connect",[$V]:"fire-rtdb-compat",[QV]:"fire-fn",[XV]:"fire-fn-compat",[ZV]:"fire-iid",[WV]:"fire-iid-compat",[jV]:"fire-fcm",[eP]:"fire-fcm-compat",[tP]:"fire-perf",[nP]:"fire-perf-compat",[iP]:"fire-rc",[oP]:"fire-rc-compat",[rP]:"fire-gcs",[sP]:"fire-gcs-compat",[aP]:"fire-fst",[uP]:"fire-fst-compat",[lP]:"fire-vertex","fire-js":"fire-js",[cP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new Map,hP=new Map,bp=new Map;function yE(t,e){try{t.container.addComponent(e)}catch(n){mo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lr(t){const e=t.name;if(bp.has(e))return mo.debug(`There were multiple attempts to register component ${e}.`),!1;bp.set(e,t);for(const n of af.values())yE(n,t);for(const n of hP.values())yE(n,t);return!0}function Zl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pP(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new bf("app","Firebase",mP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new po("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=fP;function GS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o={name:Ip,automaticDataCollectionEnabled:!0,...e},s=o.name;if(typeof s!="string"||!s)throw or.create("bad-app-name",{appName:String(s)});if(n||(n=LS()),!n)throw or.create("no-options");const l=af.get(s);if(l){if(zl(n,l.options)&&zl(o,l.config))return l;throw or.create("duplicate-app",{appName:s})}const u=new SV(s);for(const g of bp.values())u.addComponent(g);const d=new gP(n,o,u);return af.set(s,d),d}function HS(t=Ip){const e=af.get(t);if(!e&&t===Ip&&LS())return GS();if(!e)throw or.create("no-app",{appName:t});return e}function Fi(t,e,n){let o=dP[t]??t;n&&(o+=`-${n}`);const s=o.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const u=[`Unable to register library "${o}" with version "${e}":`];s&&u.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mo.warn(u.join(" "));return}lr(new po(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="firebase-heartbeat-database",_P=1,Gl="firebase-heartbeat-store";let jh=null;function YS(){return jh||(jh=zS(vP,_P,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gl)}catch(n){console.warn(n)}}}}).catch(t=>{throw or.create("idb-open",{originalErrorMessage:t.message})})),jh}async function EP(t){try{const n=(await YS()).transaction(Gl),o=await n.objectStore(Gl).get(KS(t));return await n.done,o}catch(e){if(e instanceof gr)mo.warn(e.message);else{const n=or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mo.warn(n.message)}}}async function vE(t,e){try{const o=(await YS()).transaction(Gl,"readwrite");await o.objectStore(Gl).put(e,KS(t)),await o.done}catch(n){if(n instanceof gr)mo.warn(n.message);else{const o=or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mo.warn(o.message)}}}function KS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=1024,SP=30;class AP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wP(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=_E();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>SP){const u=IP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){mo.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_E(),{heartbeatsToSend:o,unsentEntries:s}=CP(this._heartbeatsCache.heartbeats),l=sf(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return mo.warn(n),""}}}function _E(){return new Date().toISOString().substring(0,10)}function CP(t,e=TP){const n=[];let o=t.slice();for(const s of t){const l=n.find(u=>u.agent===s.agent);if(l){if(l.dates.push(s.date),EE(n)>e){l.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),EE(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class wP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OS()?BS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return vE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return vE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function EE(t){return sf(JSON.stringify({version:2,heartbeats:t})).length}function IP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let o=1;o<t.length;o++)t[o].date<n&&(n=t[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t){lr(new po("platform-logger",e=>new LV(e),"PRIVATE")),lr(new po("heartbeat",e=>new AP(e),"PRIVATE")),Fi(wp,gE,t),Fi(wp,gE,"esm2020"),Fi("fire-js","")}bP("");var RP="firebase",xP="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi(RP,xP,"app");const JS="@firebase/installations",am="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=1e4,QS=`w:${am}`,XS="FIS_v2",NP="https://firebaseinstallations.googleapis.com/v1",MP=3600*1e3,DP="installations",VP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},es=new bf(DP,VP,PP);function ZS(t){return t instanceof gr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS({projectId:t}){return`${NP}/projects/${t}/installations`}function jS(t){return{token:t.token,requestStatus:2,expiresIn:UP(t.expiresIn),creationTime:Date.now()}}async function eA(t,e){const o=(await e.json()).error;return es.create("request-failed",{requestName:t,serverCode:o.code,serverMessage:o.message,serverStatus:o.status})}function tA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function kP(t,{refreshToken:e}){const n=tA(t);return n.append("Authorization",LP(e)),n}async function nA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function UP(t){return Number(t.replace("s","000"))}function LP(t){return`${XS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const o=WS(t),s=tA(t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const u={fid:n,authVersion:XS,appId:t.appId,sdkVersion:QS},d={method:"POST",headers:s,body:JSON.stringify(u)},g=await nA(()=>fetch(o,d));if(g.ok){const p=await g.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:jS(p.authToken)}}else throw await eA("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=/^[cdef][\w-]{21}$/,Rp="";function qP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=zP(t);return FP.test(n)?n:Rp}catch{return Rp}}function zP(t){return BP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new Map;function rA(t,e){const n=Rf(t);sA(n,e),GP(n,e)}function sA(t,e){const n=oA.get(t);if(n)for(const o of n)o(e)}function GP(t,e){const n=HP();n&&n.postMessage({key:t,fid:e}),YP()}let Xr=null;function HP(){return!Xr&&"BroadcastChannel"in self&&(Xr=new BroadcastChannel("[Firebase] FID Change"),Xr.onmessage=t=>{sA(t.data.key,t.data.fid)}),Xr}function YP(){oA.size===0&&Xr&&(Xr.close(),Xr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebase-installations-database",JP=1,ts="firebase-installations-store";let ep=null;function lm(){return ep||(ep=zS(KP,JP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ts)}}})),ep}async function lf(t,e){const n=Rf(t),s=(await lm()).transaction(ts,"readwrite"),l=s.objectStore(ts),u=await l.get(n);return await l.put(e,n),await s.done,(!u||u.fid!==e.fid)&&rA(t,e.fid),e}async function aA(t){const e=Rf(t),o=(await lm()).transaction(ts,"readwrite");await o.objectStore(ts).delete(e),await o.done}async function xf(t,e){const n=Rf(t),s=(await lm()).transaction(ts,"readwrite"),l=s.objectStore(ts),u=await l.get(n),d=e(u);return d===void 0?await l.delete(n):await l.put(d,n),await s.done,d&&(!u||u.fid!==d.fid)&&rA(t,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function um(t){let e;const n=await xf(t.appConfig,o=>{const s=$P(o),l=QP(t,s);return e=l.registrationPromise,l.installationEntry});return n.fid===Rp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function $P(t){const e=t||{fid:qP(),registrationStatus:0};return lA(e)}function QP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(es.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},o=XP(t,n);return{installationEntry:n,registrationPromise:o}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ZP(t)}:{installationEntry:e}}async function XP(t,e){try{const n=await OP(t,e);return lf(t.appConfig,n)}catch(n){throw ZS(n)&&n.customData.serverCode===409?await aA(t.appConfig):await lf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ZP(t){let e=await TE(t.appConfig);for(;e.registrationStatus===1;)await iA(100),e=await TE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:o}=await um(t);return o||n}return e}function TE(t){return xf(t,e=>{if(!e)throw es.create("installation-not-found");return lA(e)})}function lA(t){return WP(t)?{fid:t.fid,registrationStatus:0}:t}function WP(t){return t.registrationStatus===1&&t.registrationTime+$S<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP({appConfig:t,heartbeatServiceProvider:e},n){const o=ek(t,n),s=kP(t,n),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const u={installation:{sdkVersion:QS,appId:t.appId}},d={method:"POST",headers:s,body:JSON.stringify(u)},g=await nA(()=>fetch(o,d));if(g.ok){const p=await g.json();return jS(p)}else throw await eA("Generate Auth Token",g)}function ek(t,{fid:e}){return`${WS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cm(t,e=!1){let n;const o=await xf(t.appConfig,l=>{if(!uA(l))throw es.create("not-registered");const u=l.authToken;if(!e&&ik(u))return l;if(u.requestStatus===1)return n=tk(t,e),l;{if(!navigator.onLine)throw es.create("app-offline");const d=rk(l);return n=nk(t,d),d}});return n?await n:o.authToken}async function tk(t,e){let n=await SE(t.appConfig);for(;n.authToken.requestStatus===1;)await iA(100),n=await SE(t.appConfig);const o=n.authToken;return o.requestStatus===0?cm(t,e):o}function SE(t){return xf(t,e=>{if(!uA(e))throw es.create("not-registered");const n=e.authToken;return sk(n)?{...e,authToken:{requestStatus:0}}:e})}async function nk(t,e){try{const n=await jP(t,e),o={...e,authToken:n};return await lf(t.appConfig,o),n}catch(n){if(ZS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await aA(t.appConfig);else{const o={...e,authToken:{requestStatus:0}};await lf(t.appConfig,o)}throw n}}function uA(t){return t!==void 0&&t.registrationStatus===2}function ik(t){return t.requestStatus===2&&!ok(t)}function ok(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+MP}function rk(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function sk(t){return t.requestStatus===1&&t.requestTime+$S<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t){const e=t,{installationEntry:n,registrationPromise:o}=await um(e);return o?o.catch(console.error):cm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(t,e=!1){const n=t;return await uk(n),(await cm(n,e)).token}async function uk(t){const{registrationPromise:e}=await um(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t){if(!t||!t.options)throw tp("App Configuration");if(!t.name)throw tp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw tp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function tp(t){return es.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="installations",fk="installations-internal",dk=t=>{const e=t.getProvider("app").getImmediate(),n=ck(e),o=Zl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:o,_delete:()=>Promise.resolve()}},hk=t=>{const e=t.getProvider("app").getImmediate(),n=Zl(e,cA).getImmediate();return{getId:()=>ak(n),getToken:s=>lk(n,s)}};function pk(){lr(new po(cA,dk,"PUBLIC")),lr(new po(fk,hk,"PRIVATE"))}pk();Fi(JS,am);Fi(JS,am,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="analytics",mk="firebase_id",gk="origin",yk=60*1e3,vk="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn=new rm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vn=new bf("analytics","Analytics",_k);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t){if(!t.startsWith(fm)){const e=Vn.create("invalid-gtag-resource",{gtagURL:t});return fn.warn(e.message),""}return t}function fA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Tk(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Sk(t,e){const n=Tk("firebase-js-sdk-policy",{createScriptURL:Ek}),o=document.createElement("script"),s=`${fm}?l=${t}&id=${e}`;o.src=n?n==null?void 0:n.createScriptURL(s):s,o.async=!0,document.head.appendChild(o)}function Ak(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Ck(t,e,n,o,s,l){const u=o[s];try{if(u)await e[u];else{const g=(await fA(n)).find(p=>p.measurementId===s);g&&await e[g.appId]}}catch(d){fn.error(d)}t("config",s,l)}async function wk(t,e,n,o,s){try{let l=[];if(s&&s.send_to){let u=s.send_to;Array.isArray(u)||(u=[u]);const d=await fA(n);for(const g of u){const p=d.find(E=>E.measurementId===g),_=p&&e[p.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),t("event",o,s||{})}catch(l){fn.error(l)}}function Ik(t,e,n,o){async function s(l,...u){try{if(l==="event"){const[d,g]=u;await wk(t,e,n,d,g)}else if(l==="config"){const[d,g]=u;await Ck(t,e,n,o,d,g)}else if(l==="consent"){const[d,g]=u;t("consent",d,g)}else if(l==="get"){const[d,g,p]=u;t("get",d,g,p)}else if(l==="set"){const[d]=u;t("set",d)}else t(l,...u)}catch(d){fn.error(d)}}return s}function bk(t,e,n,o,s){let l=function(...u){window[o].push(arguments)};return window[s]&&typeof window[s]=="function"&&(l=window[s]),window[s]=Ik(l,t,e,n),{gtagCore:l,wrappedGtag:window[s]}}function Rk(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(fm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=30,Nk=1e3;class Mk{constructor(e={},n=Nk){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const dA=new Mk;function Dk(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Vk(t){var u;const{appId:e,apiKey:n}=t,o={method:"GET",headers:Dk(n)},s=vk.replace("{app-id}",e),l=await fetch(s,o);if(l.status!==200&&l.status!==304){let d="";try{const g=await l.json();(u=g.error)!=null&&u.message&&(d=g.error.message)}catch{}throw Vn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:d})}return l.json()}async function Pk(t,e=dA,n){const{appId:o,apiKey:s,measurementId:l}=t.options;if(!o)throw Vn.create("no-app-id");if(!s){if(l)return{measurementId:l,appId:o};throw Vn.create("no-api-key")}const u=e.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new Lk;return setTimeout(async()=>{d.abort()},yk),hA({appId:o,apiKey:s,measurementId:l},u,d,e)}async function hA(t,{throttleEndTimeMillis:e,backoffCount:n},o,s=dA){var d;const{appId:l,measurementId:u}=t;try{await kk(o,e)}catch(g){if(u)return fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:l,measurementId:u};throw g}try{const g=await Vk(t);return s.deleteThrottleMetadata(l),g}catch(g){const p=g;if(!Uk(p)){if(s.deleteThrottleMetadata(l),u)return fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:u};throw g}const _=Number((d=p==null?void 0:p.customData)==null?void 0:d.httpStatus)===503?dE(n,s.intervalMillis,xk):dE(n,s.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return s.setThrottleMetadata(l,E),fn.debug(`Calling attemptFetch again in ${_} millis`),hA(t,E,o,s)}}function kk(t,e){return new Promise((n,o)=>{const s=Math.max(e-Date.now(),0),l=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(l),o(Vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Uk(t){if(!(t instanceof gr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Lk{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Ok(t,e,n,o,s){if(s&&s.global){t("event",n,o);return}else{const l=await e,u={...o,send_to:l};t("event",n,u)}}async function Bk(t,e,n,o){if(o&&o.global){const s={};for(const l of Object.keys(n))s[`user_properties.${l}`]=n[l];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(){if(OS())try{await BS()}catch(t){return fn.warn(Vn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return fn.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function qk(t,e,n,o,s,l,u){const d=Pk(t);d.then(T=>{n[T.measurementId]=T.appId,t.options.measurementId&&T.measurementId!==t.options.measurementId&&fn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>fn.error(T)),e.push(d);const g=Fk().then(T=>{if(T)return o.getId()}),[p,_]=await Promise.all([d,g]);Rk(l)||Sk(l,p.measurementId),s("js",new Date);const E=(u==null?void 0:u.config)??{};return E[gk]="firebase",E.update=!0,_!=null&&(E[mk]=_),s("config",p.measurementId,E),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.app=e}_delete(){return delete oa[this.app.options.appId],Promise.resolve()}}let oa={},AE=[];const CE={};let np="dataLayer",Gk="gtag",wE,dm,IE=!1;function Hk(){const t=[];if(uV()&&t.push("This is a browser extension environment."),fV()||t.push("Cookies are not available."),t.length>0){const e=t.map((o,s)=>`(${s+1}) ${o}`).join(" "),n=Vn.create("invalid-analytics-context",{errorInfo:e});fn.warn(n.message)}}function Yk(t,e,n){Hk();const o=t.options.appId;if(!o)throw Vn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vn.create("no-api-key");if(oa[o]!=null)throw Vn.create("already-exists",{id:o});if(!IE){Ak(np);const{wrappedGtag:l,gtagCore:u}=bk(oa,AE,CE,np,Gk);dm=l,wE=u,IE=!0}return oa[o]=qk(t,AE,CE,e,wE,np,n),new zk(t)}function Kk(t=HS()){t=Pn(t);const e=Zl(t,uf);return e.isInitialized()?e.getImmediate():Jk(t)}function Jk(t,e={}){const n=Zl(t,uf);if(n.isInitialized()){const s=n.getImmediate();if(zl(e,n.getOptions()))return s;throw Vn.create("already-initialized")}return n.initialize({options:e})}function $k(t,e,n){t=Pn(t),Bk(dm,oa[t.app.options.appId],e,n).catch(o=>fn.error(o))}function Qk(t,e,n,o){t=Pn(t),Ok(dm,oa[t.app.options.appId],e,n,o).catch(s=>fn.error(s))}const bE="@firebase/analytics",RE="0.10.19";function Xk(){lr(new po(uf,(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Yk(o,s,n)},"PUBLIC")),lr(new po("analytics-internal",t,"PRIVATE")),Fi(bE,RE),Fi(bE,RE,"esm2020");function t(e){try{const n=e.getProvider(uf).getImmediate();return{logEvent:(o,s,l)=>Qk(n,o,s,l),setUserProperties:(o,s)=>$k(n,o,s)}}catch(n){throw Vn.create("interop-component-reg-failed",{reason:n})}}}Xk();var xE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rr,pA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,M){function x(){}x.prototype=M.prototype,N.F=M.prototype,N.prototype=new x,N.prototype.constructor=N,N.D=function(L,k,q){for(var D=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)D[Pe-2]=arguments[Pe];return M.prototype[k].apply(L,D)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,M,x){x||(x=0);const L=Array(16);if(typeof M=="string")for(var k=0;k<16;++k)L[k]=M.charCodeAt(x++)|M.charCodeAt(x++)<<8|M.charCodeAt(x++)<<16|M.charCodeAt(x++)<<24;else for(k=0;k<16;++k)L[k]=M[x++]|M[x++]<<8|M[x++]<<16|M[x++]<<24;M=N.g[0],x=N.g[1],k=N.g[2];let q=N.g[3],D;D=M+(q^x&(k^q))+L[0]+3614090360&4294967295,M=x+(D<<7&4294967295|D>>>25),D=q+(k^M&(x^k))+L[1]+3905402710&4294967295,q=M+(D<<12&4294967295|D>>>20),D=k+(x^q&(M^x))+L[2]+606105819&4294967295,k=q+(D<<17&4294967295|D>>>15),D=x+(M^k&(q^M))+L[3]+3250441966&4294967295,x=k+(D<<22&4294967295|D>>>10),D=M+(q^x&(k^q))+L[4]+4118548399&4294967295,M=x+(D<<7&4294967295|D>>>25),D=q+(k^M&(x^k))+L[5]+1200080426&4294967295,q=M+(D<<12&4294967295|D>>>20),D=k+(x^q&(M^x))+L[6]+2821735955&4294967295,k=q+(D<<17&4294967295|D>>>15),D=x+(M^k&(q^M))+L[7]+4249261313&4294967295,x=k+(D<<22&4294967295|D>>>10),D=M+(q^x&(k^q))+L[8]+1770035416&4294967295,M=x+(D<<7&4294967295|D>>>25),D=q+(k^M&(x^k))+L[9]+2336552879&4294967295,q=M+(D<<12&4294967295|D>>>20),D=k+(x^q&(M^x))+L[10]+4294925233&4294967295,k=q+(D<<17&4294967295|D>>>15),D=x+(M^k&(q^M))+L[11]+2304563134&4294967295,x=k+(D<<22&4294967295|D>>>10),D=M+(q^x&(k^q))+L[12]+1804603682&4294967295,M=x+(D<<7&4294967295|D>>>25),D=q+(k^M&(x^k))+L[13]+4254626195&4294967295,q=M+(D<<12&4294967295|D>>>20),D=k+(x^q&(M^x))+L[14]+2792965006&4294967295,k=q+(D<<17&4294967295|D>>>15),D=x+(M^k&(q^M))+L[15]+1236535329&4294967295,x=k+(D<<22&4294967295|D>>>10),D=M+(k^q&(x^k))+L[1]+4129170786&4294967295,M=x+(D<<5&4294967295|D>>>27),D=q+(x^k&(M^x))+L[6]+3225465664&4294967295,q=M+(D<<9&4294967295|D>>>23),D=k+(M^x&(q^M))+L[11]+643717713&4294967295,k=q+(D<<14&4294967295|D>>>18),D=x+(q^M&(k^q))+L[0]+3921069994&4294967295,x=k+(D<<20&4294967295|D>>>12),D=M+(k^q&(x^k))+L[5]+3593408605&4294967295,M=x+(D<<5&4294967295|D>>>27),D=q+(x^k&(M^x))+L[10]+38016083&4294967295,q=M+(D<<9&4294967295|D>>>23),D=k+(M^x&(q^M))+L[15]+3634488961&4294967295,k=q+(D<<14&4294967295|D>>>18),D=x+(q^M&(k^q))+L[4]+3889429448&4294967295,x=k+(D<<20&4294967295|D>>>12),D=M+(k^q&(x^k))+L[9]+568446438&4294967295,M=x+(D<<5&4294967295|D>>>27),D=q+(x^k&(M^x))+L[14]+3275163606&4294967295,q=M+(D<<9&4294967295|D>>>23),D=k+(M^x&(q^M))+L[3]+4107603335&4294967295,k=q+(D<<14&4294967295|D>>>18),D=x+(q^M&(k^q))+L[8]+1163531501&4294967295,x=k+(D<<20&4294967295|D>>>12),D=M+(k^q&(x^k))+L[13]+2850285829&4294967295,M=x+(D<<5&4294967295|D>>>27),D=q+(x^k&(M^x))+L[2]+4243563512&4294967295,q=M+(D<<9&4294967295|D>>>23),D=k+(M^x&(q^M))+L[7]+1735328473&4294967295,k=q+(D<<14&4294967295|D>>>18),D=x+(q^M&(k^q))+L[12]+2368359562&4294967295,x=k+(D<<20&4294967295|D>>>12),D=M+(x^k^q)+L[5]+4294588738&4294967295,M=x+(D<<4&4294967295|D>>>28),D=q+(M^x^k)+L[8]+2272392833&4294967295,q=M+(D<<11&4294967295|D>>>21),D=k+(q^M^x)+L[11]+1839030562&4294967295,k=q+(D<<16&4294967295|D>>>16),D=x+(k^q^M)+L[14]+4259657740&4294967295,x=k+(D<<23&4294967295|D>>>9),D=M+(x^k^q)+L[1]+2763975236&4294967295,M=x+(D<<4&4294967295|D>>>28),D=q+(M^x^k)+L[4]+1272893353&4294967295,q=M+(D<<11&4294967295|D>>>21),D=k+(q^M^x)+L[7]+4139469664&4294967295,k=q+(D<<16&4294967295|D>>>16),D=x+(k^q^M)+L[10]+3200236656&4294967295,x=k+(D<<23&4294967295|D>>>9),D=M+(x^k^q)+L[13]+681279174&4294967295,M=x+(D<<4&4294967295|D>>>28),D=q+(M^x^k)+L[0]+3936430074&4294967295,q=M+(D<<11&4294967295|D>>>21),D=k+(q^M^x)+L[3]+3572445317&4294967295,k=q+(D<<16&4294967295|D>>>16),D=x+(k^q^M)+L[6]+76029189&4294967295,x=k+(D<<23&4294967295|D>>>9),D=M+(x^k^q)+L[9]+3654602809&4294967295,M=x+(D<<4&4294967295|D>>>28),D=q+(M^x^k)+L[12]+3873151461&4294967295,q=M+(D<<11&4294967295|D>>>21),D=k+(q^M^x)+L[15]+530742520&4294967295,k=q+(D<<16&4294967295|D>>>16),D=x+(k^q^M)+L[2]+3299628645&4294967295,x=k+(D<<23&4294967295|D>>>9),D=M+(k^(x|~q))+L[0]+4096336452&4294967295,M=x+(D<<6&4294967295|D>>>26),D=q+(x^(M|~k))+L[7]+1126891415&4294967295,q=M+(D<<10&4294967295|D>>>22),D=k+(M^(q|~x))+L[14]+2878612391&4294967295,k=q+(D<<15&4294967295|D>>>17),D=x+(q^(k|~M))+L[5]+4237533241&4294967295,x=k+(D<<21&4294967295|D>>>11),D=M+(k^(x|~q))+L[12]+1700485571&4294967295,M=x+(D<<6&4294967295|D>>>26),D=q+(x^(M|~k))+L[3]+2399980690&4294967295,q=M+(D<<10&4294967295|D>>>22),D=k+(M^(q|~x))+L[10]+4293915773&4294967295,k=q+(D<<15&4294967295|D>>>17),D=x+(q^(k|~M))+L[1]+2240044497&4294967295,x=k+(D<<21&4294967295|D>>>11),D=M+(k^(x|~q))+L[8]+1873313359&4294967295,M=x+(D<<6&4294967295|D>>>26),D=q+(x^(M|~k))+L[15]+4264355552&4294967295,q=M+(D<<10&4294967295|D>>>22),D=k+(M^(q|~x))+L[6]+2734768916&4294967295,k=q+(D<<15&4294967295|D>>>17),D=x+(q^(k|~M))+L[13]+1309151649&4294967295,x=k+(D<<21&4294967295|D>>>11),D=M+(k^(x|~q))+L[4]+4149444226&4294967295,M=x+(D<<6&4294967295|D>>>26),D=q+(x^(M|~k))+L[11]+3174756917&4294967295,q=M+(D<<10&4294967295|D>>>22),D=k+(M^(q|~x))+L[2]+718787259&4294967295,k=q+(D<<15&4294967295|D>>>17),D=x+(q^(k|~M))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+M&4294967295,N.g[1]=N.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+q&4294967295}o.prototype.v=function(N,M){M===void 0&&(M=N.length);const x=M-this.blockSize,L=this.C;let k=this.h,q=0;for(;q<M;){if(k==0)for(;q<=x;)s(this,N,q),q+=this.blockSize;if(typeof N=="string"){for(;q<M;)if(L[k++]=N.charCodeAt(q++),k==this.blockSize){s(this,L),k=0;break}}else for(;q<M;)if(L[k++]=N[q++],k==this.blockSize){s(this,L),k=0;break}}this.h=k,this.o+=M},o.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var M=1;M<N.length-8;++M)N[M]=0;M=this.o*8;for(var x=N.length-8;x<N.length;++x)N[x]=M&255,M/=256;for(this.v(N),N=Array(16),M=0,x=0;x<4;++x)for(let L=0;L<32;L+=8)N[M++]=this.g[x]>>>L&255;return N};function l(N,M){var x=d;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=M(N)}function u(N,M){this.h=M;const x=[];let L=!0;for(let k=N.length-1;k>=0;k--){const q=N[k]|0;L&&q==M||(x[k]=q,L=!1)}this.g=x}var d={};function g(N){return-128<=N&&N<128?l(N,function(M){return new u([M|0],M<0?-1:0)}):new u([N|0],N<0?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return P(p(-N));const M=[];let x=1;for(let L=0;N>=x;L++)M[L]=N/x|0,x*=4294967296;return new u(M,0)}function _(N,M){if(N.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N.charAt(0)=="-")return P(_(N.substring(1),M));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=p(Math.pow(M,8));let L=E;for(let q=0;q<N.length;q+=8){var k=Math.min(8,N.length-q);const D=parseInt(N.substring(q,q+k),M);k<8?(k=p(Math.pow(M,k)),L=L.j(k).add(p(D))):(L=L.j(x),L=L.add(p(D)))}return L}var E=g(0),T=g(1),I=g(16777216);t=u.prototype,t.m=function(){if(O(this))return-P(this).m();let N=0,M=1;for(let x=0;x<this.g.length;x++){const L=this.i(x);N+=(L>=0?L:4294967296+L)*M,M*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(V(this))return"0";if(O(this))return"-"+P(this).toString(N);const M=p(Math.pow(N,6));var x=this;let L="";for(;;){const k=se(x,M).g;x=G(x,k.j(M));let q=((x.g.length>0?x.g[0]:x.h)>>>0).toString(N);if(x=k,V(x))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function V(N){if(N.h!=0)return!1;for(let M=0;M<N.g.length;M++)if(N.g[M]!=0)return!1;return!0}function O(N){return N.h==-1}t.l=function(N){return N=G(this,N),O(N)?-1:V(N)?0:1};function P(N){const M=N.g.length,x=[];for(let L=0;L<M;L++)x[L]=~N.g[L];return new u(x,~N.h).add(T)}t.abs=function(){return O(this)?P(this):this},t.add=function(N){const M=Math.max(this.g.length,N.g.length),x=[];let L=0;for(let k=0;k<=M;k++){let q=L+(this.i(k)&65535)+(N.i(k)&65535),D=(q>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);L=D>>>16,q&=65535,D&=65535,x[k]=D<<16|q}return new u(x,x[x.length-1]&-2147483648?-1:0)};function G(N,M){return N.add(P(M))}t.j=function(N){if(V(this)||V(N))return E;if(O(this))return O(N)?P(this).j(P(N)):P(P(this).j(N));if(O(N))return P(this.j(P(N)));if(this.l(I)<0&&N.l(I)<0)return p(this.m()*N.m());const M=this.g.length+N.g.length,x=[];for(var L=0;L<2*M;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(let k=0;k<N.g.length;k++){const q=this.i(L)>>>16,D=this.i(L)&65535,Pe=N.i(k)>>>16,rt=N.i(k)&65535;x[2*L+2*k]+=D*rt,Z(x,2*L+2*k),x[2*L+2*k+1]+=q*rt,Z(x,2*L+2*k+1),x[2*L+2*k+1]+=D*Pe,Z(x,2*L+2*k+1),x[2*L+2*k+2]+=q*Pe,Z(x,2*L+2*k+2)}for(N=0;N<M;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=M;N<2*M;N++)x[N]=0;return new u(x,0)};function Z(N,M){for(;(N[M]&65535)!=N[M];)N[M+1]+=N[M]>>>16,N[M]&=65535,M++}function W(N,M){this.g=N,this.h=M}function se(N,M){if(V(M))throw Error("division by zero");if(V(N))return new W(E,E);if(O(N))return M=se(P(N),M),new W(P(M.g),P(M.h));if(O(M))return M=se(N,P(M)),new W(P(M.g),M.h);if(N.g.length>30){if(O(N)||O(M))throw Error("slowDivide_ only works with positive integers.");for(var x=T,L=M;L.l(N)<=0;)x=ee(x),L=ee(L);var k=ce(x,1),q=ce(L,1);for(L=ce(L,2),x=ce(x,2);!V(L);){var D=q.add(L);D.l(N)<=0&&(k=k.add(x),q=D),L=ce(L,1),x=ce(x,1)}return M=G(N,k.j(M)),new W(k,M)}for(k=E;N.l(M)>=0;){for(x=Math.max(1,Math.floor(N.m()/M.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=p(x),D=q.j(M);O(D)||D.l(N)>0;)x-=L,q=p(x),D=q.j(M);V(q)&&(q=T),k=k.add(q),N=G(N,D)}return new W(k,N)}t.B=function(N){return se(this,N).h},t.and=function(N){const M=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<M;L++)x[L]=this.i(L)&N.i(L);return new u(x,this.h&N.h)},t.or=function(N){const M=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<M;L++)x[L]=this.i(L)|N.i(L);return new u(x,this.h|N.h)},t.xor=function(N){const M=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<M;L++)x[L]=this.i(L)^N.i(L);return new u(x,this.h^N.h)};function ee(N){const M=N.g.length+1,x=[];for(let L=0;L<M;L++)x[L]=N.i(L)<<1|N.i(L-1)>>>31;return new u(x,N.h)}function ce(N,M){const x=M>>5;M%=32;const L=N.g.length-x,k=[];for(let q=0;q<L;q++)k[q]=M>0?N.i(q+x)>>>M|N.i(q+x+1)<<32-M:N.i(q+x);return new u(k,N.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,pA=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=_,rr=u}).apply(typeof xE<"u"?xE:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mA,Ml,gA,Jc,xp,yA,vA,_A;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var S=0;S<m.length;++S){var C=m[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=n(this);function s(m,S){if(S)e:{var C=o;m=m.split(".");for(var R=0;R<m.length-1;R++){var H=m[R];if(!(H in C))break e;C=C[H]}m=m[m.length-1],R=C[m],S=S(R),S!=R&&S!=null&&e(C,m,{configurable:!0,writable:!0,value:S})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(S){var C=[],R;for(R in S)Object.prototype.hasOwnProperty.call(S,R)&&C.push([R,S[R]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function g(m,S,C){return m.call.apply(m.bind,arguments)}function p(m,S,C){return p=g,p.apply(null,arguments)}function _(m,S){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function E(m,S){function C(){}C.prototype=S.prototype,m.Z=S.prototype,m.prototype=new C,m.prototype.constructor=m,m.Ob=function(R,H,Q){for(var le=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)le[Ne-2]=arguments[Ne];return S.prototype[H].apply(R,le)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function I(m){const S=m.length;if(S>0){const C=Array(S);for(let R=0;R<S;R++)C[R]=m[R];return C}return[]}function V(m,S){for(let R=1;R<arguments.length;R++){const H=arguments[R];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=m.length||0;const Q=H.length||0;m.length=C+Q;for(let le=0;le<Q;le++)m[C+le]=H[le]}else m.push(H)}}class O{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function P(m){u.setTimeout(()=>{throw m},0)}function G(){var m=N;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class Z{constructor(){this.h=this.g=null}add(S,C){const R=W.get();R.set(S,C),this.h?this.h.next=R:this.g=R,this.h=R}}var W=new O(()=>new se,m=>m.reset());class se{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ce=!1,N=new Z,M=()=>{const m=Promise.resolve(void 0);ee=()=>{m.then(x)}};function x(){for(var m;m=G();){try{m.h.call(m.g)}catch(C){P(C)}var S=W;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}ce=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};u.addEventListener("test",C,S),u.removeEventListener("test",C,S)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function Pe(m,S){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}E(Pe,k),Pe.prototype.init=function(m,S){const C=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(C=="mouseover"?S=m.fromElement:C=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var rt="closure_listenable_"+(Math.random()*1e6|0),J=0;function ae(m,S,C,R,H){this.listener=m,this.proxy=null,this.src=S,this.type=C,this.capture=!!R,this.ha=H,this.key=++J,this.da=this.fa=!1}function ge(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ve(m,S,C){for(const R in m)S.call(C,m[R],R,m)}function $e(m,S){for(const C in m)S.call(void 0,m[C],C,m)}function F(m){const S={};for(const C in m)S[C]=m[C];return S}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(m,S){let C,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(C in R)m[C]=R[C];for(let Q=0;Q<ne.length;Q++)C=ne[Q],Object.prototype.hasOwnProperty.call(R,C)&&(m[C]=R[C])}}function he(m){this.src=m,this.g={},this.h=0}he.prototype.add=function(m,S,C,R,H){const Q=m.toString();m=this.g[Q],m||(m=this.g[Q]=[],this.h++);const le=we(m,S,R,H);return le>-1?(S=m[le],C||(S.fa=!1)):(S=new ae(S,this.src,Q,!!R,H),S.fa=C,m.push(S)),S};function Ae(m,S){const C=S.type;if(C in m.g){var R=m.g[C],H=Array.prototype.indexOf.call(R,S,void 0),Q;(Q=H>=0)&&Array.prototype.splice.call(R,H,1),Q&&(ge(S),m.g[C].length==0&&(delete m.g[C],m.h--))}}function we(m,S,C,R){for(let H=0;H<m.length;++H){const Q=m[H];if(!Q.da&&Q.listener==S&&Q.capture==!!C&&Q.ha==R)return H}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),gt={};function at(m,S,C,R,H){if(Array.isArray(S)){for(let Q=0;Q<S.length;Q++)at(m,S[Q],C,R,H);return null}return C=kn(C),m&&m[rt]?m.J(S,C,d(R)?!!R.capture:!1,H):gi(m,S,C,!1,R,H)}function gi(m,S,C,R,H,Q){if(!S)throw Error("Invalid event type");const le=d(H)?!!H.capture:!!H;let Ne=yi(m);if(Ne||(m[ke]=Ne=new he(m)),C=Ne.add(S,C,R,le,Q),C.proxy)return C;if(R=Yi(),C.proxy=R,R.src=m,R.listener=C,m.addEventListener)q||(H=le),H===void 0&&(H=!1),m.addEventListener(S.toString(),R,H);else if(m.attachEvent)m.attachEvent(Sn(S.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Yi(){function m(C){return S.call(m.src,m.listener,C)}const S=To;return m}function Ki(m,S,C,R,H){if(Array.isArray(S))for(var Q=0;Q<S.length;Q++)Ki(m,S[Q],C,R,H);else R=d(R)?!!R.capture:!!R,C=kn(C),m&&m[rt]?(m=m.i,Q=String(S).toString(),Q in m.g&&(S=m.g[Q],C=we(S,C,R,H),C>-1&&(ge(S[C]),Array.prototype.splice.call(S,C,1),S.length==0&&(delete m.g[Q],m.h--)))):m&&(m=yi(m))&&(S=m.g[S.toString()],m=-1,S&&(m=we(S,C,R,H)),(C=m>-1?S[m]:null)&&Eo(C))}function Eo(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[rt])Ae(S.i,m);else{var C=m.type,R=m.proxy;S.removeEventListener?S.removeEventListener(C,R,m.capture):S.detachEvent?S.detachEvent(Sn(C),R):S.addListener&&S.removeListener&&S.removeListener(R),(C=yi(S))?(Ae(C,m),C.h==0&&(C.src=null,S[ke]=null)):ge(m)}}}function Sn(m){return m in gt?gt[m]:gt[m]="on"+m}function To(m,S){if(m.da)m=!0;else{S=new Pe(S,this);const C=m.listener,R=m.ha||m.src;m.fa&&Eo(m),m=C.call(R,S)}return m}function yi(m){return m=m[ke],m instanceof he?m:null}var _e="__closure_events_fn_"+(Math.random()*1e9>>>0);function kn(m){return typeof m=="function"?m:(m[_e]||(m[_e]=function(S){return m.handleEvent(S)}),m[_e])}function ut(){L.call(this),this.i=new he(this),this.M=this,this.G=null}E(ut,L),ut.prototype[rt]=!0,ut.prototype.removeEventListener=function(m,S,C,R){Ki(this,m,S,C,R)};function Ut(m,S){var C,R=m.G;if(R)for(C=[];R;R=R.G)C.push(R);if(m=m.M,R=S.type||S,typeof S=="string")S=new k(S,m);else if(S instanceof k)S.target=S.target||m;else{var H=S;S=new k(R,m),ue(S,H)}H=!0;let Q,le;if(C)for(le=C.length-1;le>=0;le--)Q=S.g=C[le],H=So(Q,R,!0,S)&&H;if(Q=S.g=m,H=So(Q,R,!0,S)&&H,H=So(Q,R,!1,S)&&H,C)for(le=0;le<C.length;le++)Q=S.g=C[le],H=So(Q,R,!1,S)&&H}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var m=this.i;for(const S in m.g){const C=m.g[S];for(let R=0;R<C.length;R++)ge(C[R]);delete m.g[S],m.h--}}this.G=null},ut.prototype.J=function(m,S,C,R){return this.i.add(String(m),S,!1,C,R)},ut.prototype.K=function(m,S,C,R){return this.i.add(String(m),S,!0,C,R)};function So(m,S,C,R){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let H=!0;for(let Q=0;Q<S.length;++Q){const le=S[Q];if(le&&!le.da&&le.capture==C){const Ne=le.listener,Et=le.ha||le.src;le.fa&&Ae(m.i,le),H=Ne.call(Et,R)!==!1&&H}}return H&&!R.defaultPrevented}function Hf(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=p(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(m,S||0)}function ou(m){m.g=Hf(()=>{m.g=null,m.i&&(m.i=!1,ou(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class an extends L{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ou(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(m){L.call(this),this.h=m,this.g={}}E(_r,L);var Ca=[];function wa(m){Ve(m.g,function(S,C){this.g.hasOwnProperty(C)&&Eo(S)},m),m.g={}}_r.prototype.N=function(){_r.Z.N.call(this),wa(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ao=u.JSON.stringify,Yf=u.JSON.parse,ru=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function su(){}function au(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){k.call(this,"d")}E(Kt,k);function Un(){k.call(this,"c")}E(Un,k);var _t={},lu=null;function ls(){return lu=lu||new ut}_t.Ia="serverreachability";function uu(m){k.call(this,_t.Ia,m)}E(uu,k);function vi(m){const S=ls();Ut(S,new uu(S))}_t.STAT_EVENT="statevent";function Er(m,S){k.call(this,_t.STAT_EVENT,m),this.stat=S}E(Er,k);function Ct(m){const S=ls();Ut(S,new Er(S,m))}_t.Ja="timingevent";function _i(m,S){k.call(this,_t.Ja,m),this.size=S}E(_i,k);function Ei(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},S)}function jn(){this.g=!0}jn.prototype.ua=function(){this.g=!1};function Kf(m,S,C,R,H,Q){m.info(function(){if(m.g)if(Q){var le="",Ne=Q.split("&");for(let Qe=0;Qe<Ne.length;Qe++){var Et=Ne[Qe].split("=");if(Et.length>1){const ht=Et[0];Et=Et[1];const Fn=ht.split("_");le=Fn.length>=2&&Fn[1]=="type"?le+(ht+"="+Et+"&"):le+(ht+"=redacted&")}}}else le=null;else le=Q;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+S+`
`+C+`
`+le})}function cu(m,S,C,R,H,Q,le){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+S+`
`+C+`
`+Q+" "+le})}function Ti(m,S,C,R){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Jf(m,C)+(R?" "+R:"")})}function Tr(m,S){m.info(function(){return"TIMEOUT: "+S})}jn.prototype.info=function(){};function Jf(m,S){if(!m.g)return S;if(!S)return null;try{const Q=JSON.parse(S);if(Q){for(m=0;m<Q.length;m++)if(Array.isArray(Q[m])){var C=Q[m];if(!(C.length<2)){var R=C[1];if(Array.isArray(R)&&!(R.length<1)){var H=R[0];if(H!="noop"&&H!="stop"&&H!="close")for(let le=1;le<R.length;le++)R[le]=""}}}}return Ao(Q)}catch{return S}}var Sr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ia={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ba;function Ar(){}E(Ar,su),Ar.prototype.g=function(){return new XMLHttpRequest},ba=new Ar;function Ji(m){return encodeURIComponent(String(m))}function fu(m){var S=1;m=m.split(":");const C=[];for(;S>0&&m.length;)C.push(m.shift()),S--;return m.length&&C.push(m.join(":")),C}function ei(m,S,C,R){this.j=m,this.i=S,this.l=C,this.S=R||1,this.V=new _r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ti}function ti(){this.i=null,this.g="",this.h=!1}var wt={},qt={};function Si(m,S,C){m.M=1,m.A=Cr(bt(S)),m.u=C,m.R=!0,us(m,null)}function us(m,S){m.F=Date.now(),Ai(m),m.B=bt(m.A);var C=m.B,R=m.S;Array.isArray(R)||(R=[String(R)]),hs(C.i,"t",R),m.C=0,C=m.j.L,m.h=new ti,m.g=Iu(m.j,C?S:null,!m.u),m.P>0&&(m.O=new an(p(m.Y,m,m.g),m.P)),S=m.V,C=m.g,R=m.ba;var H="readystatechange";Array.isArray(H)||(H&&(Ca[0]=H.toString()),H=Ca);for(let Q=0;Q<H.length;Q++){const le=at(C,H[Q],R||S.handleEvent,!1,S.h||S);if(!le)break;S.g[le.key]=le}S=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),vi(),Kf(m.i,m.v,m.B,m.l,m.S,m.u)}ei.prototype.ba=function(m){m=m.target;const S=this.O;S&&oi(m)==3?S.j():this.Y(m)},ei.prototype.Y=function(m){try{if(m==this.g)e:{const Ne=oi(this.g),Et=this.g.ya(),Qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Ne!=4||Et==7||(Et==8||Qe<=0?vi(3):vi(2)),Ci(this);var S=this.g.ca();this.X=S;var C=$f(this);if(this.o=S==200,cu(this.i,this.v,this.B,this.l,this.S,Ne,S),this.o){if(this.U&&!this.L){t:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var Q=R;break t}}Q=null}if(m=Q)Ti(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wi(this,m);else{this.o=!1,this.m=3,Ct(12),An(this),Ln(this);break e}}if(this.R){m=!0;let ht;for(;!this.K&&this.C<C.length;)if(ht=hu(this,C),ht==qt){Ne==4&&(this.m=4,Ct(14),m=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==wt){this.m=4,Ct(15),Ti(this.i,this.l,C,"[Invalid Chunk]"),m=!1;break}else Ti(this.i,this.l,ht,null),wi(this,ht);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||C.length!=0||this.h.h||(this.m=1,Ct(16),m=!1),this.o=this.o&&m,!m)Ti(this.i,this.l,C,"[Invalid Chunked Response]"),An(this),Ln(this);else if(C.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),za(le),le.P=!0,Ct(11))}}else Ti(this.i,this.l,C,null),wi(this,C);Ne==4&&An(this),this.o&&!this.K&&(Ne==4?Su(this.j,this):(this.o=!1,Ai(this)))}else Qi(this.g),S==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),An(this),Ln(this)}}}catch{}finally{}};function $f(m){if(!du(m))return m.g.la();const S=Jt(m.g);if(S==="")return"";let C="";const R=S.length,H=oi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return An(m),Ln(m),"";m.h.i=new u.TextDecoder}for(let Q=0;Q<R;Q++)m.h.h=!0,C+=m.h.i.decode(S[Q],{stream:!(H&&Q==R-1)});return S.length=0,m.h.g+=C,m.C=0,m.h.g}function du(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function hu(m,S){var C=m.C,R=S.indexOf(`
`,C);return R==-1?qt:(C=Number(S.substring(C,R)),isNaN(C)?wt:(R+=1,R+C>S.length?qt:(S=S.slice(R,R+C),m.C=R+C,S)))}ei.prototype.cancel=function(){this.K=!0,An(this)};function Ai(m){m.T=Date.now()+m.H,cs(m,m.H)}function cs(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ei(p(m.aa,m),S)}function Ci(m){m.D&&(u.clearTimeout(m.D),m.D=null)}ei.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Tr(this.i,this.B),this.M!=2&&(vi(),Ct(17)),An(this),this.m=2,Ln(this)):cs(this,this.T-m)};function Ln(m){m.j.I==0||m.K||Su(m.j,m)}function An(m){Ci(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,wa(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function wi(m,S){try{var C=m.j;if(C.I!=0&&(C.g==m||bi(C.h,m))){if(!m.L&&bi(C.h,m)&&C.I==3){try{var R=C.Ba.g.parse(S)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<m.F)vs(C),Mo(C);else break e;Mr(C),Ct(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Ei(p(C.Va,C),6e3));Ii(C.h)<=1&&C.ta&&(C.ta=void 0)}else Vi(C,11)}else if((m.L||C.g==m)&&vs(C),!D(S))for(H=C.Ba.g.parse(S),S=0;S<H.length;S++){let Qe=H[S];const ht=Qe[0];if(!(ht<=C.K))if(C.K=ht,Qe=Qe[1],C.I==2)if(Qe[0]=="c"){C.M=Qe[1],C.ba=Qe[2];const Fn=Qe[3];Fn!=null&&(C.ka=Fn,C.j.info("VER="+C.ka));const Pi=Qe[4];Pi!=null&&(C.za=Pi,C.j.info("SVER="+C.za));const ri=Qe[5];ri!=null&&typeof ri=="number"&&ri>0&&(R=1.5*ri,C.O=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const si=m.g;if(si){const Dr=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var Q=R.h;Q.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Na(Q,Q.h),Q.h=null))}if(R.G){const _s=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;_s&&(R.wa=_s,We(R.J,R.G,_s))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-m.F,C.j.info("Handshake RTT: "+C.T+"ms")),R=C;var le=m;if(R.na=wu(R,R.L?R.ba:null,R.W),le.L){Ma(R.h,le);var Ne=le,Et=R.O;Et&&(Ne.H=Et),Ne.D&&(Ci(Ne),Ai(Ne)),R.g=le}else Eu(R);C.i.length>0&&Di(C)}else Qe[0]!="stop"&&Qe[0]!="close"||Vi(C,7);else C.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Vi(C,7):Fa(C):Qe[0]!="noop"&&C.l&&C.l.qa(Qe),C.A=0)}}vi(4)}catch{}}var It=class{constructor(m,S){this.g=m,this.map=S}};function Ra(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xa(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ii(m){return m.h?1:m.g?m.g.size:0}function bi(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function Na(m,S){m.g?m.g.add(S):m.h=S}function Ma(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}Ra.prototype.cancel=function(){if(this.i=Da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Da(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const C of m.g.values())S=S.concat(C.G);return S}return I(m.i)}var pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fs(m,S){if(m){m=m.split("&");for(let C=0;C<m.length;C++){const R=m[C].indexOf("=");let H,Q=null;R>=0?(H=m[C].substring(0,R),Q=m[C].substring(R+1)):H=m[C],S(H,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Cn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof Cn?(this.l=m.l,zt(this,m.j),this.o=m.o,this.g=m.g,Co(this,m.u),this.h=m.h,Va(this,vu(m.i)),this.m=m.m):m&&(S=String(m).match(pu))?(this.l=!1,zt(this,S[1]||"",!0),this.o=Ri(S[2]||""),this.g=Ri(S[3]||"",!0),Co(this,S[4]),this.h=Ri(S[5]||"",!0),Va(this,S[6]||"",!0),this.m=Ri(S[7]||"")):(this.l=!1,this.i=new Io(null,this.l))}Cn.prototype.toString=function(){const m=[];var S=this.j;S&&m.push(wr(S,ds,!0),":");var C=this.g;return(C||S=="file")&&(m.push("//"),(S=this.o)&&m.push(wr(S,ds,!0),"@"),m.push(Ji(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&m.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(wr(C,C.charAt(0)=="/"?Pa:mu,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",wr(C,gu)),m.join("")},Cn.prototype.resolve=function(m){const S=bt(this);let C=!!m.j;C?zt(S,m.j):C=!!m.o,C?S.o=m.o:C=!!m.g,C?S.g=m.g:C=m.u!=null;var R=m.h;if(C)Co(S,m.u);else if(C=!!m.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var H=S.h.lastIndexOf("/");H!=-1&&(R=S.h.slice(0,H+1)+R)}if(H=R,H==".."||H==".")R="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){R=H.lastIndexOf("/",0)==0,H=H.split("/");const Q=[];for(let le=0;le<H.length;){const Ne=H[le++];Ne=="."?R&&le==H.length&&Q.push(""):Ne==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),R&&le==H.length&&Q.push("")):(Q.push(Ne),R=!0)}R=Q.join("/")}else R=H}return C?S.h=R:C=m.i.toString()!=="",C?Va(S,vu(m.i)):C=!!m.m,C&&(S.m=m.m),S};function bt(m){return new Cn(m)}function zt(m,S,C){m.j=C?Ri(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Co(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function Va(m,S,C){S instanceof Io?(m.i=S,ps(m.i,m.l)):(C||(S=wr(S,wo)),m.i=new Io(S,m.l))}function We(m,S,C){m.i.set(S,C)}function Cr(m){return We(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ri(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function wr(m,S,C){return typeof m=="string"?(m=encodeURI(m).replace(S,hn),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function hn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var ds=/[#\/\?@]/g,mu=/[#\?:]/g,Pa=/[#\?]/g,wo=/[#\?@]/g,gu=/#/g;function Io(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function pn(m){m.g||(m.g=new Map,m.h=0,m.i&&fs(m.i,function(S,C){m.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}t=Io.prototype,t.add=function(m,S){pn(this),this.i=null,m=bo(this,m);let C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(S),this.h+=1,this};function yu(m,S){pn(m),S=bo(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function ka(m,S){return pn(m),S=bo(m,S),m.g.has(S)}t.forEach=function(m,S){pn(this),this.g.forEach(function(C,R){C.forEach(function(H){m.call(S,H,R,this)},this)},this)};function Ua(m,S){pn(m);let C=[];if(typeof S=="string")ka(m,S)&&(C=C.concat(m.g.get(bo(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)C=C.concat(m[S]);return C}t.set=function(m,S){return pn(this),this.i=null,m=bo(this,m),ka(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},t.get=function(m,S){return m?(m=Ua(this,m),m.length>0?String(m[0]):S):S};function hs(m,S,C){yu(m,S),C.length>0&&(m.i=null,m.g.set(bo(m,S),I(C)),m.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(let R=0;R<S.length;R++){var C=S[R];const H=Ji(C);C=Ua(this,C);for(let Q=0;Q<C.length;Q++){let le=H;C[Q]!==""&&(le+="="+Ji(C[Q])),m.push(le)}}return this.i=m.join("&")};function vu(m){const S=new Io;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function bo(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function ps(m,S){S&&!m.j&&(pn(m),m.i=null,m.g.forEach(function(C,R){const H=R.toLowerCase();R!=H&&(yu(this,R),hs(this,H,C))},m)),m.j=S}function ni(m,S){const C=new jn;if(u.Image){const R=new Image;R.onload=_(On,C,"TestLoadImage: loaded",!0,S,R),R.onerror=_(On,C,"TestLoadImage: error",!1,S,R),R.onabort=_(On,C,"TestLoadImage: abort",!1,S,R),R.ontimeout=_(On,C,"TestLoadImage: timeout",!1,S,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else S(!1)}function La(m,S){const C=new jn,R=new AbortController,H=setTimeout(()=>{R.abort(),On(C,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:R.signal}).then(Q=>{clearTimeout(H),Q.ok?On(C,"TestPingServer: ok",!0,S):On(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(H),On(C,"TestPingServer: error",!1,S)})}function On(m,S,C,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(C)}catch{}}function Ro(){this.g=new ru}function xi(m){this.i=m.Sb||null,this.h=m.ab||!1}E(xi,su),xi.prototype.g=function(){return new Ir(this.i,this.h)};function Ir(m,S){ut.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ir,ut),t=Ir.prototype,t.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,ii(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xo(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ms(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function ms(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?xo(this):ii(this),this.readyState==3&&ms(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,xo(this))},t.Na=function(m){this.g&&(this.response=m,xo(this))},t.ga=function(){this.g&&xo(this)};function xo(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ii(m)}t.setRequestHeader=function(m,S){this.A.append(m,S)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=S.next();return m.join(`\r
`)};function ii(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ir.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Bn(m){let S="";return Ve(m,function(C,R){S+=R,S+=":",S+=C,S+=`\r
`}),S}function br(m,S,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=Bn(C),typeof m=="string"?C!=null&&Ji(C):We(m,S,C))}function tt(m){ut.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(tt,ut);var Ni=/^https?$/i,Oa=["POST","PUT"];t=tt.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,S,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ba.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(Q){Rr(this,Q);return}if(m=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)C.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())C.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(Oa,S,void 0)>=0)||R||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of C)this.g.setRequestHeader(Q,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Q){Rr(this,Q)}};function Rr(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,Ba(m),$i(m)}function Ba(m){m.A||(m.A=!0,Ut(m,"complete"),Ut(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ut(this,"complete"),Ut(this,"abort"),$i(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),tt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?xr(this):this.Xa())},t.Xa=function(){xr(this)};function xr(m){if(m.h&&typeof l<"u"){if(m.v&&oi(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ut(m,"readystatechange"),oi(m)==4){m.h=!1;try{const Q=m.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var R;if(R=Q===0){let le=String(m.D).match(pu)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),R=!Ni.test(le?le.toLowerCase():"")}C=R}if(C)Ut(m,"complete"),Ut(m,"success");else{m.o=6;try{var H=oi(m)>2?m.g.statusText:""}catch{H=""}m.l=H+" ["+m.ca()+"]",Ba(m)}}finally{$i(m)}}}}function $i(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const C=m.g;m.g=null,S||Ut(m,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function oi(m){return m.g?m.g.readyState:0}t.ca=function(){try{return oi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Yf(S)}};function Jt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(m){const S={};m=(m.g&&oi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(D(m[R]))continue;var C=fu(m[R]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=S[H]||[];S[H]=Q,Q.push(C)}$e(S,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(m,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||S}function No(m){this.za=0,this.i=[],this.j=new jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mi("baseRetryDelayMs",5e3,m),this.Za=Mi("retryDelaySeedMs",1e4,m),this.Ta=Mi("forwardChannelMaxRetries",2,m),this.va=Mi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ra(m&&m.concurrentRequestLimit),this.Ba=new Ro,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=No.prototype,t.ka=8,t.I=1,t.connect=function(m,S,C,R){Ct(0),this.W=m,this.H=S||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.J=wu(this,null,this.W),Di(this)};function Fa(m){if(gs(m),m.I==3){var S=m.V++,C=bt(m.J);if(We(C,"SID",m.M),We(C,"RID",S),We(C,"TYPE","terminate"),Nr(m,C),S=new ei(m,m.j,S),S.M=2,S.A=Cr(bt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=S.A,C=!0),C||(S.g=Iu(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Ai(S)}Cu(m)}function Mo(m){m.g&&(za(m),m.g.cancel(),m.g=null)}function gs(m){Mo(m),m.v&&(u.clearTimeout(m.v),m.v=null),vs(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function Di(m){if(!xa(m.h)&&!m.m){m.m=!0;var S=m.Ea;ee||M(),ce||(ee(),ce=!0),N.add(S,m),m.D=0}}function ys(m,S){return Ii(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ei(p(m.Ea,m,S),Au(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const H=new ei(this,this.j,m);let Q=this.o;if(this.U&&(Q?(Q=F(Q),ue(Q,this.U)):Q=this.U),this.u!==null||this.R||(H.J=Q,Q=null),this.S)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(S+=R,S>4096){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=_u(this,H,S),C=bt(this.J),We(C,"RID",m),We(C,"CVER",22),this.G&&We(C,"X-HTTP-Session-Id",this.G),Nr(this,C),Q&&(this.R?S="headers="+Ji(Bn(Q))+"&"+S:this.u&&br(C,this.u,Q)),Na(this.h,H),this.Ra&&We(C,"TYPE","init"),this.S?(We(C,"$req",S),We(C,"SID","null"),H.U=!0,Si(H,C,null)):Si(H,C,S),this.I=2}}else this.I==3&&(m?qa(this,m):this.i.length==0||xa(this.h)||qa(this))};function qa(m,S){var C;S?C=S.l:C=m.V++;const R=bt(m.J);We(R,"SID",m.M),We(R,"RID",C),We(R,"AID",m.K),Nr(m,R),m.u&&m.o&&br(R,m.u,m.o),C=new ei(m,m.j,C,m.D+1),m.u===null&&(C.J=m.o),S&&(m.i=S.G.concat(m.i)),S=_u(m,C,1e3),C.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Na(m.h,C),Si(C,R,S)}function Nr(m,S){m.H&&Ve(m.H,function(C,R){We(S,R,C)}),m.l&&Ve({},function(C,R){We(S,R,C)})}function _u(m,S,C){C=Math.min(m.i.length,C);const R=m.l?p(m.l.Ka,m.l,m):null;e:{var H=m.i;let Ne=-1;for(;;){const Et=["count="+C];Ne==-1?C>0?(Ne=H[0].g,Et.push("ofs="+Ne)):Ne=0:Et.push("ofs="+Ne);let Qe=!0;for(let ht=0;ht<C;ht++){var Q=H[ht].g;const Fn=H[ht].map;if(Q-=Ne,Q<0)Ne=Math.max(0,H[ht].g-100),Qe=!1;else try{Q="req"+Q+"_"||"";try{var le=Fn instanceof Map?Fn:Object.entries(Fn);for(const[Pi,ri]of le){let si=ri;d(ri)&&(si=Ao(ri)),Et.push(Q+Pi+"="+encodeURIComponent(si))}}catch(Pi){throw Et.push(Q+"type="+encodeURIComponent("_badmap")),Pi}}catch{R&&R(Fn)}}if(Qe){le=Et.join("&");break e}}le=void 0}return m=m.i.splice(0,C),S.G=m,le}function Eu(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;ee||M(),ce||(ee(),ce=!0),N.add(S,m),m.A=0}}function Mr(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ei(p(m.Da,m),Au(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,Tu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ei(p(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Mo(this),Tu(this))};function za(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function Tu(m){m.g=new ei(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=bt(m.na);We(S,"RID","rpc"),We(S,"SID",m.M),We(S,"AID",m.K),We(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&We(S,"TO",m.ia),We(S,"TYPE","xmlhttp"),Nr(m,S),m.u&&m.o&&br(S,m.u,m.o),m.O&&(m.g.H=m.O);var C=m.g;m=m.ba,C.M=1,C.A=Cr(bt(S)),C.u=null,C.R=!0,us(C,m)}t.Va=function(){this.C!=null&&(this.C=null,Mo(this),Mr(this),Ct(19))};function vs(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Su(m,S){var C=null;if(m.g==S){vs(m),za(m),m.g=null;var R=2}else if(bi(m.h,S))C=S.G,Ma(m.h,S),R=1;else return;if(m.I!=0){if(S.o)if(R==1){C=S.u?S.u.length:0,S=Date.now()-S.F;var H=m.D;R=ls(),Ut(R,new _i(R,C)),Di(m)}else Eu(m);else if(H=S.m,H==3||H==0&&S.X>0||!(R==1&&ys(m,S)||R==2&&Mr(m)))switch(C&&C.length>0&&(S=m.h,S.i=S.i.concat(C)),H){case 1:Vi(m,5);break;case 4:Vi(m,10);break;case 3:Vi(m,6);break;default:Vi(m,2)}}}function Au(m,S){let C=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(C*=2),C*S}function Vi(m,S){if(m.j.info("Error code "+S),S==2){var C=p(m.bb,m),R=m.Ua;const H=!R;R=new Cn(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||zt(R,"https"),Cr(R),H?ni(R.toString(),C):La(R.toString(),C)}else Ct(2);m.I=0,m.l&&m.l.pa(S),Cu(m),gs(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Cu(m){if(m.I=0,m.ja=[],m.l){const S=Da(m.h);(S.length!=0||m.i.length!=0)&&(V(m.ja,S),V(m.ja,m.i),m.h.i.length=0,I(m.i),m.i.length=0),m.l.oa()}}function wu(m,S,C){var R=C instanceof Cn?bt(C):new Cn(C);if(R.g!="")S&&(R.g=S+"."+R.g),Co(R,R.u);else{var H=u.location;R=H.protocol,S=S?S+"."+H.hostname:H.hostname,H=+H.port;const Q=new Cn(null);R&&zt(Q,R),S&&(Q.g=S),H&&Co(Q,H),C&&(Q.h=C),R=Q}return C=m.G,S=m.wa,C&&S&&We(R,C,S),We(R,"VER",m.ka),Nr(m,R),R}function Iu(m,S,C){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new tt(new xi({ab:C})):new tt(m.ma),S.Fa(m.L),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bu(){}t=bu.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Do(){}Do.prototype.g=function(m,S){return new ln(m,S)};function ln(m,S){ut.call(this),this.g=new No(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!D(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!D(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Xi(this)}E(ln,ut),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Fa(this.g)},ln.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.v&&(C={},C.__data__=Ao(m),m=C);S.i.push(new It(S.Ya++,m)),S.I==3&&Di(S)},ln.prototype.N=function(){this.g.l=null,delete this.j,Fa(this.g),delete this.g,ln.Z.N.call(this)};function Ru(m){Kt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const C in S){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}E(Ru,Kt);function xu(){Un.call(this),this.status=1}E(xu,Un);function Xi(m){this.g=m}E(Xi,bu),Xi.prototype.ra=function(){Ut(this.g,"a")},Xi.prototype.qa=function(m){Ut(this.g,new Ru(m))},Xi.prototype.pa=function(m){Ut(this.g,new xu)},Xi.prototype.oa=function(){Ut(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,_A=function(){return new Do},vA=function(){return ls()},yA=_t,xp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,Jc=Sr,Ia.COMPLETE="complete",gA=Ia,au.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Ml=au,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,mA=tt}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a="12.8.0";function Zk(t){_a=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new rm("@firebase/firestore");function Xs(){return ns.logLevel}function pe(t,...e){if(ns.logLevel<=He.DEBUG){const n=e.map(hm);ns.debug(`Firestore (${_a}): ${t}`,...n)}}function go(t,...e){if(ns.logLevel<=He.ERROR){const n=e.map(hm);ns.error(`Firestore (${_a}): ${t}`,...n)}}function la(t,...e){if(ns.logLevel<=He.WARN){const n=e.map(hm);ns.warn(`Firestore (${_a}): ${t}`,...n)}}function hm(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,EA(t,o,n)}function EA(t,e,n){let o=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw go(o),new Error(o)}function Ze(t,e,n,o){let s="Unexpected state";typeof n=="string"?s=n:o=n,t||EA(e,s,o)}function xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(on.UNAUTHENTICATED)))}shutdown(){}}class jk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class e4{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let o=this.i;const s=g=>this.i!==o?(o=this.i,n(g)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await s(this.currentUser)}))},d=g=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ze(typeof o.accessToken=="string",31837,{l:o}),new TA(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class t4{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=on.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class n4{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new t4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class NE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pP(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const o=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const s=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new NE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new NE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<t;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const s=o4(40);for(let l=0;l<s.length;++l)o.length<20&&s[l]<n&&(o+=e.charAt(s[l]%62))}return o}}function Fe(t,e){return t<e?-1:t>e?1:0}function Np(t,e){const n=Math.min(t.length,e.length);for(let o=0;o<n;o++){const s=t.charAt(o),l=e.charAt(o);if(s!==l)return ip(s)===ip(l)?Fe(s,l):ip(s)?1:-1}return Fe(t.length,e.length)}const r4=55296,s4=57343;function ip(t){const e=t.charCodeAt(0);return e>=r4&&e<=s4}function ua(t,e,n){return t.length===e.length&&t.every(((o,s)=>n(o,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="__name__";class Bi{constructor(e,n,o){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&Ce(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let s=0;s<o;s++){const l=Bi.compareSegments(e.get(s),n.get(s));if(l!==0)return l}return Fe(e.length,n.length)}static compareSegments(e,n){const o=Bi.isNumericId(e),s=Bi.isNumericId(n);return o&&!s?-1:!o&&s?1:o&&s?Bi.extractNumericId(e).compare(Bi.extractNumericId(n)):Np(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rr.fromString(e.substring(4,e.length-2))}}class lt extends Bi{construct(e,n,o){return new lt(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new de(oe.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((s=>s.length>0)))}return new lt(n)}static emptyPath(){return new lt([])}}const a4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Bi{construct(e,n,o){return new jt(e,n,o)}static isValidIdentifier(e){return a4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ME}static keyField(){return new jt([ME])}static fromServerFormat(e){const n=[];let o="",s=0;const l=()=>{if(o.length===0)throw new de(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new de(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[s+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=g,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(o+=d,s++):(l(),s++)}if(l(),u)throw new de(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(lt.fromString(e))}static fromName(e){return new Te(lt.fromString(e).popFirst(5))}static empty(){return new Te(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t,e,n){if(!n)throw new de(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function l4(t,e,n,o){if(e===!0&&o===!0)throw new de(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function DE(t){if(!Te.isDocumentKey(t))throw new de(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function VE(t){if(Te.isDocumentKey(t))throw new de(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function AA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Nf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce(12329,{type:typeof t})}function sr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nf(t);throw new de(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wl(t,e){if(!AA(t))throw new de(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const s=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in t)){n=`JSON missing required field: '${o}'`;break}const u=t[o];if(s&&typeof u!==s){n=`JSON field '${o}' must be a ${s}.`;break}if(l!==void 0&&u!==l.value){n=`Expected '${o}' field to equal '${l.value}'`;break}}if(n)throw new de(oe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=-62135596800,kE=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*kE);return new dt(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<PE)throw new de(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kE}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wl(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Pt("string",dt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new dt(0,0))}static max(){return new be(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-1;function u4(t,e){const n=t.toTimestamp().seconds,o=t.toTimestamp().nanoseconds+1,s=be.fromTimestamp(o===1e9?new dt(n+1,0):new dt(n,o));return new ur(s,Te.empty(),e)}function c4(t){return new ur(t.readTime,t.key,Hl)}class ur{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new ur(be.min(),Te.empty(),Hl)}static max(){return new ur(be.max(),Te.empty(),Hl)}}function f4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class h4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t){if(t.code!==oe.FAILED_PRECONDITION||t.message!==d4)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((o,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,s)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,o)=>{n(e)}))}static reject(e){return new re(((n,o)=>{o(e)}))}static waitFor(e){return new re(((n,o)=>{let s=0,l=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++l,u&&l===s&&n()}),(g=>o(g)))})),u=!0,l===s&&n()}))}static or(e){let n=re.resolve(!1);for(const o of e)n=n.next((s=>s?re.resolve(s):o()));return n}static forEach(e,n){const o=[];return e.forEach(((s,l)=>{o.push(n.call(this,s,l))})),this.waitFor(o)}static mapArray(e,n){return new re(((o,s)=>{const l=e.length,u=new Array(l);let d=0;for(let g=0;g<l;g++){const p=g;n(e[p]).next((_=>{u[p]=_,++d,d===l&&o(u)}),(_=>s(_)))}}))}static doWhile(e,n){return new re(((o,s)=>{const l=()=>{e()===!0?n().next((()=>{l()}),s):o()};l()}))}}function p4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ta(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=-1;function Df(t){return t==null}function cf(t){return t===0&&1/t==-1/0}function m4(t){return typeof t=="number"&&Number.isInteger(t)&&!cf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="";function g4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=UE(e)),e=y4(t.get(n),e);return UE(e)}function y4(t,e){let n=e;const o=t.length;for(let s=0;s<o;s++){const l=t.charAt(s);switch(l){case"\0":n+="";break;case CA:n+="";break;default:n+=l}}return n}function UE(t){return t+CA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const s=this.comparator(e,o.key);if(s===0)return n+o.left.size;s<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,n,o,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,o,s,l){this.key=e,this.value=n,this.color=o??Wt.RED,this.left=s??Wt.EMPTY,this.right=l??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,s,l){return new Wt(e??this.key,n??this.value,o??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let s=this;const l=o(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,n,o),null):l===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,o)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Wt.EMPTY;o=s.right.min(),s=s.copy(o.key,o.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,o,s,l){return this}insert(e,n,o){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const s=o.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new OE(this.data.getIterator())}getIteratorFrom(e){return new OE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,l=o.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Bt(this.comparator);return n.data=e,n}}class OE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new Bt(jt.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new IA("Invalid base64 string: "+l):l}})(e);return new en(n)}static fromUint8Array(e){const n=(function(s){let l="";for(let u=0;u<s.length;++u)l+=String.fromCharCode(s[u]);return l})(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const v4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(t){if(Ze(!!t,39018),typeof t=="string"){let e=0;const n=v4.exec(t);if(Ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const o=new Date(t);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fr(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="server_timestamp",RA="__type__",xA="__previous_value__",NA="__local_write_time__";function gm(t){var n,o;return((o=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[RA])==null?void 0:o.stringValue)===bA}function Vf(t){const e=t.mapValue.fields[xA];return gm(e)?Vf(e):e}function Yl(t){const e=cr(t.mapValue.fields[NA].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,o,s,l,u,d,g,p,_,E){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_,this.apiKey=E}}const ff="(default)";class Kl{constructor(e,n){this.projectId=e,this.database=n||ff}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===ff}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}function E4(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new de(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="__type__",T4="__max__",qc={mapValue:{}},DA="__vector__",df="value";function dr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gm(t)?4:A4(t)?9007199254740991:S4(t)?10:11:Ce(28295,{value:t})}function Hi(t,e){if(t===e)return!0;const n=dr(t);if(n!==dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yl(t).isEqual(Yl(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const u=cr(s.timestampValue),d=cr(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,l){return fr(s.bytesValue).isEqual(fr(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,l){return At(s.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(s.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(t,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return At(s.integerValue)===At(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const u=At(s.doubleValue),d=At(l.doubleValue);return u===d?cf(u)===cf(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return ua(t.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(s,l){const u=s.mapValue.fields||{},d=l.mapValue.fields||{};if(LE(u)!==LE(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Hi(u[g],d[g])))return!1;return!0})(t,e);default:return Ce(52216,{left:t})}}function Jl(t,e){return(t.values||[]).find((n=>Hi(n,e)))!==void 0}function ca(t,e){if(t===e)return 0;const n=dr(t),o=dr(e);if(n!==o)return Fe(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=At(l.integerValue||l.doubleValue),g=At(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(t,e);case 3:return BE(t.timestampValue,e.timestampValue);case 4:return BE(Yl(t),Yl(e));case 5:return Np(t.stringValue,e.stringValue);case 6:return(function(l,u){const d=fr(l),g=fr(u);return d.compareTo(g)})(t.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),g=u.split("/");for(let p=0;p<d.length&&p<g.length;p++){const _=Fe(d[p],g[p]);if(_!==0)return _}return Fe(d.length,g.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Fe(At(l.latitude),At(u.latitude));return d!==0?d:Fe(At(l.longitude),At(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return FE(t.arrayValue,e.arrayValue);case 10:return(function(l,u){var T,I,V,O;const d=l.fields||{},g=u.fields||{},p=(T=d[df])==null?void 0:T.arrayValue,_=(I=g[df])==null?void 0:I.arrayValue,E=Fe(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,((O=_==null?void 0:_.values)==null?void 0:O.length)||0);return E!==0?E:FE(p,_)})(t.mapValue,e.mapValue);case 11:return(function(l,u){if(l===qc.mapValue&&u===qc.mapValue)return 0;if(l===qc.mapValue)return 1;if(u===qc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),p=u.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const T=Np(g[E],_[E]);if(T!==0)return T;const I=ca(d[g[E]],p[_[E]]);if(I!==0)return I}return Fe(g.length,_.length)})(t.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function BE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=cr(t),o=cr(e),s=Fe(n.seconds,o.seconds);return s!==0?s:Fe(n.nanos,o.nanos)}function FE(t,e){const n=t.values||[],o=e.values||[];for(let s=0;s<n.length&&s<o.length;++s){const l=ca(n[s],o[s]);if(l)return l}return Fe(n.length,o.length)}function fa(t){return Mp(t)}function Mp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const o=cr(n);return`time(${o.seconds},${o.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return fr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let o="[",s=!0;for(const l of n.values||[])s?s=!1:o+=",",o+=Mp(l);return o+"]"})(t.arrayValue):"mapValue"in t?(function(n){const o=Object.keys(n.fields||{}).sort();let s="{",l=!0;for(const u of o)l?l=!1:s+=",",s+=`${u}:${Mp(n.fields[u])}`;return s+"}"})(t.mapValue):Ce(61005,{value:t})}function $c(t){switch(dr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vf(t);return e?16+$c(e):16;case 5:return 2*t.stringValue.length;case 6:return fr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((s,l)=>s+$c(l)),0)})(t.arrayValue);case 10:case 11:return(function(o){let s=0;return yr(o.fields,((l,u)=>{s+=l.length+$c(u)})),s})(t.mapValue);default:throw Ce(13486,{value:t})}}function qE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dp(t){return!!t&&"integerValue"in t}function ym(t){return!!t&&"arrayValue"in t}function zE(t){return!!t&&"nullValue"in t}function GE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qc(t){return!!t&&"mapValue"in t}function S4(t){var n,o;return((o=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[MA])==null?void 0:o.stringValue)===DA}function Ll(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return yr(t.mapValue.fields,((n,o)=>e.mapValue.fields[n]=Ll(o))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ll(t.arrayValue.values[n]);return e}return{...t}}function A4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===T4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Qc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(n)}setAll(e){let n=jt.emptyPath(),o={},s=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,o,s),o={},s=[],n=d.popLast()}u?o[d.lastSegment()]=Ll(u):s.push(d.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,o,s)}delete(e){const n=this.field(e.popLast());Qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let s=n.mapValue.fields[e.get(o)];Qc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,o){yr(n,((s,l)=>e[s]=l));for(const s of o)delete e[s]}clone(){return new Tn(Ll(this.value))}}function VA(t){const e=[];return yr(t.fields,((n,o)=>{const s=new jt([n]);if(Qc(o)){const l=VA(o.mapValue).fields;if(l.length===0)e.push(s);else for(const u of l)e.push(s.child(u))}else e.push(s)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,o,s,l,u,d){this.key=e,this.documentType=n,this.version=o,this.readTime=s,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new rn(e,0,be.min(),be.min(),be.min(),Tn.empty(),0)}static newFoundDocument(e,n,o,s){return new rn(e,1,n,be.min(),o,s,0)}static newNoDocument(e,n){return new rn(e,2,n,be.min(),be.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,be.min(),be.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n){this.position=e,this.inclusive=n}}function HE(t,e,n){let o=0;for(let s=0;s<t.position.length;s++){const l=e[s],u=t.position[s];if(l.field.isKeyField()?o=Te.comparator(Te.fromName(u.referenceValue),n.key):o=ca(u,n.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function YE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n="asc"){this.field=e,this.dir=n}}function C4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{}class Vt extends PA{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new I4(e,n,o):n==="array-contains"?new x4(e,o):n==="in"?new N4(e,o):n==="not-in"?new M4(e,o):n==="array-contains-any"?new D4(e,o):new Vt(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new b4(e,o):new R4(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ca(n,this.value)):n!==null&&dr(this.value)===dr(n)&&this.matchesComparison(ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pi extends PA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new pi(e,n)}matches(e){return kA(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kA(t){return t.op==="and"}function UA(t){return w4(t)&&kA(t)}function w4(t){for(const e of t.filters)if(e instanceof pi)return!1;return!0}function Vp(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+fa(t.value);if(UA(t))return t.filters.map((e=>Vp(e))).join(",");{const e=t.filters.map((n=>Vp(n))).join(",");return`${t.op}(${e})`}}function LA(t,e){return t instanceof Vt?(function(o,s){return s instanceof Vt&&o.op===s.op&&o.field.isEqual(s.field)&&Hi(o.value,s.value)})(t,e):t instanceof pi?(function(o,s){return s instanceof pi&&o.op===s.op&&o.filters.length===s.filters.length?o.filters.reduce(((l,u,d)=>l&&LA(u,s.filters[d])),!0):!1})(t,e):void Ce(19439)}function OA(t){return t instanceof Vt?(function(n){return`${n.field.canonicalString()} ${n.op} ${fa(n.value)}`})(t):t instanceof pi?(function(n){return n.op.toString()+" {"+n.getFilters().map(OA).join(" ,")+"}"})(t):"Filter"}class I4 extends Vt{constructor(e,n,o){super(e,n,o),this.key=Te.fromName(o.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class b4 extends Vt{constructor(e,n){super(e,"in",n),this.keys=BA("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class R4 extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=BA("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function BA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((o=>Te.fromName(o.referenceValue)))}class x4 extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ym(n)&&Jl(n.arrayValue,this.value)}}class N4 extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jl(this.value.arrayValue,n)}}class M4 extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jl(this.value.arrayValue,n)}}class D4 extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>Jl(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n=null,o=[],s=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=s,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function KE(t,e=null,n=[],o=[],s=null,l=null,u=null){return new V4(t,e,n,o,s,l,u)}function vm(t){const e=xe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>Vp(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),Df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>fa(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>fa(o))).join(",")),e.Te=n}return e.Te}function _m(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!C4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YE(t.startAt,e.startAt)&&YE(t.endAt,e.endAt)}function Pp(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n=null,o=[],s=[],l=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=s,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function P4(t,e,n,o,s,l,u,d){return new Sa(t,e,n,o,s,l,u,d)}function Em(t){return new Sa(t)}function JE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function k4(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function FA(t){return t.collectionGroup!==null}function Ol(t){const e=xe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Bt(jt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new $l(l,o))})),n.has(jt.keyField().canonicalString())||e.Ie.push(new $l(jt.keyField(),o))}return e.Ie}function qi(t){const e=xe(t);return e.Ee||(e.Ee=U4(e,Ol(t))),e.Ee}function U4(t,e){if(t.limitType==="F")return KE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new $l(s.field,l)}));const n=t.endAt?new hf(t.endAt.position,t.endAt.inclusive):null,o=t.startAt?new hf(t.startAt.position,t.startAt.inclusive):null;return KE(t.path,t.collectionGroup,e,t.filters,t.limit,n,o)}}function kp(t,e){const n=t.filters.concat([e]);return new Sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function L4(t,e){const n=t.explicitOrderBy.concat([e]);return new Sa(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Up(t,e,n){return new Sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pf(t,e){return _m(qi(t),qi(e))&&t.limitType===e.limitType}function qA(t){return`${vm(qi(t))}|lt:${t.limitType}`}function Zs(t){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((s=>OA(s))).join(", ")}]`),Df(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((s=>fa(s))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((s=>fa(s))).join(",")),`Target(${o})`})(qi(t))}; limitType=${t.limitType})`}function kf(t,e){return e.isFoundDocument()&&(function(o,s){const l=s.key.path;return o.collectionGroup!==null?s.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Te.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(t,e)&&(function(o,s){for(const l of Ol(o))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(o,s){for(const l of o.filters)if(!l.matches(s))return!1;return!0})(t,e)&&(function(o,s){return!(o.startAt&&!(function(u,d,g){const p=HE(u,d,g);return u.inclusive?p<=0:p<0})(o.startAt,Ol(o),s)||o.endAt&&!(function(u,d,g){const p=HE(u,d,g);return u.inclusive?p>=0:p>0})(o.endAt,Ol(o),s))})(t,e)}function O4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zA(t){return(e,n)=>{let o=!1;for(const s of Ol(t)){const l=B4(s,e,n);if(l!==0)return l;o=o||s.field.isKeyField()}return 0}}function B4(t,e,n){const o=t.field.isKeyField()?Te.comparator(e.key,n.key):(function(l,u,d){const g=u.data.field(l),p=d.data.field(l);return g!==null&&p!==null?ca(g,p):Ce(42886)})(t.field,e,n);switch(t.dir){case"asc":return o;case"desc":return-1*o;default:return Ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[s,l]of o)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),s=this.inner[o];if(s===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return o.length===1?delete this.inner[n]:o.splice(s,1),this.innerSize--,!0;return!1}forEach(e){yr(this.inner,((n,o)=>{for(const[s,l]of o)e(s,l)}))}isEmpty(){return wA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=new mt(Te.comparator);function yo(){return F4}const GA=new mt(Te.comparator);function Dl(...t){let e=GA;for(const n of t)e=e.insert(n.key,n);return e}function HA(t){let e=GA;return t.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function Zr(){return Bl()}function YA(){return Bl()}function Bl(){return new rs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const q4=new mt(Te.comparator),z4=new Bt(Te.comparator);function qe(...t){let e=z4;for(const n of t)e=e.add(n);return e}const G4=new Bt(Fe);function H4(){return G4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cf(e)?"-0":e}}function KA(t){return{integerValue:""+t}}function Y4(t,e){return m4(e)?KA(e):Tm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this._=void 0}}function K4(t,e,n){return t instanceof pf?(function(s,l){const u={fields:{[RA]:{stringValue:bA},[NA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&gm(l)&&(l=Vf(l)),l&&(u.fields[xA]=l),{mapValue:u}})(n,e):t instanceof Ql?$A(t,e):t instanceof Xl?QA(t,e):(function(s,l){const u=JA(s,l),d=$E(u)+$E(s.Ae);return Dp(u)&&Dp(s.Ae)?KA(d):Tm(s.serializer,d)})(t,e)}function J4(t,e,n){return t instanceof Ql?$A(t,e):t instanceof Xl?QA(t,e):n}function JA(t,e){return t instanceof mf?(function(o){return Dp(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class pf extends Uf{}class Ql extends Uf{constructor(e){super(),this.elements=e}}function $A(t,e){const n=XA(e);for(const o of t.elements)n.some((s=>Hi(s,o)))||n.push(o);return{arrayValue:{values:n}}}class Xl extends Uf{constructor(e){super(),this.elements=e}}function QA(t,e){let n=XA(e);for(const o of t.elements)n=n.filter((s=>!Hi(s,o)));return{arrayValue:{values:n}}}class mf extends Uf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $E(t){return At(t.integerValue||t.doubleValue)}function XA(t){return ym(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $4(t,e){return t.field.isEqual(e.field)&&(function(o,s){return o instanceof Ql&&s instanceof Ql||o instanceof Xl&&s instanceof Xl?ua(o.elements,s.elements,Hi):o instanceof mf&&s instanceof mf?Hi(o.Ae,s.Ae):o instanceof pf&&s instanceof pf})(t.transform,e.transform)}class Q4{constructor(e,n){this.version=e,this.transformResults=n}}class di{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new di}static exists(e){return new di(void 0,e)}static updateTime(e){return new di(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lf{}function ZA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sm(t.key,di.none()):new jl(t.key,t.data,di.none());{const n=t.data,o=Tn.empty();let s=new Bt(jt.comparator);for(let l of e.fields)if(!s.has(l)){let u=n.field(l);u===null&&l.length>1&&(l=l.popLast(),u=n.field(l)),u===null?o.delete(l):o.set(l,u),s=s.add(l)}return new vr(t.key,o,new Dn(s.toArray()),di.none())}}function X4(t,e,n){t instanceof jl?(function(s,l,u){const d=s.value.clone(),g=XE(s.fieldTransforms,l,u.transformResults);d.setAll(g),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof vr?(function(s,l,u){if(!Xc(s.precondition,l))return void l.convertToUnknownDocument(u.version);const d=XE(s.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(WA(s)),g.setAll(d),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(t,e,n):(function(s,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Fl(t,e,n,o){return t instanceof jl?(function(l,u,d,g){if(!Xc(l.precondition,u))return d;const p=l.value.clone(),_=ZE(l.fieldTransforms,g,u);return p.setAll(_),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(t,e,n,o):t instanceof vr?(function(l,u,d,g){if(!Xc(l.precondition,u))return d;const p=ZE(l.fieldTransforms,g,u),_=u.data;return _.setAll(WA(l)),_.setAll(p),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(t,e,n,o):(function(l,u,d){return Xc(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function Z4(t,e){let n=null;for(const o of t.fieldTransforms){const s=e.data.field(o.field),l=JA(o.transform,s||null);l!=null&&(n===null&&(n=Tn.empty()),n.set(o.field,l))}return n||null}function QE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(o,s){return o===void 0&&s===void 0||!(!o||!s)&&ua(o,s,((l,u)=>$4(l,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jl extends Lf{constructor(e,n,o,s=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class vr extends Lf{constructor(e,n,o,s,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function WA(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=t.data.field(n);e.set(n,o)}})),e}function XE(t,e,n){const o=new Map;Ze(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const l=t[s],u=l.transform,d=e.data.field(l.field);o.set(l.field,J4(u,d,n[s]))}return o}function ZE(t,e,n){const o=new Map;for(const s of t){const l=s.transform,u=n.data.field(s.field);o.set(s.field,K4(l,u,e))}return o}class Sm extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W4 extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n,o,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=s}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&X4(l,e,o[s])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Fl(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Fl(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=YA();return this.mutations.forEach((s=>{const l=e.get(s.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=n.has(s.key)?null:d;const g=ZA(u,d);g!==null&&o.set(s.key,g),u.isValidDocument()||u.convertToNoDocument(be.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qe())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,((n,o)=>QE(n,o)))&&ua(this.baseMutations,e.baseMutations,((n,o)=>QE(n,o)))}}class Am{constructor(e,n,o,s){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=s}static from(e,n,o){Ze(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let s=(function(){return q4})();const l=e.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,o[u].version);return new Am(e,n,o,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Ge;function nU(t){switch(t){case oe.OK:return Ce(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ce(15467,{code:t})}}function jA(t){if(t===void 0)return go("GRPC error has no .code"),oe.UNKNOWN;switch(t){case Dt.OK:return oe.OK;case Dt.CANCELLED:return oe.CANCELLED;case Dt.UNKNOWN:return oe.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return oe.INTERNAL;case Dt.UNAVAILABLE:return oe.UNAVAILABLE;case Dt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Dt.NOT_FOUND:return oe.NOT_FOUND;case Dt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Dt.ABORTED:return oe.ABORTED;case Dt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Dt.DATA_LOSS:return oe.DATA_LOSS;default:return Ce(39323,{code:t})}}(Ge=Dt||(Dt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=new rr([4294967295,4294967295],0);function WE(t){const e=iU().encode(t),n=new pA;return n.update(e),new Uint8Array(n.digest())}function jE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new rr([n,o],0),new rr([s,l],0)]}class Cm{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Vl(`Invalid padding: ${n}`);if(o<0)throw new Vl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=rr.fromNumber(this.ge)}ye(e,n,o){let s=e.add(n.multiply(rr.fromNumber(o)));return s.compare(oU)===1&&(s=new rr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=WE(e),[o,s]=jE(n);for(let l=0;l<this.hashCount;l++){const u=this.ye(o,s,l);if(!this.we(u))return!1}return!0}static create(e,n,o){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Cm(l,s,n);return o.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const n=WE(e),[o,s]=jE(n);for(let l=0;l<this.hashCount;l++){const u=this.ye(o,s,l);this.be(u)}}be(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,o,s,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const s=new Map;return s.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Of(be.min(),s,new mt(Fe),yo(),qe())}}class eu{constructor(e,n,o,s,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new eu(o,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,o,s){this.Se=e,this.removedTargetIds=n,this.key=o,this.De=s}}class eC{constructor(e,n){this.targetId=e,this.Ce=n}}class tC{constructor(e,n,o=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=s}}class eT{constructor(){this.ve=0,this.Fe=tT(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),n=qe(),o=qe();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:o=o.add(s);break;default:Ce(38017,{changeType:l})}})),new eu(this.Me,this.xe,e,n,o)}Ke(){this.Oe=!1,this.Fe=tT()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class rU{constructor(e){this.Ge=e,this.ze=new Map,this.je=yo(),this.He=zc(),this.Je=zc(),this.Ze=new mt(Fe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,o=e.Ce.count,s=this.ot(n);if(s){const l=s.target;if(Pp(l))if(o===0){const u=new Te(l.path);this.et(n,u,rn.newNoDocument(u,be.min()))}else Ze(o===1,20013,{expectedCount:o});else{const u=this._t(n);if(u!==o){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:s=0},hashCount:l=0}=n;let u,d;try{u=fr(o).toUint8Array()}catch(g){if(g instanceof IA)return la("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Cm(u,s,l)}catch(g){return la(g instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let s=0;return o.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(n,l,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&Pp(d.target)){const g=new Te(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,rn.newNoDocument(g,e))}l.Be&&(n.set(u,l.ke()),l.Ke())}}));let o=qe();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const s=new Of(e,n,this.Ze,this.je,o);return this.je=yo(),this.He=zc(),this.Je=zc(),this.Ze=new mt(Fe),s}Ye(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,o),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new eT,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Bt(Fe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Bt(Fe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eT),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function zc(){return new mt(Te.comparator)}function tT(){return new mt(Te.comparator)}const sU={asc:"ASCENDING",desc:"DESCENDING"},aU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lU={and:"AND",or:"OR"};class uU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lp(t,e){return t.useProto3Json||Df(e)?e:{value:e}}function gf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cU(t,e){return gf(t,e.toTimestamp())}function zi(t){return Ze(!!t,49232),be.fromTimestamp((function(n){const o=cr(n);return new dt(o.seconds,o.nanos)})(t))}function wm(t,e){return Op(t,e).canonicalString()}function Op(t,e){const n=(function(s){return new lt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function iC(t){const e=lt.fromString(t);return Ze(lC(e),10190,{key:e.toString()}),e}function Bp(t,e){return wm(t.databaseId,e.path)}function op(t,e){const n=iC(e);if(n.get(1)!==t.databaseId.projectId)throw new de(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Te(rC(n))}function oC(t,e){return wm(t.databaseId,e)}function fU(t){const e=iC(t);return e.length===4?lt.emptyPath():rC(e)}function Fp(t){return new lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rC(t){return Ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function nT(t,e,n){return{name:Bp(t,e),fields:n.value.mapValue.fields}}function dU(t,e){let n;if("targetChange"in e){e.targetChange;const o=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(Ze(_===void 0||typeof _=="string",58123),en.fromBase64String(_||"")):(Ze(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),en.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const _=p.code===void 0?oe.UNKNOWN:jA(p.code);return new de(_,p.message||"")})(u);n=new tC(o,s,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const s=op(t,o.document.name),l=zi(o.document.updateTime),u=o.document.createTime?zi(o.document.createTime):be.min(),d=new Tn({mapValue:{fields:o.document.fields}}),g=rn.newFoundDocument(s,l,u,d),p=o.targetIds||[],_=o.removedTargetIds||[];n=new Zc(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const s=op(t,o.document),l=o.readTime?zi(o.readTime):be.min(),u=rn.newNoDocument(s,l),d=o.removedTargetIds||[];n=new Zc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const s=op(t,o.document),l=o.removedTargetIds||[];n=new Zc([],l,s,null)}else{if(!("filter"in e))return Ce(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:s=0,unchangedNames:l}=o,u=new tU(s,l),d=o.targetId;n=new eC(d,u)}}return n}function hU(t,e){let n;if(e instanceof jl)n={update:nT(t,e.key,e.value)};else if(e instanceof Sm)n={delete:Bp(t,e.key)};else if(e instanceof vr)n={update:nT(t,e.key,e.data),updateMask:SU(e.fieldMask)};else{if(!(e instanceof W4))return Ce(16599,{dt:e.type});n={verify:Bp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(l,u){const d=u.transform;if(d instanceof pf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ql)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Xl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof mf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ce(20930,{transform:u.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:cU(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(t,e.precondition)),n}function pU(t,e){return t&&t.length>0?(Ze(e!==void 0,14353),t.map((n=>(function(s,l){let u=s.updateTime?zi(s.updateTime):zi(l);return u.isEqual(be.min())&&(u=zi(l)),new Q4(u,s.transformResults||[])})(n,e)))):[]}function mU(t,e){return{documents:[oC(t,e.path)]}}function gU(t,e){const n={structuredQuery:{}},o=e.path;let s;e.collectionGroup!==null?(s=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=oC(t,s);const l=(function(p){if(p.length!==0)return aC(pi.create(p,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((_=>(function(T){return{field:Ws(T.field),direction:_U(T.dir)}})(_)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=Lp(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:s}}function yU(t){let e=fU(t.parent);const n=t.structuredQuery,o=n.from?n.from.length:0;let s=null;if(o>0){Ze(o===1,65062);const _=n.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let l=[];n.where&&(l=(function(E){const T=sC(E);return T instanceof pi&&UA(T)?T.getFilters():[T]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((T=>(function(V){return new $l(js(V.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(T)))})(n.orderBy));let d=null;n.limit&&(d=(function(E){let T;return T=typeof E=="object"?E.value:E,Df(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(E){const T=!!E.before,I=E.values||[];return new hf(I,T)})(n.startAt));let p=null;return n.endAt&&(p=(function(E){const T=!E.before,I=E.values||[];return new hf(I,T)})(n.endAt)),P4(e,s,u,l,d,"F",g,p)}function vU(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sC(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=js(n.unaryFilter.field);return Vt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const s=js(n.unaryFilter.field);return Vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=js(n.unaryFilter.field);return Vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=js(n.unaryFilter.field);return Vt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Vt.create(js(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return pi.create(n.compositeFilter.filters.map((o=>sC(o))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(n.compositeFilter.op))})(t):Ce(30097,{filter:t})}function _U(t){return sU[t]}function EU(t){return aU[t]}function TU(t){return lU[t]}function Ws(t){return{fieldPath:t.canonicalString()}}function js(t){return jt.fromServerFormat(t.fieldPath)}function aC(t){return t instanceof Vt?(function(n){if(n.op==="=="){if(GE(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NAN"}};if(zE(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(GE(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NOT_NAN"}};if(zE(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ws(n.field),op:EU(n.op),value:n.value}}})(t):t instanceof pi?(function(n){const o=n.getFilters().map((s=>aC(s)));return o.length===1?o[0]:{compositeFilter:{op:TU(n.op),filters:o}}})(t):Ce(54877,{filter:t})}function SU(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function lC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function uC(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n,o,s,l=be.min(),u=be.min(),d=en.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.yt=e}}function CU(t){const e=yU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Up(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this.Sn=new IU}addToCollectionParentIndex(e,n){return this.Sn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(ur.min())}updateCollectionGroup(e,n,o){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class IU{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),s=this.index[n]||new Bt(lt.comparator),l=!s.has(o);return this.index[n]=s.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),s=this.index[n];return s&&s.has(o)}getEntries(e){return(this.index[e]||new Bt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cC=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(cC,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new da(0)}static ar(){return new da(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="LruGarbageCollector",bU=1048576;function rT([t,e],[n,o]){const s=Fe(t,n);return s===0?Fe(e,o):s}class RU{constructor(e){this.Pr=e,this.buffer=new Bt(rT),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();rT(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xU{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(oT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ta(n)?pe(oT,"Ignoring IndexedDB error during garbage collection: ",n):await Ea(n)}await this.Ar(3e5)}))}}class NU{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(Mf.ce);const o=new RU(n);return this.Vr.forEachTarget(e,(s=>o.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>o.Er(s))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.Vr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(iT)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iT):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let o,s,l,u,d,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(o=E,d=Date.now(),this.removeTargets(e,o,n)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,o)))).next((E=>(p=Date.now(),Xs()<=He.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function MU(t,e){return new NU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.changes=new rs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?re.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e,n,o,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=s}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(o=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(o!==null&&Fl(o.mutation,s,Dn.empty(),dt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,qe()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=qe()){const s=Zr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,o).next((l=>{let u=Dl();return l.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const o=Zr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,qe())))}populateOverlays(e,n,o){const s=[];return o.forEach((l=>{n.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,o,s){let l=yo();const u=Bl(),d=(function(){return Bl()})();return n.forEach(((g,p)=>{const _=o.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof vr)?l=l.insert(p.key,p):_!==void 0?(u.set(p.key,_.mutation.getFieldMask()),Fl(_.mutation,p,_.mutation.getFieldMask(),dt.now())):u.set(p.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,_)=>u.set(p,_))),n.forEach(((p,_)=>d.set(p,new VU(_,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,n){const o=Bl();let s=new mt(((u,d)=>u-d)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let _=o.get(g)||Dn.empty();_=d.applyToLocalView(p,_),o.set(g,_);const E=(s.get(d.batchId)||qe()).add(g);s=s.insert(d.batchId,E)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,_=g.value,E=YA();_.forEach((T=>{if(!l.has(T)){const I=ZA(n.get(T),o.get(T));I!==null&&E.set(T,I),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return re.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,s){return k4(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,s):this.getDocumentsMatchingCollectionQuery(e,n,o,s)}getNextDocuments(e,n,o,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,s).next((l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,s-l.size):re.resolve(Zr());let d=Hl,g=l;return u.next((p=>re.forEach(p,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{g=g.insert(_,T)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,qe()))).next((_=>({batchId:d,changes:HA(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((o=>{let s=Dl();return o.isFoundDocument()&&(s=s.insert(o.key,o)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,s){const l=n.collectionGroup;let u=Dl();return this.indexManager.getCollectionParents(e,l).next((d=>re.forEach(d,(g=>{const p=(function(E,T){return new Sa(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,o,s).next((_=>{_.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,o,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,l,s)))).next((u=>{l.forEach(((g,p)=>{const _=p.getKey();u.get(_)===null&&(u=u.insert(_,rn.newInvalidDocument(_)))}));let d=Dl();return u.forEach(((g,p)=>{const _=l.get(g);_!==void 0&&Fl(_.mutation,p,Dn.empty(),dt.now()),kf(n,p)&&(d=d.insert(g,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return re.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:zi(s.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(s){return{name:s.name,query:CU(s.bundledQuery),readTime:zi(s.readTime)}})(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(){this.overlays=new mt(Te.comparator),this.Lr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Zr();return re.forEach(n,(s=>this.getOverlay(e,s).next((l=>{l!==null&&o.set(s,l)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((s,l)=>{this.bt(e,n,l)})),re.resolve()}removeOverlaysForBatchId(e,n,o){const s=this.Lr.get(o);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(o)),re.resolve()}getOverlaysForCollection(e,n,o){const s=Zr(),l=n.length+1,u=new Te(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>o&&s.set(g.getKey(),g)}return re.resolve(s)}getOverlaysForCollectionGroup(e,n,o,s){let l=new mt(((p,_)=>p-_));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>o){let _=l.get(p.largestBatchId);_===null&&(_=Zr(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Zr(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>d.set(p,_))),!(d.size()>=s)););return re.resolve(d)}bt(e,n,o){const s=this.overlays.get(o.key);if(s!==null){const u=this.Lr.get(s.largestBatchId).delete(o.key);this.Lr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new eU(n,o));let l=this.Lr.get(n);l===void 0&&(l=qe(),this.Lr.set(n,l)),this.Lr.set(n,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.kr=new Bt(Ht.Kr),this.qr=new Bt(Ht.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const o=new Ht(e,n);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Wr(new Ht(e,n))}Qr(e,n){e.forEach((o=>this.removeReference(o,n)))}Gr(e){const n=new Te(new lt([])),o=new Ht(n,e),s=new Ht(n,e+1),l=[];return this.qr.forEachInRange([o,s],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Te(new lt([])),o=new Ht(n,e),s=new Ht(n,e+1);let l=qe();return this.qr.forEachInRange([o,s],(u=>{l=l.add(u.key)})),l}containsKey(e){const n=new Ht(e,0),o=this.kr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class Ht{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Te.comparator(e.key,n.key)||Fe(e.Hr,n.Hr)}static Ur(e,n){return Fe(e.Hr,n.Hr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Bt(Ht.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new j4(l,n,o,s);this.mutationQueue.push(u);for(const d of s)this.Jr=this.Jr.add(new Ht(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,n){return re.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,s=this.Xr(o),l=s<0?0:s;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?mm:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ht(n,0),s=new Ht(n,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([o,s],(u=>{const d=this.Zr(u.Hr);l.push(d)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Bt(Fe);return n.forEach((s=>{const l=new Ht(s,0),u=new Ht(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(d=>{o=o.add(d.Hr)}))})),re.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,s=o.length+1;let l=o;Te.isDocumentKey(l)||(l=l.child(""));const u=new Ht(new Te(l),0);let d=new Bt(Fe);return this.Jr.forEachWhile((g=>{const p=g.key.path;return!!o.isPrefixOf(p)&&(p.length===s&&(d=d.add(g.Hr)),!0)}),u),re.resolve(this.Yr(d))}Yr(e){const n=[];return e.forEach((o=>{const s=this.Zr(o);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ze(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return re.forEach(n.mutations,(s=>{const l=new Ht(s.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,n){const o=new Ht(n,0),s=this.Jr.firstAfterOrEqual(o);return re.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.ti=e,this.docs=(function(){return new mt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,s=this.docs.get(o),l=s?s.size:0,u=this.ti(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return re.resolve(o?o.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let o=yo();return n.forEach((s=>{const l=this.docs.get(s);o=o.insert(s,l?l.document.mutableCopy():rn.newInvalidDocument(s))})),re.resolve(o)}getDocumentsMatchingQuery(e,n,o,s){let l=yo();const u=n.path,d=new Te(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||f4(c4(_),o)<=0||(s.has(_.key)||kf(n,_))&&(l=l.insert(_.key,_.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,n,o,s){Ce(9500)}ni(e,n){return re.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new FU(this)}getSize(e){return re.resolve(this.size)}}class FU extends DU{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(o)})),re.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e){this.persistence=e,this.ri=new rs((n=>vm(n)),_m),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.ii=0,this.si=new Im,this.targetCount=0,this.oi=da._r()}forEachTarget(e,n){return this.ri.forEach(((o,s)=>n(s))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.ii&&(this.ii=n),re.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new da(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.lr(n),re.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,o){let s=0;const l=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=n&&o.get(d.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),re.waitFor(l).next((()=>s))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const o=this.ri.get(n)||null;return re.resolve(o)}addMatchingKeys(e,n,o){return this.si.$r(n,o),re.resolve()}removeMatchingKeys(e,n,o){this.si.Qr(n,o);const s=this.persistence.referenceDelegate,l=[];return s&&n.forEach((u=>{l.push(s.markPotentiallyOrphaned(e,u))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const o=this.si.jr(n);return re.resolve(o)}containsKey(e,n){return re.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this._i={},this.overlays={},this.ai=new Mf(0),this.ui=!1,this.ui=!0,this.ci=new LU,this.referenceDelegate=e(this),this.li=new qU(this),this.indexManager=new wU,this.remoteDocumentCache=(function(s){return new BU(s)})((o=>this.referenceDelegate.hi(o))),this.serializer=new AU(n),this.Pi=new kU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this._i[e.toKey()];return o||(o=new OU(n,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,o){pe("MemoryPersistence","Starting transaction:",e);const s=new zU(this.ai.next());return this.referenceDelegate.Ti(),o(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,n){return re.or(Object.values(this._i).map((o=>()=>o.containsKey(e,n))))}}class zU extends h4{constructor(e){super(),this.currentSequenceNumber=e}}class bm{constructor(e){this.persistence=e,this.Ri=new Im,this.Ai=null}static Vi(e){return new bm(e)}get di(){if(this.Ai)return this.Ai;throw Ce(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.di.delete(o.toString()),re.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.di.add(o.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((s=>this.di.add(s.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>o.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(o=>{const s=Te.fromPath(o);return this.mi(e,s).next((l=>{l||n.removeEntry(s,be.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((o=>{o?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class yf{constructor(e,n){this.persistence=e,this.fi=new rs((o=>g4(o.path)),((o,s)=>o.isEqual(s))),this.garbageCollector=MU(this,n)}static Vi(e,n){return new yf(e,n)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((s=>o+s))))}pr(e){let n=0;return this.mr(e,(o=>{n++})).next((()=>n))}mr(e,n){return re.forEach(this.fi,((o,s)=>this.wr(e,o,s).next((l=>l?re.resolve():n(s)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(u=>this.wr(e,u,n).next((d=>{d||(o++,l.removeEntry(u,be.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.fi.set(o,e.currentSequenceNumber),re.resolve()}removeReference(e,n,o){return this.fi.set(o,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$c(e.data.value)),n}wr(e,n,o){return re.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return re.resolve(s!==void 0&&s>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n,o,s){this.targetId=e,this.fromCache=n,this.Ts=o,this.Is=s}static Es(e,n){let o=qe(),s=qe();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Rm(e,n.fromCache,o,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return cV()?8:p4(aV())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,s){const l={result:null};return this.gs(e,n).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,n,s,o).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new GU;return this.ys(e,n,u).next((d=>{if(l.result=d,this.As)return this.ws(e,n,u,d.size)}))})).next((()=>l.result))}ws(e,n,o,s){return o.documentReadCount<this.Vs?(Xs()<=He.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(Xs()<=He.DEBUG&&pe("QueryEngine","Query:",Zs(n),"scans",o.documentReadCount,"local documents and returns",s,"documents as results."),o.documentReadCount>this.ds*s?(Xs()<=He.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qi(n))):re.resolve())}gs(e,n){if(JE(n))return re.resolve(null);let o=qi(n);return this.indexManager.getIndexType(e,o).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Up(n,null,"F"),o=qi(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const u=qe(...l);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,o).next((g=>{const p=this.bs(n,d);return this.Ss(n,p,u,g.readTime)?this.gs(e,Up(n,null,"F")):this.Ds(e,p,n,g)}))))})))))}ps(e,n,o,s){return JE(n)||s.isEqual(be.min())?re.resolve(null):this.fs.getDocuments(e,o).next((l=>{const u=this.bs(n,l);return this.Ss(n,u,o,s)?re.resolve(null):(Xs()<=He.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zs(n)),this.Ds(e,u,n,u4(s,Hl)).next((d=>d)))}))}bs(e,n){let o=new Bt(zA(e));return n.forEach(((s,l)=>{kf(e,l)&&(o=o.add(l))})),o}Ss(e,n,o,s){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,n,o){return Xs()<=He.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Zs(n)),this.fs.getDocumentsMatchingQuery(e,n,ur.min(),o)}Ds(e,n,o,s){return this.fs.getDocumentsMatchingQuery(e,o,s).next((l=>(n.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="LocalStore",YU=3e8;class KU{constructor(e,n,o,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new mt(Fe),this.Fs=new rs((l=>vm(l)),_m),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PU(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function JU(t,e,n,o){return new KU(t,e,n,o)}async function dC(t,e){const n=xe(t);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let s;return n.mutationQueue.getAllMutationBatches(o).next((l=>(s=l,n.Os(e),n.mutationQueue.getAllMutationBatches(o)))).next((l=>{const u=[],d=[];let g=qe();for(const p of s){u.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(o,g).next((p=>({Ns:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function $U(t,e){const n=xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const s=e.batch.keys(),l=n.xs.newChangeBuffer({trackRemovals:!0});return(function(d,g,p,_){const E=p.batch,T=E.keys();let I=re.resolve();return T.forEach((V=>{I=I.next((()=>_.getEntry(g,V))).next((O=>{const P=p.docVersions.get(V);Ze(P!==null,48541),O.version.compareTo(P)<0&&(E.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),_.addEntry(O)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(g,E)))})(n,o,e,l).next((()=>l.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let g=qe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(o,s)))}))}function hC(t){const e=xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function QU(t,e){const n=xe(t),o=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const d=[];e.targetChanges.forEach(((_,E)=>{const T=s.get(E);if(!T)return;d.push(n.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>n.li.addMatchingKeys(l,_.addedDocuments,E))));let I=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(en.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,o)),s=s.insert(E,I),(function(O,P,G){return O.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=YU?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(T,I,_)&&d.push(n.li.updateTargetData(l,I))}));let g=yo(),p=qe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(XU(l,u,e.documentUpdates).next((_=>{g=_.Bs,p=_.Ls}))),!o.isEqual(be.min())){const _=n.li.getLastRemoteSnapshotVersion(l).next((E=>n.li.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(_)}return re.waitFor(d).next((()=>u.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(n.vs=s,l)))}function XU(t,e,n){let o=qe(),s=qe();return n.forEach((l=>o=o.add(l))),e.getEntries(t,o).next((l=>{let u=yo();return n.forEach(((d,g)=>{const p=l.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(d)),g.isNoDocument()&&g.version.isEqual(be.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):pe(xm,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)})),{Bs:u,Ls:s}}))}function ZU(t,e){const n=xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=mm),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function WU(t,e){const n=xe(t);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let s;return n.li.getTargetData(o,e).next((l=>l?(s=l,re.resolve(s)):n.li.allocateTargetId(o).next((u=>(s=new nr(e,u,"TargetPurposeListen",o.currentSequenceNumber),n.li.addTargetData(o,s).next((()=>s)))))))})).then((o=>{const s=n.vs.get(o.targetId);return(s===null||o.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(o.targetId,o),n.Fs.set(e,o.targetId)),o}))}async function qp(t,e,n){const o=xe(t),s=o.vs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",l,(u=>o.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Ta(u))throw u;pe(xm,`Failed to update sequence numbers for target ${e}: ${u}`)}o.vs=o.vs.remove(e),o.Fs.delete(s.target)}function sT(t,e,n){const o=xe(t);let s=be.min(),l=qe();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,p,_){const E=xe(g),T=E.Fs.get(_);return T!==void 0?re.resolve(E.vs.get(T)):E.li.getTargetData(p,_)})(o,u,qi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(u,d.targetId).next((g=>{l=g}))})).next((()=>o.Cs.getDocumentsMatchingQuery(u,e,n?s:be.min(),n?l:qe()))).next((d=>(jU(o,O4(e),d),{documents:d,ks:l})))))}function jU(t,e,n){let o=t.Ms.get(e)||be.min();n.forEach(((s,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),t.Ms.set(e,o)}class aT{constructor(){this.activeTargetIds=H4()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eL{constructor(){this.vo=new aT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,o){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new aT,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="ConnectivityMonitor";class uT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(lT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(lT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc=null;function zp(){return Gc===null?Gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gc++,"0x"+Gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="RestConnection",nL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class iL{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${o}/databases/${s}`,this.$o=this.databaseId.database===ff?`project_id=${o}`:`project_id=${o}&database_id=${s}`}Wo(e,n,o,s,l){const u=zp(),d=this.Qo(e,n.toUriEncodedString());pe(rp,`Sending RPC '${e}' ${u}:`,d,o);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,s,l);const{host:p}=new URL(d),_=om(p);return this.zo(e,d,g,o,_).then((E=>(pe(rp,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw la(rp,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",o),E}))}jo(e,n,o,s,l,u){return this.Wo(e,n,o,s,l)}Go(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_a})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,l)=>e[l]=s)),o&&o.headers.forEach(((s,l)=>e[l]=s))}Qo(e,n){const o=nL[e];let s=`${this.qo}/v1/${n}:${o}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection",xl=(t,e,n)=>{t.listen(e,(o=>{try{n(o)}catch(s){setTimeout((()=>{throw s}),0)}}))};class ra extends iL{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ra.c_){const e=vA();xl(e,yA.STAT_EVENT,(n=>{n.stat===xp.PROXY?pe(nn,"STAT_EVENT: detected buffering proxy"):n.stat===xp.NOPROXY&&pe(nn,"STAT_EVENT: detected no buffering proxy")})),ra.c_=!0}}zo(e,n,o,s,l){const u=zp();return new Promise(((d,g)=>{const p=new mA;p.setWithCredentials(!0),p.listenOnce(gA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Jc.NO_ERROR:const E=p.getResponseJson();pe(nn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Jc.TIMEOUT:pe(nn,`RPC '${e}' ${u} timed out`),g(new de(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:const T=p.getStatus();if(pe(nn,`RPC '${e}' ${u} failed with status:`,T,"response text:",p.getResponseText()),T>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const V=I==null?void 0:I.error;if(V&&V.status&&V.message){const O=(function(G){const Z=G.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(Z)>=0?Z:oe.UNKNOWN})(V.status);g(new de(O,V.message))}else g(new de(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new de(oe.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{pe(nn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);pe(nn,`RPC '${e}' ${u} sending request:`,s),p.send(n,"POST",_,o,15)}))}T_(e,n,o){const s=zp(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,n,o),d.encodeInitMessageHeaders=!0;const p=l.join("");pe(nn,`Creating RPC '${e}' stream ${s}: ${p}`,d);const _=u.createWebChannel(p,d);this.I_(_);let E=!1,T=!1;const I=new oL({Ho:V=>{T?pe(nn,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(E||(pe(nn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),E=!0),pe(nn,`RPC '${e}' stream ${s} sending:`,V),_.send(V))},Jo:()=>_.close()});return xl(_,Ml.EventType.OPEN,(()=>{T||(pe(nn,`RPC '${e}' stream ${s} transport opened.`),I.i_())})),xl(_,Ml.EventType.CLOSE,(()=>{T||(T=!0,pe(nn,`RPC '${e}' stream ${s} transport closed`),I.o_(),this.E_(_))})),xl(_,Ml.EventType.ERROR,(V=>{T||(T=!0,la(nn,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),I.o_(new de(oe.UNAVAILABLE,"The operation could not be completed")))})),xl(_,Ml.EventType.MESSAGE,(V=>{var O;if(!T){const P=V.data[0];Ze(!!P,16349);const G=P,Z=(G==null?void 0:G.error)||((O=G[0])==null?void 0:O.error);if(Z){pe(nn,`RPC '${e}' stream ${s} received error:`,Z);const W=Z.status;let se=(function(N){const M=Dt[N];if(M!==void 0)return jA(M)})(W),ee=Z.message;se===void 0&&(se=oe.INTERNAL,ee="Unknown error status: "+W+" with message "+Z.message),T=!0,I.o_(new de(se,ee)),_.close()}else pe(nn,`RPC '${e}' stream ${s} received:`,P),I.__(P)}})),ra.u_(),setTimeout((()=>{I.s_()}),0),I}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,o){super.Go(e,n,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return _A()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t){return new ra(t)}function sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){return new uU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ra.c_=!1;class pC{constructor(e,n,o=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=n,this.R_=o,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-o);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="PersistentStream";class mC{constructor(e,n,o,s,l,u,d,g){this.Ci=e,this.b_=o,this.S_=s,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(go(n.toString()),go("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,s])=>{this.D_===n&&this.G_(o,s)}),(o=>{e((()=>{const s=new de(oe.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(s)}))}))}G_(e,n){const o=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{o((()=>this.z_(s)))})),this.stream.onMessage((s=>{o((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(cT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(pe(cT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sL extends mC{constructor(e,n,o,s,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,s,u),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=dU(this.serializer,e),o=(function(l){if(!("targetChange"in l))return be.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?zi(u.readTime):be.min()})(e);return this.listener.J_(n,o)}Z_(e){const n={};n.database=Fp(this.serializer),n.addTarget=(function(l,u){let d;const g=u.target;if(d=Pp(g)?{documents:mU(l,g)}:{query:gU(l,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=nC(l,u.resumeToken);const p=Lp(l,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(be.min())>0){d.readTime=gf(l,u.snapshotVersion.toTimestamp());const p=Lp(l,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const o=vU(this.serializer,e);o&&(n.labels=o),this.K_(n)}X_(e){const n={};n.database=Fp(this.serializer),n.removeTarget=e,this.K_(n)}}class aL extends mC{constructor(e,n,o,s,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,s,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=pU(e.writeResults,e.commitTime),o=zi(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=Fp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>hU(this.serializer,o)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{}class uL extends lL{constructor(e,n,o,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new de(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,o,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,Op(n,o),s,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(oe.UNKNOWN,l.toString())}))}jo(e,n,o,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,Op(n,o),s,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function cL(t,e,n,o){return new uL(t,e,n,o)}class fL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(go(n),this.aa=!1):pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="RemoteStore";class dL{constructor(e,n,o,s,l){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{o.enqueueAndForget((async()=>{ss(this)&&(pe(is,"Restarting streams for network reachability change."),await(async function(g){const p=xe(g);p.Ea.add(4),await tu(p),p.Va.set("Unknown"),p.Ea.delete(4),await Ff(p)})(this))}))})),this.Va=new fL(o,s)}}async function Ff(t){if(ss(t))for(const e of t.Ra)await e(!0)}async function tu(t){for(const e of t.Ra)await e(!1)}function gC(t,e){const n=xe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vm(n)?Dm(n):Aa(n).O_()&&Mm(n,e))}function Nm(t,e){const n=xe(t),o=Aa(n);n.Ia.delete(e),o.O_()&&yC(n,e),n.Ia.size===0&&(o.O_()?o.L_():ss(n)&&n.Va.set("Unknown"))}function Mm(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Aa(t).Z_(e)}function yC(t,e){t.da.$e(e),Aa(t).X_(e)}function Dm(t){t.da=new rU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Aa(t).start(),t.Va.ua()}function Vm(t){return ss(t)&&!Aa(t).x_()&&t.Ia.size>0}function ss(t){return xe(t).Ea.size===0}function vC(t){t.da=void 0}async function hL(t){t.Va.set("Online")}async function pL(t){t.Ia.forEach(((e,n)=>{Mm(t,e)}))}async function mL(t,e){vC(t),Vm(t)?(t.Va.ha(e),Dm(t)):t.Va.set("Unknown")}async function gL(t,e,n){if(t.Va.set("Online"),e instanceof tC&&e.state===2&&e.cause)try{await(async function(s,l){const u=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ia.delete(d),s.da.removeTarget(d))})(t,e)}catch(o){pe(is,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await vf(t,o)}else if(e instanceof Zc?t.da.Xe(e):e instanceof eC?t.da.st(e):t.da.tt(e),!n.isEqual(be.min()))try{const o=await hC(t.localStore);n.compareTo(o)>=0&&await(function(l,u){const d=l.da.Tt(u);return d.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,p)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(en.EMPTY_BYTE_STRING,_.snapshotVersion)),yC(l,g);const E=new nr(_.target,g,p,_.sequenceNumber);Mm(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(o){pe(is,"Failed to raise snapshot:",o),await vf(t,o)}}async function vf(t,e,n){if(!Ta(e))throw e;t.Ea.add(1),await tu(t),t.Va.set("Offline"),n||(n=()=>hC(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{pe(is,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ff(t)}))}function _C(t,e){return e().catch((n=>vf(t,n,e)))}async function qf(t){const e=xe(t),n=hr(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mm;for(;yL(e);)try{const s=await ZU(e.localStore,o);if(s===null){e.Ta.length===0&&n.L_();break}o=s.batchId,vL(e,s)}catch(s){await vf(e,s)}EC(e)&&TC(e)}function yL(t){return ss(t)&&t.Ta.length<10}function vL(t,e){t.Ta.push(e);const n=hr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function EC(t){return ss(t)&&!hr(t).x_()&&t.Ta.length>0}function TC(t){hr(t).start()}async function _L(t){hr(t).ra()}async function EL(t){const e=hr(t);for(const n of t.Ta)e.ea(n.mutations)}async function TL(t,e,n){const o=t.Ta.shift(),s=Am.from(o,e,n);await _C(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await qf(t)}async function SL(t,e){e&&hr(t).Y_&&await(async function(o,s){if((function(u){return nU(u)&&u!==oe.ABORTED})(s.code)){const l=o.Ta.shift();hr(o).B_(),await _C(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,s))),await qf(o)}})(t,e),EC(t)&&TC(t)}async function fT(t,e){const n=xe(t);n.asyncQueue.verifyOperationInProgress(),pe(is,"RemoteStore received new credentials");const o=ss(n);n.Ea.add(3),await tu(n),o&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ff(n)}async function AL(t,e){const n=xe(t);e?(n.Ea.delete(2),await Ff(n)):e||(n.Ea.add(2),await tu(n),n.Va.set("Unknown"))}function Aa(t){return t.ma||(t.ma=(function(n,o,s){const l=xe(n);return l.sa(),new sL(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(t.datastore,t.asyncQueue,{Zo:hL.bind(null,t),Yo:pL.bind(null,t),t_:mL.bind(null,t),J_:gL.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Vm(t)?Dm(t):t.Va.set("Unknown")):(await t.ma.stop(),vC(t))}))),t.ma}function hr(t){return t.fa||(t.fa=(function(n,o,s){const l=xe(n);return l.sa(),new aL(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:_L.bind(null,t),t_:SL.bind(null,t),ta:EL.bind(null,t),na:TL.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await qf(t)):(await t.fa.stop(),t.Ta.length>0&&(pe(is,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,o,s,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=s,this.removalCallback=l,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,s,l){const u=Date.now()+o,d=new Pm(e,n,u,s,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function km(t,e){if(go("AsyncQueue",`${e}: ${t}`),Ta(t))return new de(oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{static emptySet(e){return new sa(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||Te.comparator(n.key,o.key):(n,o)=>Te.comparator(n.key,o.key),this.keyedMap=Dl(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,l=o.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new sa;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.ga=new mt(Te.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class ha{constructor(e,n,o,s,l,u,d,g,p){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,n,o,s,l){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new ha(e,n,sa.emptySet(n),u,o,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==o[s].type||!n[s].doc.isEqual(o[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class wL{constructor(){this.queries=hT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const s=xe(n),l=s.queries;s.queries=hT(),l.forEach(((u,d)=>{for(const g of d.ba)g.onError(o)}))})(this,new de(oe.ABORTED,"Firestore shutting down"))}}function hT(){return new rs((t=>qA(t)),Pf)}async function IL(t,e){const n=xe(t);let o=3;const s=e.query;let l=n.queries.get(s);l?!l.Sa()&&e.Da()&&(o=2):(l=new CL,o=e.Da()?0:1);try{switch(o){case 0:l.wa=await n.onListen(s,!0);break;case 1:l.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const d=km(u,`Initialization of query '${Zs(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,l),l.ba.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&Um(n)}async function bL(t,e){const n=xe(t),o=e.query;let s=3;const l=n.queries.get(o);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function RL(t,e){const n=xe(t);let o=!1;for(const s of e){const l=s.query,u=n.queries.get(l);if(u){for(const d of u.ba)d.Fa(s)&&(o=!0);u.wa=s}}o&&Um(n)}function xL(t,e,n){const o=xe(t),s=o.queries.get(e);if(s)for(const l of s.ba)l.onError(n);o.queries.delete(e)}function Um(t){t.Ca.forEach((e=>{e.next()}))}var Gp,pT;(pT=Gp||(Gp={})).Ma="default",pT.Cache="cache";class NL{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const s of e.docChanges)s.type!==3&&o.push(s);e=new ha(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.key=e}}class AC{constructor(e){this.key=e}}class ML{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=qe(),this.mutatedKeys=qe(),this.eu=zA(e),this.tu=new sa(this.eu)}get nu(){return this.Za}ru(e,n){const o=n?n.iu:new dT,s=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,u=s,d=!1;const g=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const T=s.get(_),I=kf(this.query,E)?E:null,V=!!T&&this.mutatedKeys.has(T.key),O=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;T&&I?T.data.isEqual(I.data)?V!==O&&(o.track({type:3,doc:I}),P=!0):this.su(T,I)||(o.track({type:2,doc:I}),P=!0,(g&&this.eu(I,g)>0||p&&this.eu(I,p)<0)&&(d=!0)):!T&&I?(o.track({type:0,doc:I}),P=!0):T&&!I&&(o.track({type:1,doc:T}),P=!0,(g||p)&&(d=!0)),P&&(I?(u=u.add(I),l=O?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),o.track({type:1,doc:_})}return{tu:u,iu:o,Ss:d,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,E)=>(function(I,V){const O=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:P})}};return O(I)-O(V)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(o),s=s??!1;const d=n&&!s?this._u():[],g=this.Ya.size===0&&this.current&&!s?1:0,p=g!==this.Xa;return this.Xa=g,u.length!==0||p?{snapshot:new ha(this.query,e.tu,l,u,e.mutatedKeys,g===0,p,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=qe(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const n=[];return e.forEach((o=>{this.Ya.has(o)||n.push(new AC(o))})),this.Ya.forEach((o=>{e.has(o)||n.push(new SC(o))})),n}cu(e){this.Za=e.ks,this.Ya=qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ha.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Lm="SyncEngine";class DL{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class VL{constructor(e){this.key=e,this.hu=!1}}class PL{constructor(e,n,o,s,l,u){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new rs((d=>qA(d)),Pf),this.Iu=new Map,this.Eu=new Set,this.Ru=new mt(Te.comparator),this.Au=new Map,this.Vu=new Im,this.du={},this.mu=new Map,this.fu=da.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kL(t,e,n=!0){const o=xC(t);let s;const l=o.Tu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await CC(o,e,n,!0),s}async function UL(t,e){const n=xC(t);await CC(n,e,!0,!1)}async function CC(t,e,n,o){const s=await WU(t.localStore,qi(e)),l=s.targetId,u=t.sharedClientState.addLocalQueryTarget(l,n);let d;return o&&(d=await LL(t,e,l,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&gC(t.remoteStore,s),d}async function LL(t,e,n,o,s){t.pu=(E,T,I)=>(async function(O,P,G,Z){let W=P.view.ru(G);W.Ss&&(W=await sT(O.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,W))));const se=Z&&Z.targetChanges.get(P.targetId),ee=Z&&Z.targetMismatches.get(P.targetId)!=null,ce=P.view.applyChanges(W,O.isPrimaryClient,se,ee);return gT(O,P.targetId,ce.au),ce.snapshot})(t,E,T,I);const l=await sT(t.localStore,e,!0),u=new ML(e,l.ks),d=u.ru(l.documents),g=eu.createSynthesizedTargetChangeForCurrentChange(n,o&&t.onlineState!=="Offline",s),p=u.applyChanges(d,t.isPrimaryClient,g);gT(t,n,p.au);const _=new DL(e,n,u);return t.Tu.set(e,_),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function OL(t,e,n){const o=xe(t),s=o.Tu.get(e),l=o.Iu.get(s.targetId);if(l.length>1)return o.Iu.set(s.targetId,l.filter((u=>!Pf(u,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(s.targetId),o.sharedClientState.isActiveQueryTarget(s.targetId)||await qp(o.localStore,s.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(s.targetId),n&&Nm(o.remoteStore,s.targetId),Hp(o,s.targetId)})).catch(Ea)):(Hp(o,s.targetId),await qp(o.localStore,s.targetId,!0))}async function BL(t,e){const n=xe(t),o=n.Tu.get(e),s=n.Iu.get(o.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),Nm(n.remoteStore,o.targetId))}async function FL(t,e,n){const o=JL(t);try{const s=await(function(u,d){const g=xe(u),p=dt.now(),_=d.reduce(((I,V)=>I.add(V.key)),qe());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let V=yo(),O=qe();return g.xs.getEntries(I,_).next((P=>{V=P,V.forEach(((G,Z)=>{Z.isValidDocument()||(O=O.add(G))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,V))).next((P=>{E=P;const G=[];for(const Z of d){const W=Z4(Z,E.get(Z.key).overlayedDocument);W!=null&&G.push(new vr(Z.key,W,VA(W.value.mapValue),di.exists(!0)))}return g.mutationQueue.addMutationBatch(I,p,G,d)})).next((P=>{T=P;const G=P.applyToLocalDocumentSet(E,O);return g.documentOverlayCache.saveOverlays(I,P.batchId,G)}))})).then((()=>({batchId:T.batchId,changes:HA(E)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(s.batchId),(function(u,d,g){let p=u.du[u.currentUser.toKey()];p||(p=new mt(Fe)),p=p.insert(d,g),u.du[u.currentUser.toKey()]=p})(o,s.batchId,n),await nu(o,s.changes),await qf(o.remoteStore)}catch(s){const l=km(s,"Failed to persist write");n.reject(l)}}async function wC(t,e){const n=xe(t);try{const o=await QU(n.localStore,e);e.targetChanges.forEach(((s,l)=>{const u=n.Au.get(l);u&&(Ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.hu=!0:s.modifiedDocuments.size>0?Ze(u.hu,14607):s.removedDocuments.size>0&&(Ze(u.hu,42227),u.hu=!1))})),await nu(n,o,e)}catch(o){await Ea(o)}}function mT(t,e,n){const o=xe(t);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const s=[];o.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const g=xe(u);g.onlineState=d;let p=!1;g.queries.forEach(((_,E)=>{for(const T of E.ba)T.va(d)&&(p=!0)})),p&&Um(g)})(o.eventManager,e),s.length&&o.Pu.J_(s),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function qL(t,e,n){const o=xe(t);o.sharedClientState.updateQueryState(e,"rejected",n);const s=o.Au.get(e),l=s&&s.key;if(l){let u=new mt(Te.comparator);u=u.insert(l,rn.newNoDocument(l,be.min()));const d=qe().add(l),g=new Of(be.min(),new Map,new mt(Fe),u,d);await wC(o,g),o.Ru=o.Ru.remove(l),o.Au.delete(e),Om(o)}else await qp(o.localStore,e,!1).then((()=>Hp(o,e,n))).catch(Ea)}async function zL(t,e){const n=xe(t),o=e.batch.batchId;try{const s=await $U(n.localStore,e);bC(n,o,null),IC(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await nu(n,s)}catch(s){await Ea(s)}}async function GL(t,e,n){const o=xe(t);try{const s=await(function(u,d){const g=xe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,d).next((E=>(Ze(E!==null,37113),_=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(o.localStore,e);bC(o,e,n),IC(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await nu(o,s)}catch(s){await Ea(s)}}function IC(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function bC(t,e,n){const o=xe(t);let s=o.du[o.currentUser.toKey()];if(s){const l=s.get(e);l&&(n?l.reject(n):l.resolve(),s=s.remove(e)),o.du[o.currentUser.toKey()]=s}}function Hp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const o of t.Iu.get(e))t.Tu.delete(o),n&&t.Pu.yu(o,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((o=>{t.Vu.containsKey(o)||RC(t,o)}))}function RC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Nm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Om(t))}function gT(t,e,n){for(const o of n)o instanceof SC?(t.Vu.addReference(o.key,e),HL(t,o)):o instanceof AC?(pe(Lm,"Document no longer in limbo: "+o.key),t.Vu.removeReference(o.key,e),t.Vu.containsKey(o.key)||RC(t,o.key)):Ce(19791,{wu:o})}function HL(t,e){const n=e.key,o=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(o)||(pe(Lm,"New document in limbo: "+n),t.Eu.add(o),Om(t))}function Om(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Te(lt.fromString(e)),o=t.fu.next();t.Au.set(o,new VL(n)),t.Ru=t.Ru.insert(n,o),gC(t.remoteStore,new nr(qi(Em(n.path)),o,"TargetPurposeLimboResolution",Mf.ce))}}async function nu(t,e,n){const o=xe(t),s=[],l=[],u=[];o.Tu.isEmpty()||(o.Tu.forEach(((d,g)=>{u.push(o.pu(g,e,n).then((p=>{var _;if((p||n)&&o.isPrimaryClient){const E=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:_.current;o.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){s.push(p);const E=Rm.Es(g.targetId,p);l.push(E)}})))})),await Promise.all(u),o.Pu.J_(s),await(async function(g,p){const _=xe(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(p,(T=>re.forEach(T.Ts,(I=>_.persistence.referenceDelegate.addReference(E,T.targetId,I))).next((()=>re.forEach(T.Is,(I=>_.persistence.referenceDelegate.removeReference(E,T.targetId,I)))))))))}catch(E){if(!Ta(E))throw E;pe(xm,"Failed to update sequence numbers: "+E)}for(const E of p){const T=E.targetId;if(!E.fromCache){const I=_.vs.get(T),V=I.snapshotVersion,O=I.withLastLimboFreeSnapshotVersion(V);_.vs=_.vs.insert(T,O)}}})(o.localStore,l))}async function YL(t,e){const n=xe(t);if(!n.currentUser.isEqual(e)){pe(Lm,"User change. New user:",e.toKey());const o=await dC(n.localStore,e);n.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new de(oe.CANCELLED,u))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await nu(n,o.Ns)}}function KL(t,e){const n=xe(t),o=n.Au.get(e);if(o&&o.hu)return qe().add(o.key);{let s=qe();const l=n.Iu.get(e);if(!l)return s;for(const u of l){const d=n.Tu.get(u);s=s.unionWith(d.view.nu)}return s}}function xC(t){const e=xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qL.bind(null,e),e.Pu.J_=RL.bind(null,e.eventManager),e.Pu.yu=xL.bind(null,e.eventManager),e}function JL(t){const e=xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GL.bind(null,e),e}class _f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return JU(this.persistence,new HU,e.initialUser,this.serializer)}Cu(e){return new fC(bm.Vi,this.serializer)}Du(e){return new eL}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_f.provider={build:()=>new _f};class $L extends _f{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof yf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new xU(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new fC((o=>yf.Vi(o,n)),this.serializer)}}class Yp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>mT(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=YL.bind(null,this.syncEngine),await AL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wL})()}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),o=rL(e.databaseInfo);return cL(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,s,l,u,d){return new dL(o,s,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>mT(this.syncEngine,n,0)),(function(){return uT.v()?new uT:new tL})())}createSyncEngine(e,n){return(function(s,l,u,d,g,p,_){const E=new PL(s,l,u,d,g,p);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const l=xe(s);pe(is,"RemoteStore shutting down."),l.Ea.add(5),await tu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Yp.provider={build:()=>new Yp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):go("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="FirestoreClient";class XL{constructor(e,n,o,s,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this._databaseInfo=s,this.user=on.UNAUTHENTICATED,this.clientId=pm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async u=>{pe(pr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(pe(pr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=km(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function ap(t,e){t.asyncQueue.verifyOperationInProgress(),pe(pr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let o=n.initialUser;t.setCredentialChangeListener((async s=>{o.isEqual(s)||(await dC(e.localStore,s),o=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function yT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZL(t);pe(pr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((o=>fT(e.remoteStore,o))),t.setAppCheckTokenChangeListener(((o,s)=>fT(e.remoteStore,s))),t._onlineComponents=e}async function ZL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe(pr,"Using user provided OfflineComponentProvider");try{await ap(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;la("Error using user provided cache. Falling back to memory cache: "+n),await ap(t,new _f)}}else pe(pr,"Using default OfflineComponentProvider"),await ap(t,new $L(void 0));return t._offlineComponents}async function NC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe(pr,"Using user provided OnlineComponentProvider"),await yT(t,t._uninitializedComponentsProvider._online)):(pe(pr,"Using default OnlineComponentProvider"),await yT(t,new Yp))),t._onlineComponents}function WL(t){return NC(t).then((e=>e.syncEngine))}async function vT(t){const e=await NC(t),n=e.eventManager;return n.onListen=kL.bind(null,e.syncEngine),n.onUnlisten=OL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BL.bind(null,e.syncEngine),n}function jL(t,e,n,o){const s=new QL(o),l=new NL(e,s,n);return t.asyncQueue.enqueueAndForget((async()=>IL(await vT(t),l))),()=>{s.Nu(),t.asyncQueue.enqueueAndForget((async()=>bL(await vT(t),l)))}}function e6(t,e){const n=new Wr;return t.asyncQueue.enqueueAndForget((async()=>FL(await WL(t),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6="ComponentProvider",_T=new Map;function n6(t,e,n,o,s){return new _4(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,MC(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="firestore.googleapis.com",ET=!0;class TT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DC,this.ssl=ET}else this.host=e.host,this.ssl=e.ssl??ET;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bU)throw new de(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MC(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new de(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,s){return o.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,n,o,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new Wk;switch(o.type){case"firstParty":return new n4(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new de(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=_T.get(n);o&&(pe(t6,"Removing Datastore"),_T.delete(n),o.terminate())})(this),Promise.resolve()}}function i6(t,e,n,o={}){var p;t=sr(t,zf);const s=om(e),l=t._getSettings(),u={...l,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;s&&(nV(`https://${d}`),sV("Firestore",!0)),l.host!==DC&&l.host!==d&&la("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:s,emulatorOptions:o};if(!zl(g,u)&&(t._setSettings(g),o.mockUserToken)){let _,E;if(typeof o.mockUserToken=="string")_=o.mockUserToken,E=on.MOCK_USER;else{_=iV(o.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const T=o.mockUserToken.sub||o.mockUserToken.user_id;if(!T)throw new de(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(T)}t._authCredentials=new jk(new TA(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class kt{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(Wl(n,kt._jsonSchema))return new kt(e,o||null,new Te(lt.fromString(n.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:Pt("string",kt._jsonSchemaVersion),referencePath:Pt("string")};class ar extends as{constructor(e,n,o){super(e,n,Em(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Te(e))}withConverter(e){return new ar(this.firestore,e,this._path)}}function Hc(t,e,...n){if(t=Pn(t),SA("collection","path",e),t instanceof zf){const o=lt.fromString(e,...n);return VE(o),new ar(t,null,o)}{if(!(t instanceof kt||t instanceof ar))throw new de(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(lt.fromString(e,...n));return VE(o),new ar(t.firestore,null,o)}}function Pl(t,e,...n){if(t=Pn(t),arguments.length===1&&(e=pm.newId()),SA("doc","path",e),t instanceof zf){const o=lt.fromString(e,...n);return DE(o),new kt(t,null,new Te(o))}{if(!(t instanceof kt||t instanceof ar))throw new de(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(lt.fromString(e,...n));return DE(o),new kt(t.firestore,t instanceof ar?t.converter:null,new Te(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="AsyncQueue";class AT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pC(this,"async_queue_retry"),this._c=()=>{const o=sp();o&&pe(ST,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=sp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ta(e))throw e;pe(ST,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,go("INTERNAL UNHANDLED ERROR: ",CT(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Pm.createAndSchedule(this,e,n,o,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ce(47125,{Pc:CT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function CT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class pa extends zf{constructor(e,n,o,s){super(e,n,o,s),this.type="firestore",this._queue=new AT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AT(e),this._firestoreClient=void 0,await e}}}function o6(t,e){const n=typeof t=="object"?t:HS(),o=typeof t=="string"?t:ff,s=Zl(n,"firestore").getImmediate({identifier:o});if(!s._initialized){const l=eV("firestore");l&&i6(s,...l)}return s}function VC(t){if(t._terminated)throw new de(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||r6(t),t._firestoreClient}function r6(t){var o,s,l,u;const e=t._freezeSettings(),n=n6(t._databaseId,((o=t._app)==null?void 0:o.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new XL(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(en.fromBase64String(e))}catch(n){throw new de(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wl(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:Pt("string",Qn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(Wl(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:Pt("string",Gi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,s){if(o.length!==s.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wl(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new hi(e.vectorValues);throw new de(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:Pt("string",hi._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=/^__.*__$/;class a6{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new jl(e,this.data,n,this.fieldTransforms)}}class PC{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{dataSource:t})}}class qm{constructor(e,n,o,s,l,u){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new qm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),o=this.contextWith({path:n,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),o=this.contextWith({path:n,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ef(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(kC(this.dataSource)&&s6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class l6{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Bf(e)}createContext(e,n,o,s=!1){return new qm({dataSource:e,methodName:n,targetDoc:o,path:jt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zm(t){const e=t._freezeSettings(),n=Bf(t._databaseId);return new l6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function u6(t,e,n,o,s,l={}){const u=t.createContext(l.merge||l.mergeFields?2:0,e,n,s);Gm("Data must be an object, but it was:",u,o);const d=UC(o,u);let g,p;if(l.merge)g=new Dn(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const T=ma(e,E,n);if(!u.contains(T))throw new de(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);BC(_,T)||_.push(T)}g=new Dn(_),p=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=u.fieldTransforms;return new a6(new Tn(d),g,p)}class Gf extends Fm{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}function c6(t,e,n,o){const s=t.createContext(1,e,n);Gm("Data must be an object, but it was:",s,o);const l=[],u=Tn.empty();yr(o,((g,p)=>{const _=OC(e,g,n);p=Pn(p);const E=s.childContextForFieldPath(_);if(p instanceof Gf)l.push(_);else{const T=iu(p,E);T!=null&&(l.push(_),u.set(_,T))}}));const d=new Dn(l);return new PC(u,d,s.fieldTransforms)}function f6(t,e,n,o,s,l){const u=t.createContext(1,e,n),d=[ma(e,o,n)],g=[s];if(l.length%2!=0)throw new de(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(ma(e,l[T])),g.push(l[T+1]);const p=[],_=Tn.empty();for(let T=d.length-1;T>=0;--T)if(!BC(p,d[T])){const I=d[T];let V=g[T];V=Pn(V);const O=u.childContextForFieldPath(I);if(V instanceof Gf)p.push(I);else{const P=iu(V,O);P!=null&&(p.push(I),_.set(I,P))}}const E=new Dn(p);return new PC(_,E,u.fieldTransforms)}function d6(t,e,n,o=!1){return iu(n,t.createContext(o?4:3,e))}function iu(t,e){if(LC(t=Pn(t)))return Gm("Unsupported field value:",e,t),UC(t,e);if(t instanceof Fm)return(function(o,s){if(!kC(s.dataSource))throw s.createError(`${o._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,s){const l=[];let u=0;for(const d of o){let g=iu(d,s.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(t,e)}return(function(o,s){if((o=Pn(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return Y4(s.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=dt.fromDate(o);return{timestampValue:gf(s.serializer,l)}}if(o instanceof dt){const l=new dt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:gf(s.serializer,l)}}if(o instanceof Gi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Qn)return{bytesValue:nC(s.serializer,o._byteString)};if(o instanceof kt){const l=s.databaseId,u=o.firestore._databaseId;if(!u.isEqual(l))throw s.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:wm(o.firestore._databaseId||s.databaseId,o._key.path)}}if(o instanceof hi)return(function(u,d){const g=u instanceof hi?u.toArray():u;return{mapValue:{fields:{[MA]:{stringValue:DA},[df]:{arrayValue:{values:g.map((_=>{if(typeof _!="number")throw d.createError("VectorValues must only contain numeric values.");return Tm(d.serializer,_)}))}}}}}})(o,s);if(uC(o))return o._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Nf(o)}`)})(t,e)}function UC(t,e){const n={};return wA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yr(t,((o,s)=>{const l=iu(s,e.childContextForField(o));l!=null&&(n[o]=l)})),{mapValue:{fields:n}}}function LC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dt||t instanceof Gi||t instanceof Qn||t instanceof kt||t instanceof Fm||t instanceof hi||uC(t))}function Gm(t,e,n){if(!LC(n)||!AA(n)){const o=Nf(n);throw o==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+o)}}function ma(t,e,n){if((e=Pn(e))instanceof Bm)return e._internalPath;if(typeof e=="string")return OC(t,e);throw Ef("Field path arguments must be of type string or ",t,!1,void 0,n)}const h6=new RegExp("[~\\*/\\[\\]]");function OC(t,e,n){if(e.search(h6)>=0)throw Ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bm(...e.split("."))._internalPath}catch{throw Ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ef(t,e,n,o,s){const l=o&&!o.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${o}`),u&&(g+=` in document ${s}`),g+=")"),new de(oe.INVALID_ARGUMENT,d+t+g)}function BC(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{convertValue(e,n="none"){switch(dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return yr(e,((s,l)=>{o[s]=this.convertValue(l,n)})),o}convertVectorValue(e){var o,s,l;const n=(l=(s=(o=e.fields)==null?void 0:o[df].arrayValue)==null?void 0:s.values)==null?void 0:l.map((u=>At(u.doubleValue)));return new hi(n)}convertGeoPoint(e){return new Gi(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Vf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const n=cr(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=lt.fromString(e);Ze(lC(o),9688,{name:e});const s=new Kl(o.get(1),o.get(3)),l=new Te(o.popFirst(5));return s.isEqual(n)||go(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC extends p6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}const wT="@firebase/firestore",IT="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t){return(function(n,o){if(typeof n!="object"||n===null)return!1;const s=n;for(const l of o)if(l in s&&typeof s[l]=="function")return!0;return!1})(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n,o,s,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(ma("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class m6 extends qC{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hm{}class zC extends Hm{}function RT(t,e,...n){let o=[];e instanceof Hm&&o.push(e),o=o.concat(n),(function(l){const u=l.filter((g=>g instanceof Km)).length,d=l.filter((g=>g instanceof Ym)).length;if(u>1||u>0&&d>0)throw new de(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const s of o)t=s._apply(t);return t}class Ym extends zC{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Ym(e,n,o)}_apply(e){const n=this._parse(e);return GC(e._query,n),new as(e.firestore,e.converter,kp(e._query,n))}_parse(e){const n=zm(e.firestore);return(function(l,u,d,g,p,_,E){let T;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){MT(E,_);const V=[];for(const O of E)V.push(NT(g,l,O));T={arrayValue:{values:V}}}else T=NT(g,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||MT(E,_),T=d6(d,u,E,_==="in"||_==="not-in");return Vt.create(p,_,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Km extends Hm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Km(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:pi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,l){let u=s;const d=l.getFlattenedFilters();for(const g of d)GC(u,g),u=kp(u,g)})(e._query,n),new as(e.firestore,e.converter,kp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jm extends zC{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jm(e,n)}_apply(e){const n=(function(s,l,u){if(s.startAt!==null)throw new de(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new de(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $l(l,u)})(e._query,this._field,this._direction);return new as(e.firestore,e.converter,L4(e._query,n))}}function xT(t,e="asc"){const n=e,o=ma("orderBy",t);return Jm._create(o,n)}function NT(t,e,n){if(typeof(n=Pn(n))=="string"){if(n==="")throw new de(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FA(e)&&n.indexOf("/")!==-1)throw new de(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(lt.fromString(n));if(!Te.isDocumentKey(o))throw new de(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return qE(t,new Te(o))}if(n instanceof kt)return qE(t,n._key);throw new de(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nf(n)}.`)}function MT(t,e){if(!Array.isArray(t)||t.length===0)throw new de(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GC(t,e){const n=(function(s,l){for(const u of s)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function y6(t,e,n){let o;return o=t?t.toFirestore(e):e,o}class kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jr extends qC{constructor(e,n,o,s,l,u){super(e,n,o,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(ma("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",jr._jsonSchema={type:Pt("string",jr._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Wc extends jr{data(e={}){return super.data(e)}}class aa{constructor(e,n,o,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new kl(s.hasPendingWrites,s.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Wc(this._firestore,this._userDataWriter,o.key,o,new kl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const g=new Wc(s._firestore,s._userDataWriter,d.doc.key,d.doc,new kl(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new Wc(s._firestore,s._userDataWriter,d.doc.key,d.doc,new kl(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:v6(d.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function v6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */aa._jsonSchemaVersion="firestore/querySnapshot/1.0",aa._jsonSchema={type:Pt("string",aa._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};function DT(t,e,n,...o){t=sr(t,kt);const s=sr(t.firestore,pa),l=zm(s);let u;return u=typeof(e=Pn(e))=="string"||e instanceof Bm?f6(l,"updateDoc",t._key,e,n,o):c6(l,"updateDoc",t._key,e),$m(s,[u.toMutation(t._key,di.exists(!0))])}function VT(t){return $m(sr(t.firestore,pa),[new Sm(t._key,di.none())])}function PT(t,e){const n=sr(t.firestore,pa),o=Pl(t),s=y6(t.converter,e),l=zm(t.firestore);return $m(n,[u6(l,"addDoc",o._key,s,t.converter!==null,{}).toMutation(o._key,di.exists(!1))]).then((()=>o))}function kT(t,...e){var p,_,E;t=Pn(t);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||bT(e[o])||(n=e[o++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(bT(e[o])){const T=e[o];e[o]=(p=T.next)==null?void 0:p.bind(T),e[o+1]=(_=T.error)==null?void 0:_.bind(T),e[o+2]=(E=T.complete)==null?void 0:E.bind(T)}let l,u,d;if(t instanceof kt)u=sr(t.firestore,pa),d=Em(t._key.path),l={next:T=>{e[o]&&e[o](_6(u,t,T))},error:e[o+1],complete:e[o+2]};else{const T=sr(t,as);u=sr(T.firestore,pa),d=T._query;const I=new FC(u);l={next:V=>{e[o]&&e[o](new aa(u,I,T,V))},error:e[o+1],complete:e[o+2]},g6(t._query)}const g=VC(u);return jL(g,d,s,l)}function $m(t,e){const n=VC(t);return e6(n,e)}function _6(t,e,n){const o=n.docs.get(e._key),s=new FC(t);return new jr(t,s,e._key,o,new kl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){Zk(yP),lr(new po("firestore",((o,{instanceIdentifier:s,options:l})=>{const u=o.getProvider("app").getImmediate(),d=new pa(new e4(o.getProvider("auth-internal")),new i4(u,o.getProvider("app-check-internal")),E4(u,s),u);return l={useFetchStreams:n,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Fi(wT,IT,e),Fi(wT,IT,"esm2020")})();const E6={apiKey:"AIzaSyAPC-PciJOrOYTMt9fFLQup1SQ7n31QCro",authDomain:"benim-televizyonum-6791f.firebaseapp.com",projectId:"benim-televizyonum-6791f",storageBucket:"benim-televizyonum-6791f.firebasestorage.app",messagingSenderId:"360775517129",appId:"1:360775517129:web:a9db393cc0bca6058c5e18",measurementId:"G-4XP0D3C927"},HC=GS(E6);Kk(HC);const tr=o6(HC),T6=()=>{const[t,e]=ve.useState([]),[n,o]=ve.useState("watched"),[s,l]=ve.useState(!1);ve.useEffect(()=>{const V=RT(Hc(tr,"movies"),xT("watchedDate","desc")),O=kT(V,P=>{const G=P.docs.map(Z=>({id:Z.id,...Z.data()}));e(G)});return()=>O()},[]);const[u,d]=ve.useState([]);return ve.useEffect(()=>{const V=RT(Hc(tr,"suggestions"),xT("createdAt","desc")),O=kT(V,P=>{const G=P.docs.map(Z=>({id:Z.id,...Z.data()}));d(G)});return()=>O()},[]),{movies:t,activeTab:n,setActiveTab:o,addMovie:async V=>{l(!0);try{const O=!!V.manualPosterBase64,P=!!(V.manualYear&&V.manualSummary);let G;G=await G2(V.rawTitle,O);const Z={title:V.rawTitle,originalTitle:G.originalTitle||V.rawTitle,year:V.manualYear||G.year||"???",genre:V.manualGenres||G.genre||["Bilinmiyor"],director:V.manualDirector||G.director||"Bilinmiyor",summary:V.manualSummary||G.summary||"zet bulunamad.",emoji:G.emoji||"",themeColor:G.themeColor||"#64748b",imdbUrl:V.imdbUrl?V.imdbUrl:G.imdbUrl||"",posterBase64:V.manualPosterBase64||G.posterBase64||null,status:V.status,userRating:V.userRating||null,userReview:V.userReview||null,watchedDate:V.status==="watched"?new Date().toISOString():null,createdAt:new Date().toISOString(),isApproved:!1},W=JSON.parse(JSON.stringify(Z));await PT(Hc(tr,"movies"),W)}catch(O){throw console.error("Error adding movie:",O),O}finally{l(!1)}},updateMovieStatus:async(V,O,P={})=>{try{const G=Pl(tr,"movies",V),Z=Object.entries(P).reduce((W,[se,ee])=>(ee!==void 0&&(W[se]=ee),W),{});await DT(G,{status:O,...Z})}catch(G){console.error("Error updating movie:",G)}},approveMovie:async V=>{try{const O=Pl(tr,"movies",V);await DT(O,{isApproved:!0})}catch(O){console.error("Error approving movie:",O)}},deleteMovie:async V=>{try{await VT(Pl(tr,"movies",V))}catch(O){console.error("Error deleting movie:",O)}},isSubmitting:s,suggestions:u,addSuggestion:async V=>{l(!0);try{await PT(Hc(tr,"suggestions"),{...V,createdAt:new Date().toISOString()})}catch(O){throw console.error("Error adding suggestion:",O),O}finally{l(!1)}},deleteSuggestion:async V=>{try{await VT(Pl(tr,"suggestions",V))}catch(O){console.error("Error deleting suggestion:",O)}}}},S6=t=>{const[e,n]=ve.useState({searchTerm:"",genre:"",year:"",rating:"",director:""}),[o,s]=ve.useState(1),l=30,u=(P,G)=>{n(Z=>({...Z,[P]:G}))},d=()=>{n({searchTerm:"",genre:"",year:"",rating:"",director:""})};ve.useEffect(()=>{s(1)},[e]);const g=ve.useMemo(()=>{const P=new Set;return t.forEach(G=>G.genre.forEach(Z=>P.add(Z))),Array.from(P).sort()},[t]),p=ve.useMemo(()=>{const P=new Set;return t.forEach(G=>P.add(G.year)),Array.from(P).sort().reverse()},[t]),_=ve.useMemo(()=>{const P=new Set;return t.forEach(G=>{G.director&&G.director!=="Bilinmiyor"&&G.director.split(",").map(Z=>Z.trim()).forEach(Z=>{Z&&P.add(Z)})}),Array.from(P).sort()},[t]),E=ve.useMemo(()=>t.filter(P=>{const G=P.title.toLowerCase().includes(e.searchTerm.toLowerCase())||P.originalTitle.toLowerCase().includes(e.searchTerm.toLowerCase())||P.director.toLowerCase().includes(e.searchTerm.toLowerCase()),Z=e.genre?P.genre.includes(e.genre):!0,W=e.year?P.year===e.year:!0,se=e.rating!==""?P.userRating===Number(e.rating):!0,ee=P.director?P.director.split(",").map(N=>N.trim()):[],ce=e.director?ee.includes(e.director):!0;return G&&Z&&W&&se&&ce}),[t,e]),T=Math.ceil(E.length/l),I=ve.useMemo(()=>{const P=(o-1)*l;return E.slice(P,P+l)},[E,o]);return{filters:e,setFilter:u,resetFilters:d,filteredMovies:E,paginatedMovies:I,availableGenres:g,availableYears:p,availableDirectors:_,pagination:{currentPage:o,totalPages:T,goToNextPage:()=>s(P=>Math.min(P+1,T)),goToPrevPage:()=>s(P=>Math.max(P-1,1)),setCurrentPage:s}}};function A6(){const{movies:t,activeTab:e,setActiveTab:n,addMovie:o,isSubmitting:s,deleteMovie:l,updateMovieStatus:u,approveMovie:d,addSuggestion:g,suggestions:p,deleteSuggestion:_}=T6(),[E,T]=ve.useState("watched"),I=t.filter(_e=>_e.isApproved!==!1),V=I.filter(_e=>_e.status===e),{filters:O,setFilter:P,resetFilters:G,paginatedMovies:Z,filteredMovies:W,availableGenres:se,availableYears:ee,availableDirectors:ce,pagination:N}=S6(V),[M,x]=ve.useState(!1),[L,k]=ve.useState(!1),[q,D]=ve.useState(!1),[Pe,rt]=ve.useState(!1),[J,ae]=ve.useState(!1),[ge,Ve]=ve.useState(!1),[$e,F]=ve.useState(null),[ne,ue]=ve.useState(!1),[he,Ae]=ve.useState(!1),we=_e=>{T(_e),_e!=="admin"&&n(_e)},[ke,gt]=ve.useState(null),[at,gi]=ve.useState(""),Yi=_e=>{gt(_e.id),gi(_e.title),k(!0)},Ki=()=>{s||(k(!1),gt(null),gi(""))},Eo=async _e=>{try{ke?u(ke,"watched",{userRating:_e.userRating,userReview:_e.userReview,watchedDate:new Date().toISOString()}):(await o(_e),alert("ISLEM BASARILI. YENI KAYIT ONAY SURECINE ALINDI.")),Ki()}catch{alert("Islem sirasinda bir hata telegrafi olustu.")}},Sn=_e=>{const ut=e==="watchlist"?"BU FILMI SILMEK ISTEDIGINIZE EMIN MISINIZ?":"BU KAYDI SILMEK ISTEDIGINIZE EMIN MISINIZ?";window.confirm(ut)&&l(_e)},To=()=>{const _e=I.filter(ut=>ut.status==="watched"&&(ut.userRating||0)>=4);if(_e.length===0){alert("ANSINIZ YOKMU! KOLEKSIYONDA 4 VEYA 5 YILDIZLI FILM BULUNAMADI.");return}const kn=Math.floor(Math.random()*_e.length);F(_e[kn])},yi=_e=>{E==="watched"&&O.director===_e?P("director",""):(we("watched"),P("searchTerm",""),P("genre",""),P("year",""),P("rating",""),P("director",_e))};return w.jsxs("div",{className:"min-h-screen pb-24 bg-black text-white font-mono selection:bg-yellow-400 selection:text-black",children:[w.jsx(wb,{activeTab:E,setActiveTab:we,onSurpriseMe:To,isSearchVisible:M,toggleSearch:()=>x(!M),searchTerm:O.searchTerm,onSearchChange:_e=>P("searchTerm",_e),onHoroscopeClick:()=>D(!0),onBlogClick:()=>rt(!0),onMusicClick:()=>Ve(!0)}),w.jsx("main",{className:"max-w-[1800px] mx-auto px-4 py-6",children:E==="admin"?w.jsx(Rb,{movies:t,onApprove:async _e=>await d(_e),onDelete:async _e=>await l(_e),onUpdate:async(_e,kn)=>await u(_e,kn.status,kn),suggestions:p,onDeleteSuggestion:_}):w.jsxs(w.Fragment,{children:[V.length>0&&E!=="watchlist"&&w.jsx(Ib,{activeTab:E,selectedGenre:O.genre,setSelectedGenre:_e=>P("genre",_e),selectedDirector:O.director,setSelectedDirector:_e=>P("director",_e),selectedYear:O.year,setSelectedYear:_e=>P("year",_e),selectedRating:O.rating,setSelectedRating:_e=>P("rating",_e),availableGenres:se,availableDirectors:ce,availableYears:ee}),V.length===0?w.jsxs("div",{className:"border-4 border-white border-dashed p-12 text-center bg-neutral-900",children:[w.jsx(pb,{size:64,className:"mx-auto text-neutral-600 mb-4"}),w.jsx("h2",{className:"text-3xl text-yellow-400 mb-2",children:"SINYAL YOK"}),w.jsx("p",{className:"text-xl text-white",children:"LTFEN YEN KAYIT EKLEYNZ..."}),w.jsx("button",{onClick:()=>k(!0),className:"mt-6 bg-yellow-400 text-black px-6 py-2 text-xl font-bold hover:bg-white",children:"[ KAYIT EKLE ]"})]}):W.length===0?w.jsxs("div",{className:"bg-red-900/50 border-2 border-red-600 p-8 text-center",children:[w.jsx("p",{className:"text-2xl text-red-400 blink",children:"ARAMA SONUCU BULUNAMADI"}),w.jsx("button",{onClick:G,className:"mt-4 text-white underline decoration-2 underline-offset-4 hover:text-yellow-400",children:"FILTRELERI SIFIRLA"})]}):w.jsxs(w.Fragment,{children:[E==="watchlist"?w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6",children:Z.map(_e=>w.jsx(_b,{movie:_e},_e.id))}):w.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-8",children:Z.map(_e=>w.jsx(zT,{movie:_e,onDelete:Sn,onMoveToWatched:Yi,onDirectorClick:yi,className:"h-full"},_e.id))}),N.totalPages>1&&w.jsxs("div",{className:"flex justify-between items-center bg-neutral-900 border-2 border-white p-4 mt-8 font-bold text-xl select-none",children:[w.jsx("button",{onClick:N.goToPrevPage,disabled:N.currentPage===1,className:`transition-colors ${N.currentPage===1?"text-neutral-700 cursor-not-allowed":"text-white hover:text-yellow-400 hover:bg-neutral-800 px-4"}`,children:"< NCEK"}),w.jsxs("div",{className:"text-yellow-400 font-mono text-2xl",children:["SAYFA [ 100-",N.currentPage.toString().padStart(2,"0")," ]"]}),w.jsx("button",{onClick:N.goToNextPage,disabled:N.currentPage===N.totalPages,className:`transition-colors ${N.currentPage===N.totalPages?"text-neutral-700 cursor-not-allowed":"text-white hover:text-yellow-400 hover:bg-neutral-800 px-4"}`,children:"SONRAK >"})]})]})]})}),w.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-black border-t-2 border-white p-2 z-40 flex gap-2",children:[w.jsx("button",{onClick:()=>k(!0),className:"flex-1 bg-yellow-400 text-black font-bold text-lg sm:text-2xl py-3 border-2 border-transparent hover:border-white hover:bg-yellow-300 transition-colors",children:"[ + YEN KAYIT ]"}),w.jsxs("button",{onClick:()=>ae(!0),className:"flex-1 bg-cyan-400 text-black font-bold text-lg sm:text-2xl py-3 border-2 border-transparent hover:border-white hover:bg-cyan-300 transition-colors flex items-center justify-center gap-2",children:[w.jsx(BT,{className:"w-6 h-6 sm:w-8 sm:h-8"}),w.jsx("span",{children:"[ BR FLM ISMARLA ]"})]}),w.jsx("button",{onClick:()=>{prompt("YONETICI KODU:")==="900"?we("admin"):alert("HATALI KOD! ERISIM REDDEDILDI.")},className:"bg-neutral-800 text-neutral-500 font-bold text-lg px-4 border-2 border-transparent hover:border-white hover:text-white transition-colors flex items-center justify-center",title:"YONETIM",children:"900"}),w.jsx("button",{onClick:()=>ue(!0),className:"bg-neutral-800 text-neutral-500 font-bold text-lg px-4 border-2 border-transparent hover:border-white hover:text-white transition-colors flex items-center justify-center",children:"?"}),w.jsx("button",{onClick:()=>Ae(!0),className:"bg-neutral-800 text-neutral-500 font-bold text-lg px-4 border-2 border-transparent hover:border-white hover:text-white transition-colors flex items-center justify-center",title:"ONERI FORMU",children:"F"})]}),w.jsx(qT,{isOpen:L,onClose:Ki,onSubmit:Eo,isSubmitting:s,initialTitle:at}),w.jsx(Tb,{isOpen:q,onClose:()=>D(!1),movies:I.filter(_e=>_e.status==="watched"&&(_e.userRating||0)>=4)}),w.jsx(Sb,{isOpen:Pe,onClose:()=>rt(!1)}),w.jsx(Ab,{isOpen:J,onClose:()=>ae(!1)}),w.jsx(Cb,{isOpen:ge,onClose:()=>Ve(!1)}),w.jsx(bb,{movie:$e,onClose:()=>F(null),onTryAgain:To,onDelete:Sn,onMoveToWatched:Yi,onDirectorClick:yi}),w.jsx(xb,{isOpen:ne,onClose:()=>ue(!1),watchedCount:I.filter(_e=>_e.status==="watched").length,watchlistCount:I.filter(_e=>_e.status==="watchlist").length}),w.jsx(Nb,{isOpen:he,onClose:()=>Ae(!1),onSubmit:g,isSubmitting:s})]})}const YC=document.getElementById("root");if(!YC)throw new Error("Could not find root element to mount to");const C6=DI.createRoot(YC);C6.render(w.jsx(LT.StrictMode,{children:w.jsx(A6,{})}));
